<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>t113-主线</title>
    <link href="/2023/09/28/t113-%E4%B8%BB%E7%BA%BF/"/>
    <url>/2023/09/28/t113-%E4%B8%BB%E7%BA%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><p>t113<br>  |———&gt;arm-none-linux-gnueabihf   #交叉编译器<br>  |———&gt;awboot#boot<br>  |———&gt;linux_kernel_t113#内核<br>  |———&gt;buildroot#根文件系统<br>  |———&gt;modules  #内核编译后的模块安装位置（方便拷贝）<br>  |———&gt;drivers#网上下载的驱动源码存放位置  </p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">apt <span class="hljs-keyword">install </span>git  xz-utils vim make gcc g++  flex <span class="hljs-keyword">bison </span>libncurses-dev wget  g++ cpio unzip rsync pkg-<span class="hljs-built_in">config</span> -y<br></code></pre></td></tr></table></figure><h1 id="安装交叉编译器"><a href="#安装交叉编译器" class="headerlink" title="安装交叉编译器"></a>安装交叉编译器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">- wget https://armkeil.blob.core.windows.net/developer/Files/downloads/gnu/12.3.rel1/binrel/arm-gnu-toolchain-12.3.rel1-x86_64-arm-none-linux-gnueabihf.tar.xz<br>- tar -xf arm-gnu-toolchain-12.3.rel1-x86_64-arm-none-linux-gnueabihf.tar.xz<br><br>改个名字<br>- mv arm-gnu-toolchain-12.3.rel1-x86_64-arm-none-linux-gnueabihf arm-none-linux-gnueabihf<br>- cd arm-none-linux-gnueabihf/bin<br>- pwd<br>复制输出的内容<br>- vim ~/.bashrc <br>在最后添加<br>- export PATH=$PATH:/home/huerli/t113/arm-none-linux-gnueabihf/bin<br>按下键盘左上角【esc】 按住shift+ ： 输入wq 退出vim编辑器<br>- source ~/.bashrc<br>- arm-none-linux-gnueabihf-gcc -v<br></code></pre></td></tr></table></figure><p>输出内容如下所示<br><img src="/img/t113/gcc-v.png" alt="gcc-v"></p><h1 id="编译awboot"><a href="#编译awboot" class="headerlink" title="编译awboot"></a>编译awboot</h1><h2 id="下拉awboot"><a href="#下拉awboot" class="headerlink" title="下拉awboot"></a>下拉awboot</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/szemzoa/awboot<br></code></pre></td></tr></table></figure><p>如果网络不行克隆不下就换成这个</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://gitee.com/huerli/awboot.git<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd awboot<br></code></pre></td></tr></table></figure><h2 id="编译工具"><a href="#编译工具" class="headerlink" title="编译工具"></a>编译工具</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">- cd tools<br>- gcc mksunxi.c -o mksunxi<br>- cd ..<br></code></pre></td></tr></table></figure><h2 id="修改-Makefile"><a href="#修改-Makefile" class="headerlink" title="修改 Makefile"></a>修改 Makefile</h2><p>修改为自己的交叉编译器即可</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">将CROSS_COMPILE?= arm-none-linux-gnueabihf<br></code></pre></td></tr></table></figure><p>在17行添加</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">CFLAGS += -lgcc_eh<br></code></pre></td></tr></table></figure><p>大概在 57行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">@/usr/bin/expr `/bin/cat .build_revision` + 1 &gt; .build_revision<br></code></pre></td></tr></table></figure><h2 id="修改main-c"><a href="#修改main-c" class="headerlink" title="修改main.c"></a>修改main.c</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">raise</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="编译-awboot"><a href="#编译-awboot" class="headerlink" title="编译 awboot"></a>编译 awboot</h2><p>做了上述步骤后再编译基本不会报错。  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make<br></code></pre></td></tr></table></figure><p>编译完成后出现awboot-boot.bin就说明编译成功了。<br><img src="/img/t113/make_awboot_ss.png"></p><h2 id="烧录"><a href="#烧录" class="headerlink" title="烧录"></a>烧录</h2><p>在插入ubuntu时，会挂载在&#x2F;dev&#x2F;下，可以通过ls命令查看插入前后的sd文件差异来哪个时插入的sd卡。<br><img src="/img/t113/sd.png"><br>如果是在windows下进行格式化的sd卡，会有多个文件挂载在&#x2F;dev&#x2F;下，通过fdisk命令进行删除分区。<br><img src="/img/t113/dd.png"></p><h3 id="例如我这里是sdc-和sdc1"><a href="#例如我这里是sdc-和sdc1" class="headerlink" title="例如我这里是sdc 和sdc1"></a>例如我这里是sdc 和sdc1</h3><p>d是删除分区<br>w是保存并退出</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo fdisk /dev/sdc<br>d<br>d<br>d<br>w<br></code></pre></td></tr></table></figure><p>将分区删除后，会发现 sdc只有一个分区了，再使用fdisk进行删除</p><h3 id="特殊"><a href="#特殊" class="headerlink" title="特殊"></a>特殊</h3><p>如果不管怎么删除分区都不变的情况下，就将电脑重启再进行操作。</p><h3 id="使用dd命令烧录"><a href="#使用dd命令烧录" class="headerlink" title="使用dd命令烧录"></a>使用dd命令烧录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo dd if=awboot-boot-sd.bin of=/dev/sdc bs=1024 seek=8<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs log">huerli@huerli:~/t113/awboot$ sudo dd if=awboot-boot-sd.bin of=/dev/sdc bs=1024 seek=8<br>记录了34+0 的读入<br>记录了34+0 的写出<br>34816字节（35 kB，34 KiB）已复制，0.0151855 s，2.3 MB/s<br></code></pre></td></tr></table></figure><p>使用命令查看是否结束sd卡使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sync<br></code></pre></td></tr></table></figure><p>没有任何输出即可拔出，插入开发板</p><h2 id="上电！！！"><a href="#上电！！！" class="headerlink" title="上电！！！"></a>上电！！！</h2><p>在这里是使用的串口5<br>PB4 TX — RX<br>PB5 RX — TX  </p><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[<span class="hljs-symbol">I</span>] <span class="hljs-symbol">AWBoot</span> r6166 starting...<br>[<span class="hljs-symbol">I</span>] <span class="hljs-symbol">SMHC</span>: sdhci0 controller v50310 initialized<br>[<span class="hljs-symbol">I</span>] <span class="hljs-symbol">SHMC</span>: <span class="hljs-symbol">SD</span> card detected<br>[<span class="hljs-symbol">E</span>] <span class="hljs-symbol">FATFS</span>: mount error: <span class="hljs-number">13</span><br>[<span class="hljs-symbol">W</span>] <span class="hljs-symbol">SMHC</span>: loading failed, trying <span class="hljs-symbol">SPI</span><br></code></pre></td></tr></table></figure></code></pre></details><p>因为没有kernel和dtb文件，就只能进行到这里。</p><p>ps：如果没有对应的输出<br>1、检查TTL-USB是否完好<br>2、检查杜邦线<br>3、检查io是否插对<br>4、重启电脑，重新烧录  </p><h2 id="可选项-修改输出串口"><a href="#可选项-修改输出串口" class="headerlink" title="可选项 修改输出串口"></a>可选项 修改输出串口</h2><h1 id="编译linux-kernel"><a href="#编译linux-kernel" class="headerlink" title="编译linux-kernel"></a>编译linux-kernel</h1><h2 id="下拉"><a href="#下拉" class="headerlink" title="下拉"></a>下拉</h2><ul><li>git clone <a href="https://github.com/Evlers/linux_kernel_t113.git">https://github.com/Evlers/linux_kernel_t113.git</a></li><li>cd linux-kernel-t113</li></ul><h2 id="自选-是否添加默认编译器"><a href="#自选-是否添加默认编译器" class="headerlink" title="自选 是否添加默认编译器"></a>自选 是否添加默认编译器</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">- vim Makefile<br>修改 CROSS_COMPILE 后面的参数为 arm-<span class="hljs-built_in">none</span>-linux-gnueabihf-<br></code></pre></td></tr></table></figure><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>（如果设置了默认编译器下方make可以不带参数 ARCH&#x3D;arm CROSS_COMPILE&#x3D;arm-none-linux-gnueabihf）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">- make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabihf- sunxi_defconfig  <br>-make sunxi_defconfig -j4<br>- make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabihf- menuconfig<br>-make menuconfig  -j4<br></code></pre></td></tr></table></figure><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs armasm">&gt; Device Drivers <br>&gt; <span class="hljs-meta">Common</span> Clock Framework<br>&lt;*&gt;   Clock support for Allwinner SoCs<br>&lt;*&gt;     Support for the Allwinner <span class="hljs-built_in">D1</span> CCU <br>&lt;*&gt;     Support for the Allwinner <span class="hljs-built_in">D1</span> PRCM CCU<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabihf zImage dtbs modules -jn（n根据自身电脑cpu核心数来 n&lt;=cpu核心）<br></code></pre></td></tr></table></figure><h2 id="烧录-1"><a href="#烧录-1" class="headerlink" title="烧录"></a>烧录</h2><p>编译完成后 会在arch&#x2F;arm&#x2F;boot&#x2F;下生成zImage 和arch&#x2F;arm&#x2F;boot&#x2F;dts&#x2F; 生成sun8i-t113-mangopi-dual.dtb<br>接下来需要对sd卡进行分区<br>新建的分区1用于存放镜像文件和设备树文件<br>剩余的大小用于存放rootfs  </p><h3 id="制作分区1"><a href="#制作分区1" class="headerlink" title="制作分区1"></a>制作分区1</h3><p>根据我的理解，对于sd卡来说 awboot会在  64 * 1024k  -  72 * 1024k引导kernel和dtb文件。<br><img src="/img/t113/sd_fs.png"></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gradle">fdisk <span class="hljs-regexp">/dev/</span>sdc<br>d<br>d<br>n<br>p<br>选分区时默认回车<br>第一个扇区：<span class="hljs-number">65536</span><br>Last sector, +<span class="hljs-regexp">/-sectors or +/</span>-<span class="hljs-keyword">size</span>&#123;K,M,G,T,P&#125; (<span class="hljs-number">65536</span>-<span class="hljs-number">30916607</span>, 默认 <span class="hljs-number">30916607</span>):   +<span class="hljs-number">51200</span>  增加<span class="hljs-number">25</span>M空间<br>w<br></code></pre></td></tr></table></figure><p>格式化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkfs.fat /dev/sdc1<br></code></pre></td></tr></table></figure><p>挂载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mount /dev/sdc1 /mnt/boot/<br></code></pre></td></tr></table></figure><p>复制</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo cp sun8i-t113-mangopi-dual.dtb zImage /mnt/boot/<br></code></pre></td></tr></table></figure><p>卸载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo umount /mnt/boot<br></code></pre></td></tr></table></figure><p><img src="/img/t113/boot.png"></p><h2 id="上电！！！-1"><a href="#上电！！！-1" class="headerlink" title="上电！！！"></a>上电！！！</h2><p>上电之后也是成功的进入了</p><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><code class="hljs log">[I] AWBoot r6166 starting...<br>[I] SMHC: sdhci0 controller v50310 initialized<br>[I] SHMC: SD card detected<br>[I] FATFS: read sun8i-t113-mangopi-dual.dtb addr=44000000<br>[I] FATFS: read zImage addr=44800000<br>[I] booting linux...<br>▒[    0.000000] Booting Linux on physical CPU 0x0<br>[    0.000000] Linux version 6.0.1-gd7d8c971c9c5-dirty (huerli@huerli) (arm-none-linux-gnueabihf-gcc (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 12.3.1 20230626, GNU ld (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 2.40.0.20230627) #5 SMP Thu Sep 28 20:52:53 CST 2023<br>[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d<br>[    0.000000] CPU: div instructions available: patching division code<br>[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache<br>[    0.000000] OF: fdt: Machine model: MangoPi MQ-Dual<br>[    0.000000] Memory policy: Data cache writealloc<br>[    0.000000] cma: Failed to reserve 72 MiB<br>[    0.000000] Zone ranges:<br>[    0.000000]   Normal   [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000]   HighMem  empty<br>[    0.000000] Movable zone start for each node<br>[    0.000000] Early memory node ranges<br>[    0.000000]   node   0: [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] percpu: Embedded 11 pages/cpu s15508 r8192 d21356 u45056<br>[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 32512<br>[    0.000000] Kernel command line: mem=128M cma=72M root=/dev/mmcblk0p2 init=/sbin/init rootwait console=tty0 console=ttyS5,115200<br>[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes, linear)<br>[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes, linear)<br>[    0.000000] mem auto-init: stack:all(zero), heap alloc:off, heap free:off<br>[    0.000000] Memory: 116232K/131072K available (8192K kernel code, 945K rwdata, 2120K rodata, 1024K init, 264K bss, 14840K reserved, 0K cma-reserved, 0K highmem)<br>[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1<br>[    0.000000] rcu: Hierarchical RCU implementation.<br>[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=8 to nr_cpu_ids=2.<br>[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.<br>[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2<br>[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16<br>[    0.000000] rcu: srcu_init: Setting srcu_struct sizes based on contention.<br>[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).<br>[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns<br>[    0.000001] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns<br>[    0.000012] Switching to timer-based delay loop, resolution 41ns<br>[    0.000184] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns<br>[    0.000679] Console: colour dummy device 80x30<br>[    0.000991] printk: console [tty0] enabled<br>[    0.001035] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=240000)<br>[    0.001068] pid_max: default: 32768 minimum: 301<br>[    0.001232] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001262] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001812] CPU: Testing write buffer coherency: ok<br>[    0.002134] /cpus/cpu@0 missing clock-frequency property<br>[    0.002188] /cpus/cpu@1 missing clock-frequency property<br>[    0.002210] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000<br>[    0.002967] Setting up static identity map for 0x40100000 - 0x40100060<br>[    0.003142] rcu: Hierarchical SRCU implementation.<br>[    0.003166] rcu:     Max phase no-delay instances is 1000.<br>[    0.003698] smp: Bringing up secondary CPUs ...<br>[    0.004399] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001<br>[    0.004521] smp: Brought up 1 node, 2 CPUs<br>[    0.004561] SMP: Total of 2 processors activated (96.00 BogoMIPS).<br>[    0.004577] CPU: All CPU(s) started in SVC mode.<br>[    0.005086] devtmpfs: initialized<br>[    0.009100] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5<br>[    0.009326] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns<br>[    0.009369] futex hash table entries: 512 (order: 3, 32768 bytes, linear)<br>[    0.009520] pinctrl core: initialized pinctrl subsystem<br>[    0.010829] NET: Registered PF_NETLINK/PF_ROUTE protocol family<br>[    0.011149] DMA: preallocated 256 KiB pool for atomic coherent allocations<br>[    0.011947] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;<br>[    0.012186] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.<br>[    0.012233] hw-breakpoint: maximum watchpoint size is 8 bytes.<br>[    0.020584] platform 5460000.tcon-top: Fixing up cyclic dependency with 5200000.mixer<br>[    0.020689] platform 5460000.tcon-top: Fixing up cyclic dependency with 5100000.mixer<br>[    0.020980] platform 5461000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.021350] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5604000.tv-encoder<br>[    0.021428] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.022190] platform 7090000.rtc: Fixing up cyclic dependency with 7010000.clock-controller<br>[    0.032009] SCSI subsystem initialized<br>[    0.032504] usbcore: registered new interface driver usbfs<br>[    0.032579] usbcore: registered new interface driver hub<br>[    0.032629] usbcore: registered new device driver usb<br>[    0.032842] mc: Linux media interface: v0.10<br>[    0.032904] videodev: Linux video capture interface: v2.00<br>[    0.032988] pps_core: LinuxPPS API ver. 1 registered<br>[    0.033004] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;\giometti@linux.it&gt;<br>[    0.033034] PTP clock support registered<br>[    0.033470] Advanced Linux Sound Architecture Driver Initialized.<br>[    0.034628] clocksource: Switched to clocksource arch_sys_counter<br>[    0.041879] NET: Registered PF_INET protocol family<br>[    0.042103] IP idents hash table entries: 2048 (order: 2, 16384 bytes, linear)<br>[    0.042660] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)<br>[    0.042706] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)<br>[    0.042732] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.042759] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)<br>[    0.042790] TCP: Hash tables configured (established 1024 bind 1024)<br>[    0.042881] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.042926] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.043095] NET: Registered PF_UNIX/PF_LOCAL protocol family<br>[    0.043753] RPC: Registered named UNIX socket transport module.<br>[    0.043793] RPC: Registered udp transport module.<br>[    0.043807] RPC: Registered tcp transport module.<br>[    0.043818] RPC: Registered tcp NFSv4.1 backchannel transport module.<br>[    0.045711] Initialise system trusted keyrings<br>[    0.046076] workingset: timestamp_bits=30 max_order=15 bucket_order=0<br>[    0.050828] NFS: Registering the id_resolver key type<br>[    0.050934] Key type id_resolver registered<br>[    0.050951] Key type id_legacy registered<br>[    0.050999] Key type asymmetric registered<br>[    0.051015] Asymmetric key parser &#x27;x509&#x27; registered<br>[    0.051148] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 246)<br>[    0.051176] io scheduler mq-deadline registered<br>[    0.051190] io scheduler kyber registered<br>[    0.108038] Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled<br>[    0.117427] CAN device driver interface<br>[    0.118150] ehci_hcd: USB 2.0 &#x27;Enhanced&#x27; Host Controller (EHCI) Driver<br>[    0.118178] ehci-platform: EHCI generic platform driver<br>[    0.118311] ohci_hcd: USB 1.1 &#x27;Open&#x27; Host Controller (OHCI) Driver<br>[    0.118347] ohci-platform: OHCI generic platform driver<br>[    0.120882] sun6i-rtc 7090000.rtc: registered as rtc0<br>[    0.121033] sun6i-rtc 7090000.rtc: setting system clock to 1970-01-02T00:00:18 UTC (86418)<br>[    0.121178] sun6i-rtc 7090000.rtc: RTC enabled<br>[    0.121518] i2c_dev: i2c /dev entries driver<br>[    0.123274] sunxi-wdt 20500a0.watchdog: Watchdog enabled (timeout=16 sec, nowayout=0)<br>[    0.124426] sun8i-ce 3040000.crypto: Set mod clock to 300000000 (300 Mhz) from 400000000 (400 Mhz)<br>[    0.124813] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125005] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125164] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125331] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125437] sun8i-ce 3040000.crypto: Register cbc(aes)<br>[    0.125472] sun8i-ce 3040000.crypto: Register ecb(aes)<br>[    0.125491] sun8i-ce 3040000.crypto: Register cbc(des3_ede)<br>[    0.125511] sun8i-ce 3040000.crypto: Register ecb(des3_ede)<br>[    0.125549] sun8i-ce 3040000.crypto: CryptoEngine Die ID 0<br>[    0.126378] usbcore: registered new interface driver usbhid<br>[    0.126407] usbhid: USB HID core driver<br>[    0.129011] NET: Registered PF_PACKET protocol family<br>[    0.129067] can: controller area network core<br>[    0.129153] NET: Registered PF_CAN protocol family<br>[    0.129175] can: raw protocol<br>[    0.129191] can: broadcast manager protocol<br>[    0.129209] can: netlink gateway - max_hops=1<br>[    0.129394] Key type dns_resolver registered<br>[    0.129501] Registering SWP/SWPB emulation handler<br>[    0.129614] Loading compiled-in X.509 certificates<br>[    0.147437] sun20i-d1-pinctrl 2000000.pinctrl: initialized sunXi PIO driver<br>[    0.169059] 2500400.serial: ttyS1 at MMIO 0x2500400 (irq = 231, base_baud = 1500000) is a 16550A<br>[    0.190724] 2501400.serial: ttyS5 at MMIO 0x2501400 (irq = 232, base_baud = 1500000) is a 16550A<br>[    1.048961] printk: console [ttyS5] enabled<br>[    1.055271] phy phy-4100400.phy.0: Changing dr_mode to 1<br>[    1.056359] usb_phy_generic usb_phy_generic.1.auto: dummy supplies not allowed for exclusive requests<br>[    1.060608] ehci-platform 4101000.usb: EHCI Host Controller<br>[    1.070368] musb-hdrc musb-hdrc.2.auto: MUSB HDRC host driver<br>[    1.075439] ehci-platform 4101000.usb: new USB bus registered, assigned bus number 1<br>[    1.081176] musb-hdrc musb-hdrc.2.auto: new USB bus registered, assigned bus number 2<br>[    1.089004] ehci-platform 4101000.usb: irq 233, io mem 0x04101000<br>[    1.097502] hub 2-0:1.0: USB hub found<br>[    1.106750] hub 2-0:1.0: 1 port detected<br>[    1.107503] ehci-platform 4200000.usb: EHCI Host Controller<br>[    1.116343] ehci-platform 4200000.usb: new USB bus registered, assigned bus number 3<br>[    1.124218] ehci-platform 4200000.usb: irq 235, io mem 0x04200000<br>[    1.126365] ohci-platform 4200400.usb: Generic Platform OHCI controller<br>[    1.130431] ehci-platform 4101000.usb: USB 2.0 started, EHCI 1.00<br>[    1.136984] ohci-platform 4200400.usb: new USB bus registered, assigned bus number 4<br>[    1.150974] ohci-platform 4200400.usb: irq 237, io mem 0x04200400<br>[    1.151226] hub 1-0:1.0: USB hub found<br>[    1.161048] hub 1-0:1.0: 1 port detected<br>[    1.164790] sunxi-mmc 4020000.mmc: Got CD GPIO<br>[    1.165142] ehci-platform 4200000.usb: USB 2.0 started, EHCI 1.00<br>[    1.177028] cfg80211: Loading compiled-in X.509 certificates for regulatory database<br>[    1.182458] sunxi-mmc 4021000.mmc: allocated mmc-pwrseq<br>[    1.186115] hub 3-0:1.0: USB hub found<br>[    1.194106] hub 3-0:1.0: 1 port detected<br>[    1.194882] sunxi-mmc 4020000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.200749] cfg80211: Loaded X.509 cert &#x27;sforshee: 00b28ddf47aef9cea7&#x27;<br>[    1.213739] ALSA device list:<br>[    1.216772]   No soundcards found.<br>[    1.218102] sunxi-mmc 4021000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.220365] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2<br>[    1.237787] cfg80211: failed to load regulatory.db<br>[    1.238175] hub 4-0:1.0: USB hub found<br>[    1.246684] hub 4-0:1.0: 1 port detected<br>[    1.256235] sunxi-mmc 4021000.mmc: card claims to support voltages below defined range<br>[    1.283924] mmc1: new high speed SDIO card at address 0001<br>[    1.306650] mmc0: Problem switching card into high-speed mode!<br>[    1.312623] mmc0: new SDHC card at address 0001<br>[    1.317390] ohci-platform 4101400.usb: Generic Platform OHCI controller<br>[    1.324053] ohci-platform 4101400.usb: new USB bus registered, assigned bus number 5<br>[    1.331957] ohci-platform 4101400.usb: irq 236, io mem 0x04101400<br>[    1.338640] mmcblk0: mmc0:0001 USD00 14.7 GiB<br>[    1.345900]  mmcblk0: p1<br>[    1.409380] hub 5-0:1.0: USB hub found<br>[    1.413198] hub 5-0:1.0: 1 port detected<br>[    1.418317] /dev/root: Can&#x27;t open blockdev<br>[    1.422458] VFS: Cannot open root device &quot;mmcblk0p2&quot; or unknown-block(179,2): error -6<br>[    1.430418] Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br>[    1.438804] b300        15458304 mmcblk0<br>[    1.438813]  driver: mmcblk<br>[    1.445633]   b301           25600 mmcblk0p1 3916d12b-01<br>[    1.445641]<br>[    1.452450] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(179,2)<br>[    1.460892] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 6.0.1-gd7d8c971c9c5-dirty #5<br>[    1.468466] Hardware name: Generic DT based system<br>[    1.473266]  unwind_backtrace from show_stack+0x10/0x14<br>[    1.478513]  show_stack from dump_stack_lvl+0x40/0x4c<br>[    1.483579]  dump_stack_lvl from panic+0x108/0x2fc<br>[    1.488383]  panic from mount_block_root+0x174/0x20c<br>[    1.493363]  mount_block_root from prepare_namespace+0x150/0x18c<br>[    1.499381]  prepare_namespace from kernel_init+0x18/0x12c<br>[    1.504881]  kernel_init from ret_from_fork+0x14/0x2c<br>[    1.509943] Exception stack(0xc8815fb0 to 0xc8815ff8)<br>[    1.515001] 5fa0:                                     00000000 00000000 00000000 00000000<br>[    1.523182] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br>[    1.531362] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000<br>[    1.537982] CPU1: stopping<br>[    1.540692] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 6.0.1-gd7d8c971c9c5-dirty #5<br>[    1.548255] Hardware name: Generic DT based system<br>[    1.553041]  unwind_backtrace from show_stack+0x10/0x14<br>[    1.558269]  show_stack from dump_stack_lvl+0x40/0x4c<br>[    1.563319]  dump_stack_lvl from do_handle_IPI+0xec/0x124<br>[    1.568719]  do_handle_IPI from ipi_handler+0x18/0x20<br>[    1.573771]  ipi_handler from handle_percpu_devid_irq+0x78/0x134<br>[    1.579779]  handle_percpu_devid_irq from generic_handle_domain_irq+0x28/0x38<br>[    1.586915]  generic_handle_domain_irq from gic_handle_irq+0x74/0x88<br>[    1.593275]  gic_handle_irq from generic_handle_arch_irq+0x34/0x44<br>[    1.599457]  generic_handle_arch_irq from call_with_stack+0x18/0x20<br>[    1.605729]  call_with_stack from __irq_svc+0x98/0xb0<br>[    1.610782] Exception stack(0xc8849f68 to 0xc8849fb0)<br>[    1.615830] 9f60:                   00000005 00000000 00001919 c0116080 00000001 c0d04f0c<br>[    1.623999] 9f80: c104ee80 c0d04f54 4000406a 410fc075 00000000 00000000 c0d03d80 c8849fb8<br>[    1.632165] 9fa0: c0107410 c0107414 60000013 ffffffff<br>[    1.637210]  __irq_svc from arch_cpu_idle+0x38/0x3c<br>[    1.642091]  arch_cpu_idle from default_idle_call+0x24/0x34<br>[    1.647665]  default_idle_call from do_idle+0xa4/0x120<br>[    1.652804]  do_idle from cpu_startup_entry+0x18/0x1c<br>[    1.657855]  cpu_startup_entry from secondary_start_kernel+0x118/0x120<br>[    1.664380]  secondary_start_kernel from 0x401015a0<br>[    1.669459] ---[ end Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(179,2) ]---  <br></code></pre></td></tr></table></figure></code></pre></details><h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><h3 id="不格式化就复制会报错"><a href="#不格式化就复制会报错" class="headerlink" title="不格式化就复制会报错"></a>不格式化就复制会报错</h3><p>huerli@huerli:~&#x2F;t113&#x2F;linux_kernel_t113$ sudo mount &#x2F;dev&#x2F;sdc1 &#x2F;mnt&#x2F;boot&#x2F;<br>mount: &#x2F;mnt&#x2F;boot: wrong fs type, bad option, bad superblock on &#x2F;dev&#x2F;sdc1, missing codepage or helper program, or other error.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkfs.fat /dev/sdc1<br></code></pre></td></tr></table></figure><h3 id="空间不够报错"><a href="#空间不够报错" class="headerlink" title="空间不够报错"></a>空间不够报错</h3><p>重新回到制作分区步骤</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">huerli<span class="hljs-variable">@huerli</span><span class="hljs-symbol">:~/t113/output</span><span class="hljs-variable">$ </span>sudo cp sun8i-t113-mangopi-dual.dtb zImage /mnt/boot/<br><span class="hljs-symbol">cp:</span> 写入 <span class="hljs-string">&#x27;/mnt/boot/zImage&#x27;</span> 出错: 设备上没有空间<br></code></pre></td></tr></table></figure><h1 id="编译buildroot"><a href="#编译buildroot" class="headerlink" title="编译buildroot"></a>编译buildroot</h1><h2 id="下拉buildroot"><a href="#下拉buildroot" class="headerlink" title="下拉buildroot"></a>下拉buildroot</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">- wget https://buildroot.org/downloads/buildroot-2023.08.tar.gz<br>- tar -zxf buildroot-2023.08.tar.gz<br>- cd buildroot<br>- make menuconfig<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># 配置 Target <span class="hljs-keyword">options</span><br>&gt; Target <span class="hljs-keyword">options</span><br>Target Architecture (arm (little endian))  <span class="hljs-comment">---&gt;</span><br>Target Binary Format (ELF)  <span class="hljs-comment">---&gt; </span><br>Target Architecture Variant (cortex-A7)  <span class="hljs-comment">---&gt;</span><br>Floating <span class="hljs-type">point</span> strategy (VFPv4)  <span class="hljs-comment">---&gt; </span><br></code></pre></td></tr></table></figure><p><img src="/img/t113/toolchain_options.png"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># 配置 Toolchain<br>&gt; Toolchain<br>Toolchain <span class="hljs-keyword">type</span> (<span class="hljs-keyword">External</span> toolchain)  <span class="hljs-comment">---&gt;</span><br>Toolchain (Custom toolchain)  <span class="hljs-comment">---&gt; </span><br>Toolchain origin (Pre-installed toolchain)  <span class="hljs-comment">---&gt;</span><br>(/home/huerli/t113/arm-<span class="hljs-keyword">none</span>-linux-gnueabihf/bin) Toolchain path<br>(arm-<span class="hljs-keyword">none</span>-linux-gnueabihf) Toolchain prefix  //需要按住shift才能删减<br><span class="hljs-keyword">External</span> toolchain gcc version (<span class="hljs-number">12.</span>x)  <span class="hljs-comment">---&gt;</span><br><span class="hljs-keyword">External</span> toolchain kernel headers series (<span class="hljs-number">4.20</span>.x)  <span class="hljs-comment">---&gt; //查看补充</span><br>[*] Toolchain has SSP support? (<span class="hljs-built_in">NEW</span>)<br>[*] Toolchain has C++ support? <br>[*] <span class="hljs-keyword">Enable</span> MMU support (<span class="hljs-built_in">NEW</span>)<br></code></pre></td></tr></table></figure><p><img src="/img/t113/toolchain.png"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 配置 Filesystem images</span><br>-&gt; Filesystem images<br>-&gt; [*] ext2<span class="hljs-regexp">/3/</span><span class="hljs-number">4</span> root filesystem <span class="hljs-regexp">//</span>如果是 EMMC 或 SD 卡的话就用 ext3/ext4<br>-&gt; ext2<span class="hljs-regexp">/3/</span><span class="hljs-number">4</span> variant = ext4     <span class="hljs-regexp">//</span>选择 ext4 格式<br>-&gt; exact size =<span class="hljs-number">16</span>G         <span class="hljs-regexp">//</span>ext4 格式根文件系统 <span class="hljs-number">1</span>GB(根据实际情况修改)<br>-&gt; [*] ubi image containing an ubifs root filesystem <span class="hljs-regexp">//</span>如果使用 NAND 的话就用 ubifs<br></code></pre></td></tr></table></figure><p><img src="/img/t113/system_config.png"></p><h2 id="编译-1"><a href="#编译-1" class="headerlink" title="编译"></a>编译</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">make</span> -j8<br></code></pre></td></tr></table></figure><h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkfs.ext4 /dev/sdc2<br></code></pre></td></tr></table></figure><h1 id="设备树"><a href="#设备树" class="headerlink" title="设备树"></a>设备树</h1><p><img src="/img/t113/dts.png"></p><h2 id="linux设备树中DTS、-DTC和DTB的关系"><a href="#linux设备树中DTS、-DTC和DTB的关系" class="headerlink" title="linux设备树中DTS、 DTC和DTB的关系"></a>linux设备树中DTS、 DTC和DTB的关系</h2><ul><li>DTS：.dts文件是设备树的源文件。由于一个SoC可能对应多个设备，这些.dst文件可能包含很多共同的部分，共同的部分一般被提炼为一个 .dtsi 文件，这个文件相当于C语言的头文件。</li><li>DTC：DTC是将.dts编译为.dtb的工具，相当于gcc。</li><li>DTB：.dtb文件是 .dts 被 DTC 编译后的二进制格式的设备树文件，它可以被linux内核解析。</li></ul><h2 id="DTS语法"><a href="#DTS语法" class="headerlink" title="DTS语法"></a>DTS语法</h2><p>和 C 语言一样，设备树也支持头文件，设备树的头文件扩展名为 .dtsi；同时也可以像C 语言一样包含 .h头文件；例如：<br>sun8i-t113.dtsi</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/clock/sun6i-rtc.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/clock/sun8i-de2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/clock/sun8i-tcon-top.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/clock/sun20i-d1-ccu.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/clock/sun20i-d1-r-ccu.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/interrupt-controller/arm-gic.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/reset/sun8i-de2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/reset/sun20i-d1-ccu.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/reset/sun20i-d1-r-ccu.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/thermal/thermal.h&gt;</span></span><br></code></pre></td></tr></table></figure><p>sun8i-t113-mangopi-dual.dts</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/gpio/gpio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dt-bindings/leds/common.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sun8i-t113.dtsi&quot;</span></span><br></code></pre></td></tr></table></figure><h2 id="设备节点"><a href="#设备节点" class="headerlink" title="设备节点"></a>设备节点</h2><p>在设备树中节点命名格式如下：<br>[label:]node-name[@unit-address]<br>node-name：是设备节点的名称，为ASCII字符串， 节点名字应该能够清晰的描述出节点的功能，<br>比如“uart1”就表示这个节点是UART1外设；<br>unit-address：一般表示设备的地址或寄存器首地址，如果某个节点没有地址或者寄存器的话<br>“unit-address” 可以不要；注：根节点没有node-name 或者 unit-address，它被定义为 &#x2F;。<br>label:一般表示为标签，通过标签可以更好的管理节点。<br>设备节点的例子如下图：<br><img src="/img/t113/dts.png"></p><h3 id="设备节点的标准属性"><a href="#设备节点的标准属性" class="headerlink" title="设备节点的标准属性"></a>设备节点的标准属性</h3><h4 id="compatible-属性"><a href="#compatible-属性" class="headerlink" title="compatible 属性"></a>compatible 属性</h4><p>compatible 属性也叫做 “兼容性” 属性，这是非常重要的一个属性！<br>compatible 属性的值是一个字符串列表， compatible 属性用于将设备和驱动绑定起来。<br>字符串列表用于选择设备所要使用的驱动程序。compatible 属性值的推荐格式：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;manufacturer,model&quot;</span><br></code></pre></td></tr></table></figure><ul><li>manufacturer : 表示厂商；</li><li>model : 一般是模块对应的驱动名字。<br>例如：<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">compatible</span> = <span class="hljs-string">&quot;allwinner,sun20i-d1&quot;</span>, <span class="hljs-string">&quot;allwinner,sun8i&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>上面的compatible有两个属性，分别是 “allwinner,sun20i-d1” 和 “allwinner,sun8i”；其中 “allwinner,sun20i-d1” 的厂商是 全志；<br>设备首先会使用第一个属性值在 Linux 内核里面查找，看看能不能找到与之匹配的驱动文件；<br>如果没找到，就使用第二个属性值查找，以此类推，直到查到到对应的驱动程序 或者 查找完整个 Linux 内核也没有对应的驱动程序为止。<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang">注：一般驱动程序文件都会有一个 OF 匹配表，此 OF 匹配表保存着一些 compatible 值，如果设备节点的 compatible 属性值和 OF 匹配表中的任何一个值相等,那么就表示设备可以使用这个驱动.<br></code></pre></td></tr></table></figure></li></ul><h4 id="model-属性"><a href="#model-属性" class="headerlink" title="model 属性"></a>model 属性</h4><p>model 属性值也是一个字符串，一般 model 属性描述设备模块信息，比如名字什么的，例如：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">model</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;MangoPi MQ-Dual&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="phandle-属性"><a href="#phandle-属性" class="headerlink" title="phandle 属性"></a>phandle 属性</h4><p>phandle属性为devicetree中唯一的节点指定一个数字标识符，节点中的phandle属性，它的取值必须是唯一的(不要跟其他的phandle值一样)，例如：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-symbol">pic@</span><span class="hljs-number">10000000</span> &#123;<br>    phandle = &lt;<span class="hljs-number">1</span>&gt;;<br>    <span class="hljs-built_in">int</span>errupt-controller;<br>&#125;;<br>another-device-node &#123;<br>    <span class="hljs-built_in">int</span>errupt-parent = &lt;<span class="hljs-number">1</span>&gt;;   <span class="hljs-comment">// 使用phandle值为1来引用上述节点</span><br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>注：DTS中的大多数设备树将不包含显式的phandle属性，当DTS被编译成二进制DTB格式时，DTC工具会自动插入phandle属性。<br></code></pre></td></tr></table></figure><h4 id="status-属性"><a href="#status-属性" class="headerlink" title="status 属性"></a>status 属性</h4><p>status 属性看名字就知道是和设备状态有关的， status 属性值也是字符串，字符串是设备的状态信息，可选的状态如下表所示：</p><table><thead><tr><th>status</th><th>描述</th></tr></thead><tbody><tr><td>okay</td><td>使能</td></tr><tr><td>disabled</td><td>失能</td></tr><tr><td>在dtsi文件中，status一般都是disabled</td><td></td></tr><tr><td>在dts文件中选择打开还是默认dtsi中的状态</td><td></td></tr></tbody></table><h4 id="address-cells-和-size-cells"><a href="#address-cells-和-size-cells" class="headerlink" title="#address-cells 和 #size-cells"></a>#address-cells 和 #size-cells</h4><p>#address-cells 和 #size-cells的值都是无符号 32 位整型，可以用在任何拥有子节点的设备中，用于描述子节点的地址信息。<br>#address-cells 属性值决定了子节点 reg 属性中地址信息所占用的字长(32 位)，<br>#size-cells 属性值决定了子节点 reg 属性中长度信息所占的字长(32 位)。<br>#address-cells 和 #size-cells 表明了子节点应该如何编写 reg 属性值，一般 reg 属性都是和地址有关的内容，和地址相关的信息有两种：<br>起始地址和地址长度，reg 属性的格式一为：  </p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">reg = &lt;address<span class="hljs-number">1</span> <span class="hljs-keyword">le</span><span class="hljs-symbol">ngth1</span> address<span class="hljs-number">2</span> <span class="hljs-keyword">le</span><span class="hljs-symbol">ngth2</span> address<span class="hljs-number">3</span> <span class="hljs-keyword">le</span><span class="hljs-symbol">ngth3</span>……&gt;<br></code></pre></td></tr></table></figure><p>例如一个64位的处理器：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">soc &#123;<br>    <span class="hljs-meta">#address-cells = <span class="hljs-string">&lt;2&gt;</span>;</span><br>    <span class="hljs-meta">#size-cells = <span class="hljs-string">&lt;1&gt;</span>;</span><br>    serial &#123;<br>        compatible = <span class="hljs-string">&quot;xxx&quot;</span>;<br>        reg = &lt;<span class="hljs-number">0x4600</span> <span class="hljs-number">0x5000</span> <span class="hljs-number">0x100</span>&gt;;  <span class="hljs-comment">/*地址信息是：0x00004600 00005000,长度信息是：0x100*/</span><br>        &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="reg-属性"><a href="#reg-属性" class="headerlink" title="reg 属性"></a>reg 属性</h4><p>reg 属性的值一般是 (address， length) 对，reg 属性一般用于描述设备地址空间资源信息，一般都是某个外设的寄存器地址范围信息。<br>例如：一个设备有两个寄存器块，一个的地址是0x3000，占据32字节；另一个的地址是0xFE00，占据256字节，表示如下：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">reg</span> = &lt;<span class="hljs-number">0</span>x3000 <span class="hljs-number">0</span>x20 <span class="hljs-number">0</span>xFE00 <span class="hljs-number">0</span>x100&gt;;<br></code></pre></td></tr></table></figure><h4 id="ranges-属性"><a href="#ranges-属性" class="headerlink" title="ranges 属性"></a>ranges 属性</h4><p>ranges属性值可以为空或者按照 (child-bus-address,parent-bus-address,length) 格式编写的数字矩阵，<br>ranges 是一个地址映射&#x2F;转换表，ranges 属性每个项目由子地址、父地址和地址空间长度这三部分组成：<br>child-bus-address：子总线地址空间的物理地址，由父节点的 #address-cells 确定此物理地址所占用的字长。<br>parent-bus-address：父总线地址空间的物理地址，同样由父节点的 #address-cells 确定此物理地址所占用的字长。<br>length：子地址空间的长度，由父节点的 #size-cells 确定此地址长度所占用的字长。  </p><h4 id="name-属性"><a href="#name-属性" class="headerlink" title="name 属性"></a>name 属性</h4><p>name 属性值为字符串， name 属性用于记录节点名字， name 属性已经被弃用，<br>不推荐使用name 属性，一些老的设备树文件可能会使用此属性。</p><h4 id="device-type-属性"><a href="#device-type-属性" class="headerlink" title="device_type 属性"></a>device_type 属性</h4><p>device_type 属性值为字符串， IEEE 1275 会用到此属性，<br>用于描述设备的 FCode，但是设备树没有 FCode，所以此属性也被抛弃了。<br>此属性只能用于 cpu 节点或者 memory 节点。</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">cpus &#123;<br>      enable-method = <span class="hljs-string">&quot;allwinner,sun8iw20p1&quot;</span>;<br>      <span class="hljs-comment">#address-cells = &lt;1&gt;;</span><br>      <span class="hljs-comment">#size-cells = &lt;0&gt;;</span><br><br>      cpu0: cpu<span class="hljs-meta">@0</span> &#123;<br>              device_type = <span class="hljs-string">&quot;cpu&quot;</span>;<br>              compatible = <span class="hljs-string">&quot;arm,cortex-a7&quot;</span>,<span class="hljs-string">&quot;arm,armv7&quot;</span>;<br>              reg = <span class="hljs-variable">&lt;0x0&gt;</span>;<br>              clocks = <span class="hljs-variable">&lt;&amp;ccu CLK_CPUX&gt;</span>;<br>      &#125;;<br><br>      cpu1: cpu<span class="hljs-meta">@1</span> &#123;<br>              device_type = <span class="hljs-string">&quot;cpu&quot;</span>;<br>              compatible = <span class="hljs-string">&quot;arm,cortex-a7&quot;</span>,<span class="hljs-string">&quot;arm,armv7&quot;</span>;<br>              reg = <span class="hljs-variable">&lt;0x1&gt;</span>;<br>              clocks = <span class="hljs-variable">&lt;&amp;ccu CLK_CPUX&gt;</span>;<br>      &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="根节点"><a href="#根节点" class="headerlink" title="根节点"></a>根节点</h3><h3 id="特殊节点"><a href="#特殊节点" class="headerlink" title="特殊节点"></a>特殊节点</h3><h4 id="x2F-aliases-子节点"><a href="#x2F-aliases-子节点" class="headerlink" title="&#x2F;aliases 子节点"></a>&#x2F;aliases 子节点</h4><p>aliases 节点的主要功能就是定义别名，定义别名的目的就是为了方便访问节点。<br>ethernet0 是rtl8189fs的别名，mmc0是mmc0的别名，serial1是uart1的别名……</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-title class_">aliases</span> <span class="hljs-punctuation">&#123;</span><br>ethernet0 = <span class="hljs-variable">&amp;rtl8189fs</span><span class="hljs-punctuation">;</span><br>mmc0 = <span class="hljs-variable">&amp;mmc0</span><span class="hljs-punctuation">;</span><br>serial1 = <span class="hljs-variable">&amp;uart1</span><span class="hljs-punctuation">;</span><br>serial5 = <span class="hljs-variable">&amp;uart5</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;;</span><br></code></pre></td></tr></table></figure><h4 id="x2F-memory-子节点"><a href="#x2F-memory-子节点" class="headerlink" title="&#x2F;memory 子节点"></a>&#x2F;memory 子节点</h4><p>所有设备树都需要一个memory设备节点，它描述了系统的物理内存布局。<br>如果系统有多个内存块，可以创建多个memory节点，或者可以在单个memory节点的reg属性中指定这些地址范围和内存空间大小。  </p><p>例如：一个64位的系统有两块内存空间：<br>RAM1：起始地址是0x0，地址空间是 0x80000000；<br>RAM2：起始地址是0x10000000，地址空间也是0x80000000；<br>同时根节点下的 #address-cells &#x3D; &lt;2&gt;和#size-cells &#x3D; &lt;2&gt;，这个memory节点描述为：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">memory@<span class="hljs-number">0</span> &#123;<br>    device_type = &quot;memory&quot;<span class="hljs-comment">;</span><br>    reg = &lt;<span class="hljs-number">0x00000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x80000000</span><br>           <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x10000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x80000000</span>&gt;<span class="hljs-comment">;</span><br>&#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dns">memory@<span class="hljs-number">0</span> &#123;<br>    device_type = &quot;memory&quot;<span class="hljs-comment">;</span><br>    reg = &lt;<span class="hljs-number">0x00000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x80000000</span>&gt;<span class="hljs-comment">;</span><br>&#125;<span class="hljs-comment">;</span><br>memory@<span class="hljs-number">10000000</span> &#123;<br>    device_type = &quot;memory&quot;<span class="hljs-comment">;</span><br>    reg = &lt;<span class="hljs-number">0x00000000</span> <span class="hljs-number">0x10000000</span> <span class="hljs-number">0x00000000</span> <span class="hljs-number">0x80000000</span>&gt;<span class="hljs-comment">;</span><br>&#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="x2F-chosen-子节点"><a href="#x2F-chosen-子节点" class="headerlink" title="&#x2F;chosen 子节点"></a>&#x2F;chosen 子节点</h4><p>chosen 并不是一个真实的设备， chosen 节点主要是为了 uboot 向 Linux 内核传递数据，重点是 bootargs 参数。例如：  </p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">chosen &#123;<br>stdout-path <span class="hljs-operator">=</span> <span class="hljs-string">&quot;serial5:115200n8&quot;</span><span class="hljs-comment">;</span><br>bootargs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;mem=128M cma=72M root=/dev/mmcblk0p2 init=/sbin/init rootwait console=tty0 console=ttyS5,115200&quot;</span><span class="hljs-comment">;</span><br>&#125;<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="x2F-cpus-和-x2F-cpus-x2F-cpu-子节点"><a href="#x2F-cpus-和-x2F-cpus-x2F-cpu-子节点" class="headerlink" title="&#x2F;cpus 和 &#x2F;cpus&#x2F;cpu* 子节点"></a>&#x2F;cpus 和 &#x2F;cpus&#x2F;cpu* 子节点</h4><p>cpus节点下有1个或多个cpu子节点, cpu子节点中用reg属性用来标明自己是哪一个cpu，所以 &#x2F;cpus 中有以下2个属性:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#address-cells   <span class="hljs-comment">// 在它的子节点的reg属性中, 使用多少个u32整数来描述地址(address)</span></span><br><br><span class="hljs-meta">#size-cells      <span class="hljs-comment">// 在它的子节点的reg属性中, 使用多少个u32整数来描述大小(size)</span></span><br>                 <span class="hljs-comment">// 必须设置为0</span><br></code></pre></td></tr></table></figure><h1 id="驱动"><a href="#驱动" class="headerlink" title="驱动"></a>驱动</h1><h2 id="编译wifi驱动"><a href="#编译wifi驱动" class="headerlink" title="编译wifi驱动"></a>编译wifi驱动</h2><h3 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h3><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs elm">- make menuconfig<br>   &gt;<span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span><br><span class="hljs-type">Network</span> device sup<span class="hljs-keyword">port</span><br>   <span class="hljs-type">Wireless</span> <span class="hljs-type">LAN</span><br>   [*]   <span class="hljs-type">Realtek</span> devices<br>   &lt;<span class="hljs-type">M</span>&gt;     <span class="hljs-type">Realtek</span> <span class="hljs-number">8189</span>F <span class="hljs-type">SDIO</span> <span class="hljs-type">WiFi</span><br>   &gt;<span class="hljs-type">Networking</span> sup<span class="hljs-keyword">port</span><br>   &lt;*&gt;   <span class="hljs-type">RF</span> switch subsystem sup<span class="hljs-keyword">port</span>  <span class="hljs-comment">----</span><br>   &lt;y&gt;   <span class="hljs-type">GPIO</span> <span class="hljs-type">RFKILL</span> driver<br>   &gt;<span class="hljs-type">Networking</span> sup<span class="hljs-keyword">port</span><br>   &gt;<span class="hljs-type">Wireless</span><br>   &lt;*&gt;   cfg80211 - wireless configuration <span class="hljs-type">API</span><br></code></pre></td></tr></table></figure><h3 id="buildroot"><a href="#buildroot" class="headerlink" title="buildroot"></a>buildroot</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">Target</span> <span class="hljs-selector-tag">packages</span> <br>        &gt; <span class="hljs-selector-tag">Networking</span> <span class="hljs-selector-tag">applications</span><br>              <span class="hljs-selector-attr">[*]</span> <span class="hljs-selector-tag">vsftpd</span> <span class="hljs-comment">//使能 vsftpd</span><br>              <span class="hljs-selector-attr">[*]</span> <span class="hljs-selector-tag">openssh</span><span class="hljs-comment">// 使能远程 ssh</span><br>              <span class="hljs-selector-attr">[*]</span> <span class="hljs-selector-tag">wpa_supplicant</span>  <span class="hljs-selector-tag">---</span>&gt;<span class="hljs-comment">// 使能 wpa 用于WiFi控制</span><br>                  <span class="hljs-selector-attr">[*]</span>   <span class="hljs-selector-tag">Install</span> <span class="hljs-selector-tag">wpa_cli</span> <span class="hljs-selector-tag">binary</span><br><br>&gt; <span class="hljs-selector-tag">System</span> <span class="hljs-selector-tag">tools</span><br>&gt; <span class="hljs-selector-attr">[*]</span> <span class="hljs-selector-tag">kmod</span> <span class="hljs-comment">//使能内核模块相关命令</span><br>&gt; <span class="hljs-selector-attr">[*]</span> <span class="hljs-selector-tag">htop</span><br></code></pre></td></tr></table></figure><h3 id="busybox"><a href="#busybox" class="headerlink" title="busybox"></a>busybox</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">- sudo make busybox-menuconfig<br></code></pre></td></tr></table></figure><h4 id="busybox-中文字符支持"><a href="#busybox-中文字符支持" class="headerlink" title="busybox 中文字符支持"></a>busybox 中文字符支持</h4><h4 id="depmod"><a href="#depmod" class="headerlink" title="depmod"></a>depmod</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">-&gt; Linux Module Utilities<br>          -&gt; [*] depmod <span class="hljs-comment">//使能 depmod 命令</span><br></code></pre></td></tr></table></figure><p><img src="/img/t113/busybox.png"></p><h4 id="编译-2"><a href="#编译-2" class="headerlink" title="编译"></a>编译</h4><p>配置好以后就可以重新编译 buildroot 下的 busybox，进入到 buildroot 源码目录下，输入如<br>下命令查看当前 buildroot 所有配置了的目标软件包，也就是 packages：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make show-targets<br></code></pre></td></tr></table></figure><p><img src="/img/t113/busybox_target.png" alt="busybox_target"><br>中列出了当前 buildroot 中所有使能了的 packages 包，其中就包括 busybox，如<br>果我们想单独编译并安装 busybox 的话执行下面命令即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make busybox<br></code></pre></td></tr></table></figure><p>上述命令就会重新编译 busybox。编译完成以后重新编译 buildroot，主要是对其进行打包，<br>输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make j12<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi /etc/wpa_supplicant<br></code></pre></td></tr></table></figure><p>自己的wifi账号密码，可以添加多个如下所示。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs text">#ctrl_interface=/var/run/wpa_supplicant<br>ap_scan=1<br><br>network=&#123;<br>        ssid=&quot;dap&quot;<br>        psk=&quot;2556892336&quot;<br>&#125;<br>network=&#123;<br>        ssid=&quot;DAP&quot;<br>        psk=&quot;12345678&quot;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="开机自动连接wifi"><a href="#开机自动连接wifi" class="headerlink" title="开机自动连接wifi"></a>开机自动连接wifi</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi /etc/init.d/S45wifi<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># wlan0        Starts WiFi.</span><br><span class="hljs-comment">#</span><br><br>start() &#123;<br>      printf <span class="hljs-string">&quot;Starting WiFi: &quot;</span><br>      ifconfig wlan0 up<br>      wpa_supplicant -Dnl80211 -iwlan0 -c<span class="hljs-regexp">/etc/</span>wpa_supplicant.conf -B<br>      udhcpc -i wlan0<br>      echo <span class="hljs-string">&quot;OK&quot;</span><br>&#125;<br>stop() &#123;<br>      printf <span class="hljs-string">&quot;Stopping WiFi: &quot;</span><br>      killall udhcpc<br>      killall wpa_supplicant<br>      echo <span class="hljs-string">&quot;OK&quot;</span><br>&#125;<br>restart() &#123;<br>      stop<br>      start<br>&#125;<br><br>case <span class="hljs-string">&quot;$1&quot;</span> <span class="hljs-keyword">in</span><br>      start)<br>      start<br>      ;;<br>stop)<br>      stop<br>;;<br>restart|reload)<br>      restart<br>      ;;<br>*)<br>echo <span class="hljs-string">&quot;Usage: $0 &#123;start|stop|restart&#125;&quot;</span><br><span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>esac<br><br><span class="hljs-keyword">exit</span> $?<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod +x /etc/init.d/S45wifi<br></code></pre></td></tr></table></figure><h3 id="vsftp"><a href="#vsftp" class="headerlink" title="vsftp"></a>vsftp</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/vsftp.conf<br></code></pre></td></tr></table></figure><p>将这两项的前面注释去了<code>local_enable=YES</code> <code>write_enable=YES</code><br><img src="/img/t113/vsftp.png"></p><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">PermitRootLogin yes    <span class="hljs-regexp">//</span>修改<br>AllowUsers root        <span class="hljs-regexp">//</span>添加<br></code></pre></td></tr></table></figure><p><img src="/img/t113/ssh.png"></p><h4 id="重启-sshd-服务"><a href="#重启-sshd-服务" class="headerlink" title="重启 sshd 服务"></a>重启 sshd 服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">/etc/init.d/S50sshd restart<br></code></pre></td></tr></table></figure><h4 id="设置-root-密码"><a href="#设置-root-密码" class="headerlink" title="设置 root 密码"></a>设置 root 密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">passwd root<br></code></pre></td></tr></table></figure><h3 id="报错-1"><a href="#报错-1" class="headerlink" title="报错"></a>报错</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo make  INSTALL_MOD_PATH=/mnt/rootfs/ modules modules_install<br></code></pre></td></tr></table></figure><p><img src="/img/t113/make_modules_err.png"><br>出现了一个错误，在make前加sudo又提示找不到compile，但是不加sudo又没有权限添加到挂载的目录。<br>直接就是说另辟蹊径，先放到不需要加权限的位置，在通过sudo cp 拷贝过去。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">make INSTALL_MOD_PATH=/home/huerli/t113/modules modules modules_install<br>cp /home/huerli/t113/modules/lib/* -rf /mnt/rootfs/lib/<br></code></pre></td></tr></table></figure><h2 id="添加屏幕"><a href="#添加屏幕" class="headerlink" title="添加屏幕"></a>添加屏幕</h2><h3 id="RGB屏幕接口定义"><a href="#RGB屏幕接口定义" class="headerlink" title="RGB屏幕接口定义"></a>RGB屏幕接口定义</h3><table><thead><tr><th align="center">pin</th><th align="center">symbol</th><th align="center">desciption</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">LED-K</td><td align="center">LED backlight(Cathode)</td></tr><tr><td align="center">2</td><td align="center">LED-A</td><td align="center">LED backlight(anode)</td></tr><tr><td align="center">3</td><td align="center">GND</td><td align="center">Ground</td></tr><tr><td align="center">4</td><td align="center">VDD</td><td align="center">Power supply (Digital +3.0V)</td></tr><tr><td align="center">5-12</td><td align="center">R0-R7</td><td align="center">Red Data</td></tr><tr><td align="center">13-20</td><td align="center">G0-G7</td><td align="center">Green Data</td></tr><tr><td align="center">21-28</td><td align="center">B0-B7</td><td align="center">Blue Data</td></tr><tr><td align="center">29</td><td align="center">GND</td><td align="center">Ground</td></tr><tr><td align="center">30</td><td align="center">CLK</td><td align="center">Clodk</td></tr><tr><td align="center">31</td><td align="center">DISP</td><td align="center">Display on&#x2F;off</td></tr><tr><td align="center">32</td><td align="center">HSYNC</td><td align="center">Horizontal sync input in RGB mode (short to GND if not used)</td></tr><tr><td align="center">33</td><td align="center">VSYNC</td><td align="center">Vertical sync input in RGB mode (short to GND if not used)</td></tr><tr><td align="center">34</td><td align="center">DEN</td><td align="center">Data Enable</td></tr><tr><td align="center">35</td><td align="center">NC</td><td align="center">NC</td></tr><tr><td align="center">36</td><td align="center">GND</td><td align="center">Ground</td></tr><tr><td align="center">37</td><td align="center">NC</td><td align="center">NC</td></tr><tr><td align="center">38</td><td align="center">NC</td><td align="center">NC</td></tr><tr><td align="center">39</td><td align="center">NC</td><td align="center">NC</td></tr><tr><td align="center">40</td><td align="center">NC</td><td align="center">NC</td></tr></tbody></table><h3 id="屏幕参数"><a href="#屏幕参数" class="headerlink" title="屏幕参数"></a>屏幕参数</h3><p><img src="/img/t113/lcd_canshu.png"></p><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>首先就是修改设备树，重点要注意三个地方：<br>①、LCD 所使用的 IO 配置<br>②、LDTC 接口节点修改，修改相应的属性值，告诉内核要指定那个输出接口，比如输出到 RGB LCD 屏、MIPI 屏等。本实验用到是正点原子 ATK7016 屏，也就是 RGB LCD 屏。<br>③、输出接口节点的编写，比如本实验用到的 RGB LCD 屏需要在根节点下添加 RGB LCD节点。</p><h4 id="设备树-1"><a href="#设备树-1" class="headerlink" title="设备树"></a>设备树</h4><p>添加到dts&#x2F;节点下</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">panel_rgb:</span><span class="hljs-title class_">panel-rgb</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">compatible</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;huerli,my_rgb_565&quot;</span>,<span class="hljs-string">&quot;simple-panel&quot;</span><span class="hljs-punctuation">;</span><br>        <span class="hljs-attr">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;okay&quot;</span><span class="hljs-punctuation">;</span><br>        <span class="hljs-title class_">port@0</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">                dsi_panel_in:</span>endpoint@<span class="hljs-number">0</span><span class="hljs-punctuation">&#123;</span><br>                        <span class="hljs-attr">remote-endpoint</span> <span class="hljs-operator">=</span> <span class="hljs-params">&lt;<span class="hljs-variable">&amp;ltdc_out</span>&gt;</span><span class="hljs-punctuation">;</span><br>                <span class="hljs-punctuation">&#125;;</span><br>        <span class="hljs-punctuation">&#125;;</span><br><span class="hljs-punctuation">&#125;;</span><br><br><br><span class="hljs-variable">&amp;de</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;okay&quot;</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;;</span><br><span class="hljs-variable">&amp;tcon_lcd0</span><span class="hljs-punctuation">&#123;</span><br>        pinctrl<span class="hljs-number">-0</span> = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;lcd_rgb666_pins_a</span>&gt;</span><span class="hljs-punctuation">;</span><br>        <span class="hljs-attr">pinctrl-names</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;default&quot;</span><span class="hljs-punctuation">;</span><br>        <span class="hljs-attr">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;okay&quot;</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;;</span><br><span class="hljs-variable">&amp;tcon_lcd0_out</span><span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">        ltdc_out:</span>endpoint@<span class="hljs-number">0</span><span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">remote-endpoint</span> <span class="hljs-operator">=</span> <span class="hljs-params">&lt;<span class="hljs-variable">&amp;dsi_panel_in</span>&gt;</span><span class="hljs-punctuation">;</span><br>        <span class="hljs-punctuation">&#125;;</span><br><span class="hljs-punctuation">&#125;;</span><br></code></pre></td></tr></table></figure><h4 id="kernel-1"><a href="#kernel-1" class="headerlink" title="kernel"></a>kernel</h4><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs elm">&gt; <span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span> <br>        &gt; <span class="hljs-type">Graphics</span> sup<span class="hljs-keyword">port</span> <br>                &lt;*&gt; <span class="hljs-type">Direct</span> <span class="hljs-type">Rendering</span> <span class="hljs-type">Manager</span> (<span class="hljs-type">XFree86</span> <span class="hljs-number">4.1</span><span class="hljs-number">.0</span> and higher <span class="hljs-type">DRI</span> sup<span class="hljs-keyword">port</span>)<br>                [*] <span class="hljs-type">Enable</span> legacy fbdev sup<span class="hljs-keyword">port</span> for your modesetting driver（勾选Simple framebuffer support后会自动勾选）<br>                (<span class="hljs-number">100</span>) <span class="hljs-type">Overallocation</span> <span class="hljs-keyword">of</span> the fbdev buffer<br>                &gt;[*]<span class="hljs-type">DRM</span> <span class="hljs-type">Support</span> for <span class="hljs-type">Allwinner</span> <span class="hljs-type">A10</span> <span class="hljs-type">Display</span> <span class="hljs-type">Engine</span><br>                ......<br>                &gt; <span class="hljs-type">Display</span> <span class="hljs-type">Panels</span><br>                        &lt;*&gt; <span class="hljs-type">Generic</span> <span class="hljs-type">LVDS</span> panel driver                                                                                                                                   │ │  <br>                        &lt;*&gt; sup<span class="hljs-keyword">port</span> for simple panels (other than eDP ones)                                                                                                             │ │  <br>                        &lt;*&gt; sup<span class="hljs-keyword">port</span> for simple Embedded DisplayPort panels<br>                &gt;[*] <span class="hljs-type">Display</span> <span class="hljs-type">Interface</span> <span class="hljs-type">Bridges</span>  <br>                      &lt;*&gt; <span class="hljs-type">Simple</span> <span class="hljs-type">DRM</span> bridge sup<span class="hljs-keyword">port</span><br>                &lt;*&gt; <span class="hljs-type">LIMA</span> (<span class="hljs-type">DRM</span> sup<span class="hljs-keyword">port</span> for ARM Mali 400/450 GPU)<br>                &gt; <span class="hljs-type">Frame</span> buffer <span class="hljs-type">Devices</span> <br>                         &lt;*&gt; <span class="hljs-type">Support</span> for frame buffer devices  <span class="hljs-comment">---&gt;      </span><br>                                &lt;*&gt;   <span class="hljs-type">Simple</span> framebuffer sup<span class="hljs-keyword">port</span><br>                [*] <span class="hljs-type">Bootup</span> logo  <span class="hljs-comment">---&gt; </span><br>                       [*]   <span class="hljs-type">Standard</span> black and white <span class="hljs-type">Linux</span> logo<br>                       [*]   <span class="hljs-type">Standard</span> <span class="hljs-number">16</span>-color <span class="hljs-type">Linux</span> logo<br>                       [*]   <span class="hljs-type">Standard</span> <span class="hljs-number">224</span>-color <span class="hljs-type">Linux</span> logo<br></code></pre></td></tr></table></figure><h4 id="添加panel"><a href="#添加panel" class="headerlink" title="添加panel"></a>添加panel</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim drivers/gpu/drm/panel/panel_simple.c<br></code></pre></td></tr></table></figure><p>在文件中添加自己的屏幕信息</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">static const struct drm_display_mode my_rgb_565_mode = &#123;<br>    <span class="hljs-string">.clock</span> = 33260,<br>    <span class="hljs-string">.hdisplay</span> = 1024,<br>    <span class="hljs-string">.hsync_start</span> = 1024 + 160,<br>    <span class="hljs-string">.hsync_end</span> = 1024 + 160 + 4,<br>    <span class="hljs-string">.htotal</span> = 1024 + 160 + 4 + 156,<br>    <span class="hljs-string">.vdisplay</span> = 600,<br>    <span class="hljs-string">.vsync_start</span> = 600 + 17,<br>    <span class="hljs-string">.vsync_end</span> = 600 + 17 + 1,<br>    <span class="hljs-string">.vtotal</span> = 600 + 17 + 1 + 17,<br>&#125;;<br><br>static const struct panel_desc my_rgb_565 = &#123;<br>    <span class="hljs-string">.modes</span> = &amp;my_rgb_565_mode,<br>    <span class="hljs-string">.num_modes</span> = 1,<br>    <span class="hljs-string">.bpc</span> = 8,<br>    <span class="hljs-string">.size</span> = &#123;<br>    <span class="hljs-string">.width</span> = 154,<br>    <span class="hljs-string">.height</span> = 90,<br>    &#125;,<br>    <span class="hljs-string">.delay</span> = &#123;<br>    <span class="hljs-string">.prepare</span> = 20,<br>    <span class="hljs-string">.enable</span> = 200,<br>    <span class="hljs-string">.disable</span> = 200,<br>&#125;,<br>    <span class="hljs-string">.bus_format</span> =MEDIA_BUS_FMT_RGB565_1X16,<br>&#125;;<br><br>static const struct of_device_id platform_of_match[] = &#123;<br>&#123;<br>       前面省略 <span class="hljs-string">....</span><br>      &#123;<br>      /* Must be the last entry */<br>      <span class="hljs-string">.compatible</span> = <span class="hljs-string">&quot;huerli,my_rgb_565&quot;</span>,<br>      <span class="hljs-string">.data</span> = &amp;my_rgb_565,<br>      &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="/img/t113/device_id.png"></p><ul><li>include&#x2F;uapi&#x2F;linux&#x2F;media-bus-format.h</li></ul><table><thead><tr><th align="center">index</th><th align="center">name</th><th align="center">refresh (Hz)</th><th align="center">hdisp</th><th align="center">hss</th><th align="center">hse</th><th align="center">htot</th><th align="center">vdisp</th><th align="center">vss</th><th align="center">vse</th><th align="center">vtot</th></tr></thead><tbody><tr><td align="center">#0</td><td align="center">1024x600</td><td align="center">38.97</td><td align="center">1024</td><td align="center">1184</td><td align="center">1188</td><td align="center">1344</td><td align="center">600</td><td align="center">617</td><td align="center">618</td><td align="center">635</td></tr></tbody></table><h4 id="kernel-2"><a href="#kernel-2" class="headerlink" title="kernel"></a>kernel</h4><p>添加DRM<br><img src="/img/t113/sun8i-drm.png"></p><h3 id="上电！！！-2"><a href="#上电！！！-2" class="headerlink" title="上电！！！"></a>上电！！！</h3><p>出现如下日志</p><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br></pre></td><td class="code"><pre><code class="hljs log">[I] AWBoot r6163 starting...<br>[I] SMHC: sdhci0 controller v50310 initialized<br>[I] SHMC: SD card detected<br>[I] FATFS: read sun8i-t113-mangopi-dual.dtb addr=44000000<br>[I] FATFS: read zImage addr=44800000<br>[I] booting linux...<br>[    0.000000] Booting Linux on physical CPU 0x0<br>[    0.000000] Linux version 6.0.1-gd7d8c971c9c5-dirty (huerli@huerli) (arm-none-linux-gnueabihf-gcc (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 12.3.1 20230626, GNU ld (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 2.40.0.20230627) #10 SMP Sat Sep 30 15:32:34 CST 2023<br>[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d<br>[    0.000000] CPU: div instructions available: patching division code<br>[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache<br>[    0.000000] OF: fdt: Machine model: MangoPi MQ-Dual<br>[    0.000000] Memory policy: Data cache writealloc<br>[    0.000000] cma: Failed to reserve 72 MiB<br>[    0.000000] Zone ranges:<br>[    0.000000]   Normal   [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000]   HighMem  empty<br>[    0.000000] Movable zone start for each node<br>[    0.000000] Early memory node ranges<br>[    0.000000]   node   0: [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] percpu: Embedded 11 pages/cpu s15508 r8192 d21356 u45056<br>[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 32512<br>[    0.000000] Kernel command line: mem=128M cma=72M root=/dev/mmcblk0p2 init=/sbin/init rootwait console=tty0 console=ttyS5,115200<br>[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes, linear)<br>[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes, linear)<br>[    0.000000] mem auto-init: stack:all(zero), heap alloc:off, heap free:off<br>[    0.000000] Memory: 116220K/131072K available (8192K kernel code, 946K rwdata, 2140K rodata, 1024K init, 270K bss, 14852K reserved, 0K cma-reserved, 0K highmem)<br>[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1<br>[    0.000000] rcu: Hierarchical RCU implementation.<br>[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=8 to nr_cpu_ids=2.<br>[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.<br>[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2<br>[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16<br>[    0.000000] rcu: srcu_init: Setting srcu_struct sizes based on contention.<br>[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).<br>[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns<br>[    0.000001] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns<br>[    0.000012] Switching to timer-based delay loop, resolution 41ns<br>[    0.000189] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns<br>[    0.000690] Console: colour dummy device 80x30<br>[    0.000999] printk: console [tty0] enabled<br>[    0.001044] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=240000)<br>[    0.001074] pid_max: default: 32768 minimum: 301<br>[    0.001233] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001264] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001807] CPU: Testing write buffer coherency: ok<br>[    0.002126] /cpus/cpu@0 missing clock-frequency property<br>[    0.002176] /cpus/cpu@1 missing clock-frequency property<br>[    0.002196] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000<br>[    0.002947] Setting up static identity map for 0x40100000 - 0x40100060<br>[    0.003115] rcu: Hierarchical SRCU implementation.<br>[    0.003135] rcu:     Max phase no-delay instances is 1000.<br>[    0.003664] smp: Bringing up secondary CPUs ...<br>[    0.004369] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001<br>[    0.004492] smp: Brought up 1 node, 2 CPUs<br>[    0.004532] SMP: Total of 2 processors activated (96.00 BogoMIPS).<br>[    0.004548] CPU: All CPU(s) started in SVC mode.<br>[    0.005056] devtmpfs: initialized<br>[    0.009106] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5<br>[    0.009336] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns<br>[    0.009378] futex hash table entries: 512 (order: 3, 32768 bytes, linear)<br>[    0.009528] pinctrl core: initialized pinctrl subsystem<br>[    0.010847] NET: Registered PF_NETLINK/PF_ROUTE protocol family<br>[    0.011161] DMA: preallocated 256 KiB pool for atomic coherent allocations<br>[    0.011931] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;<br>[    0.012175] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.<br>[    0.012222] hw-breakpoint: maximum watchpoint size is 8 bytes.<br>[    0.020807] platform 5460000.tcon-top: Fixing up cyclic dependency with 5200000.mixer<br>[    0.020905] platform 5460000.tcon-top: Fixing up cyclic dependency with 5100000.mixer<br>[    0.021193] platform 5461000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.021636] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5604000.tv-encoder<br>[    0.021718] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.022474] platform 7090000.rtc: Fixing up cyclic dependency with 7010000.clock-controller<br>[    0.024257] platform panel-rgb: Fixing up cyclic dependency with 5461000.lcd-controller<br>[    0.032757] SCSI subsystem initialized<br>[    0.033249] usbcore: registered new interface driver usbfs<br>[    0.033305] usbcore: registered new interface driver hub<br>[    0.033354] usbcore: registered new device driver usb<br>[    0.033563] mc: Linux media interface: v0.10<br>[    0.033624] videodev: Linux video capture interface: v2.00<br>[    0.033718] pps_core: LinuxPPS API ver. 1 registered<br>[    0.033733] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;\giometti@linux.it&gt;<br>[    0.033763] PTP clock support registered<br>[    0.034178] Advanced Linux Sound Architecture Driver Initialized.<br>[    0.035321] clocksource: Switched to clocksource arch_sys_counter<br>[    0.042533] NET: Registered PF_INET protocol family<br>[    0.042754] IP idents hash table entries: 2048 (order: 2, 16384 bytes, linear)<br>[    0.043305] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)<br>[    0.043349] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)<br>[    0.043373] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.043401] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)<br>[    0.043430] TCP: Hash tables configured (established 1024 bind 1024)<br>[    0.043519] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.043562] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.043730] NET: Registered PF_UNIX/PF_LOCAL protocol family<br>[    0.044413] RPC: Registered named UNIX socket transport module.<br>[    0.044456] RPC: Registered udp transport module.<br>[    0.044469] RPC: Registered tcp transport module.<br>[    0.044482] RPC: Registered tcp NFSv4.1 backchannel transport module.<br>[    0.046394] Initialise system trusted keyrings<br>[    0.046757] workingset: timestamp_bits=30 max_order=15 bucket_order=0<br>[    0.051488] NFS: Registering the id_resolver key type<br>[    0.051568] Key type id_resolver registered<br>[    0.051585] Key type id_legacy registered<br>[    0.051632] Key type asymmetric registered<br>[    0.051648] Asymmetric key parser &#x27;x509&#x27; registered<br>[    0.051780] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 246)<br>[    0.051805] io scheduler mq-deadline registered<br>[    0.051818] io scheduler kyber registered<br>[    0.108812] Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled<br>[    0.116233] panel-simple panel-rgb: supply power not found, using dummy regulator<br>[    0.116434] panel-simple panel-rgb: Specify missing connector_type<br>[    0.119257] CAN device driver interface<br>[    0.119989] ehci_hcd: USB 2.0 &#x27;Enhanced&#x27; Host Controller (EHCI) Driver<br>[    0.120014] ehci-platform: EHCI generic platform driver<br>[    0.120151] ohci_hcd: USB 1.1 &#x27;Open&#x27; Host Controller (OHCI) Driver<br>[    0.120182] ohci-platform: OHCI generic platform driver<br>[    0.122766] sun6i-rtc 7090000.rtc: registered as rtc0<br>[    0.122919] sun6i-rtc 7090000.rtc: setting system clock to 1970-01-02T00:00:16 UTC (86416)<br>[    0.123055] sun6i-rtc 7090000.rtc: RTC enabled<br>[    0.123402] i2c_dev: i2c /dev entries driver<br>[    0.125202] sunxi-wdt 20500a0.watchdog: Watchdog enabled (timeout=16 sec, nowayout=0)<br>[    0.126401] sun8i-ce 3040000.crypto: Set mod clock to 300000000 (300 Mhz) from 400000000 (400 Mhz)<br>[    0.126767] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.126967] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.127131] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.127272] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.127370] sun8i-ce 3040000.crypto: Register cbc(aes)<br>[    0.127406] sun8i-ce 3040000.crypto: Register ecb(aes)<br>[    0.127425] sun8i-ce 3040000.crypto: Register cbc(des3_ede)<br>[    0.127444] sun8i-ce 3040000.crypto: Register ecb(des3_ede)<br>[    0.127490] sun8i-ce 3040000.crypto: CryptoEngine Die ID 0<br>[    0.128338] usbcore: registered new interface driver usbhid<br>[    0.128369] usbhid: USB HID core driver<br>[    0.130991] NET: Registered PF_PACKET protocol family<br>[    0.131045] can: controller area network core<br>[    0.131127] NET: Registered PF_CAN protocol family<br>[    0.131146] can: raw protocol<br>[    0.131160] can: broadcast manager protocol<br>[    0.131177] can: netlink gateway - max_hops=1<br>[    0.131374] Key type dns_resolver registered<br>[    0.131480] Registering SWP/SWPB emulation handler<br>[    0.131592] Loading compiled-in X.509 certificates<br>[    0.149276] sun20i-d1-pinctrl 2000000.pinctrl: initialized sunXi PIO driver<br>[    0.170868] 2500400.serial: ttyS1 at MMIO 0x2500400 (irq = 231, base_baud = 1500000) is a 16550A<br>[    0.192561] 2501400.serial: ttyS5 at MMIO 0x2501400 (irq = 232, base_baud = 1500000) is a 16550A<br>[    1.072515] printk: console [ttyS5] enabled<br>[    1.078747] phy phy-4100400.phy.0: Changing dr_mode to 1<br>[    1.079872] usb_phy_generic usb_phy_generic.1.auto: dummy supplies not allowed for exclusive requests<br>[    1.084082] ehci-platform 4101000.usb: EHCI Host Controller<br>[    1.093828] musb-hdrc musb-hdrc.2.auto: MUSB HDRC host driver<br>[    1.098940] ehci-platform 4101000.usb: new USB bus registered, assigned bus number 1<br>[    1.104668] musb-hdrc musb-hdrc.2.auto: new USB bus registered, assigned bus number 2<br>[    1.112518] ehci-platform 4101000.usb: irq 233, io mem 0x04101000<br>[    1.120973] hub 2-0:1.0: USB hub found<br>[    1.127216] ehci-platform 4200000.usb: EHCI Host Controller<br>[    1.130211] hub 2-0:1.0: 1 port detected<br>[    1.137361] ohci-platform 4200400.usb: Generic Platform OHCI controller<br>[    1.146447] ohci-platform 4200400.usb: new USB bus registered, assigned bus number 3<br>[    1.154332] ohci-platform 4200400.usb: irq 237, io mem 0x04200400<br>[    1.155430] ehci-platform 4200000.usb: new USB bus registered, assigned bus number 4<br>[    1.160479] ehci-platform 4101000.usb: USB 2.0 started, EHCI 1.00<br>[    1.168293] ehci-platform 4200000.usb: irq 235, io mem 0x04200000<br>[    1.180796] hub 1-0:1.0: USB hub found<br>[    1.184745] hub 1-0:1.0: 1 port detected<br>[    1.185165] Goodix-TS 0-0014: supply AVDD28 not found, using dummy regulator<br>[    1.195942] Goodix-TS 0-0014: supply VDDIO not found, using dummy regulator<br>[    1.205315] ehci-platform 4200000.usb: USB 2.0 started, EHCI 1.00<br>[    1.212125] hub 4-0:1.0: USB hub found<br>[    1.215959] hub 4-0:1.0: 1 port detected<br>[    1.229927] hub 3-0:1.0: USB hub found<br>[    1.233734] hub 3-0:1.0: 1 port detected<br>[    1.315741] Goodix-TS 0-0014: ID 911, version: 1060<br>[    1.322714] Goodix-TS 0-0014: Direct firmware load for goodix_911_cfg.bin failed with error -2<br>[    1.323398] sunxi-mmc 4020000.mmc: Got CD GPIO<br>[    1.336651] sunxi-mmc 4021000.mmc: allocated mmc-pwrseq<br>[    1.336934] cfg80211: Loading compiled-in X.509 certificates for regulatory database<br>[    1.349964] ohci-platform 4101400.usb: Generic Platform OHCI controller<br>[    1.356696] ohci-platform 4101400.usb: new USB bus registered, assigned bus number 5<br>[    1.364650] ohci-platform 4101400.usb: irq 236, io mem 0x04101400<br>[    1.365336] sunxi-mmc 4021000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.379791] sunxi-mmc 4020000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.380013] input: Goodix Capacitive TouchScreen as /devices/platform/soc/2502800.i2c/i2c-0/0-0014/input/input0<br>[    1.391006] cfg80211: Loaded X.509 cert &#x27;sforshee: 00b28ddf47aef9cea7&#x27;<br>[    1.405626] ALSA device list:<br>[    1.408629]   No soundcards found.<br>[ry.0: Direct firmware load for regulatory.db failed with error -2<br>[    1.418633] cfg80211: failed to load regulatory.db<br>[    1.424147] sunxi-mmc 4021000.mmc: card claims to support voltages below defined range<br>[    1.440068] hub 5-0:1.0: USB hub found<br>[    1.443968] hub 5-0:1.0: 1 port detected<br>[    1.448508] Waiting for root device /dev/mmcblk0p2...<br>[    1.463507] mmc1: new high speed SDIO card at address 0001<br>[    1.486805] mmc0: new high speed SDHC card at address aaaa<br>[    1.493124] mmcblk0: mmc0:aaaa SC32G 29.7 GiB<br>[    1.503596]  mmcblk0: p1 p2<br>[    1.530582] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Quota mode: disabled.<br>[    1.539602] VFS: Mounted root (ext4 filesystem) readonly on device 179:2.<br>[    1.550749] devtmpfs: mounted<br>[    1.554909] Freeing unused kernel image (initmem) memory: 1024K<br>[    1.561082] Run /sbin/init as init process<br>[    1.788610] EXT4-fs (mmcblk0p2): re-mounted. Quota mode: disabled.<br>Starting syslogd: OK<br>Starting klogd: OK<br>Running sysctl: OK<br>Starting mdev... OK<br>Seeding 256 bits[    2.924042] random: crng init done and crediting<br>Saving 256 bits of creditable seed for next boot<br>Starting network: OK<br>Starting WiFi: Successfully initialized wpa_supplicant<br>udhcpc: started, v1.36.1<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting select for 192.168.8.234, server 192.168.8.1<br>udhcpc: lease of 192.168.8.234 obtained from 192.168.8.1, lease time 43200<br>deleting routers<br>adding dns 192.168.8.1<br>OK<br>Starting sshd: OK<br>Starting vsftpd: OK<br>Welcome to Buildroot<br>Huerli login: root<br>[root@Huerli]:~$[   13.285689] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD0<br>[   13.293996] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD1<br>[   13.302319] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD2<br>[   13.310612] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD3<br>[   13.318909] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD4<br>[   13.327197] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD5<br>[   13.335497] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD6<br>[   13.343770] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD7<br>[   13.352057] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD8<br>[   13.360351] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD9<br>[   13.368639] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD10<br>[   13.377032] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD11<br>[   13.385425] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD12<br>[   13.393798] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD13<br>[   13.402194] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD14<br>[   13.410580] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD15<br>[   13.418963] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD16<br>[   13.427339] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD17<br>[   13.435711] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD18<br>[   13.444068] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD19<br>[   13.452441] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD20<br>[   13.460813] sun20i-d1-pinctrl 2000000.pinctrl: unsupported function io_disabled on pin PD21<br>[   13.469184] sun4i-tcon 5461000.lcd-controller: there is not valid maps for state sleep<br>[   13.482028] sun4i-drm display-engine: bound 5100000.mixer (ops 0xc0953bc8)<br>[   13.490572] sun4i-drm display-engine: bound 5200000.mixer (ops 0xc0953bc8)<br>[   13.497795] sun4i-drm display-engine: bound 5460000.tcon-top (ops 0xc0958094)<br>[   13.505475] sun4i-drm display-engine: bound 5461000.lcd-controller (ops 0xc09506a0)<br>[   13.513507] sun4i-drm display-engine: bound 5470000.lcd-controller (ops 0xc09506a0)<br>[   13.521360] sun4i-drm display-engine: bound 5604000.tv-encoder (ops 0xc09516c0)<br>[   13.529505] [drm] Initialized sun4i-drm 1.0.0 20150629 for display-engine on minor 0<br>[   13.755292] ------------[ cut here ]------------<br>[   13.755307] WARNING: CPU: 0 PID: 9 at drivers/gpu/drm/drm_atomic_helper.c:1596 drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   13.755339] [CRTC:41:crtc-0] vblank wait timed out<br>[   13.755343] Modules linked in: 8189fs<br>[   13.755357] CPU: 0 PID: 9 Comm: kworker/u4:0 Not tainted 6.0.1-gd7d8c971c9c5-dirty #10<br>[   13.755365] Hardware name: Generic DT based system<br>[   13.755371] Workqueue: events_unbound deferred_probe_work_func<br>[   13.755394]  unwind_backtrace from show_stack+0x10/0x14<br>[   13.755410]  show_stack from dump_stack_lvl+0x40/0x4c<br>[   13.755426]  dump_stack_lvl from __warn+0xb0/0xd8<br>[   13.755440]  __warn from warn_slowpath_fmt+0x98/0xc8<br>[   13.755453]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   13.755468]  drm_atomic_helper_wait_for_vblanks.part.0 from drm_atomic_helper_commit_tail_rpm+0x7c/0x8c<br>[   13.755484]  drm_atomic_helper_commit_tail_rpm from commit_tail+0x9c/0x190<br>[   13.755498]  commit_tail from drm_atomic_helper_commit+0x134/0x158<br>[   13.755512]  drm_atomic_helper_commit from drm_atomic_commit+0xa8/0xdc<br>[   13.755527]  drm_atomic_commit from drm_client_modeset_commit_atomic+0x20c/0x250<br>[   13.755543]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+0x5c/0x184<br>[   13.755558]  drm_client_modeset_commit_locked from drm_client_modeset_commit+0x24/0x40<br>[   13.755572]  drm_client_modeset_commit from drm_fb_helper_set_par+0x9c/0xec<br>[   13.755586]  drm_fb_helper_set_par from fbcon_init+0x238/0x540<br>[   13.755603]  fbcon_init from visual_init+0xbc/0x104<br>[   13.755618]  visual_init from do_bind_con_driver+0x1d8/0x3c4<br>[   13.755630]  do_bind_con_driver from do_take_over_console+0x194/0x1d8<br>[   13.755642]  do_take_over_console from do_fbcon_takeover+0x6c/0xcc<br>[   13.755657]  do_fbcon_takeover from fbcon_fb_registered+0x198/0x1a8<br>[   13.755670]  fbcon_fb_registered from register_framebuffer+0x194/0x264<br>[   13.755683]  register_framebuffer from __drm_fb_helper_initial_config_and_unlock+0x3f4/0x5a8<br>[   13.755696]  __drm_fb_helper_initial_config_and_unlock from drm_fbdev_client_hotplug+0x14c/0x1e8<br>[   13.755710]  drm_fbdev_client_hotplug from drm_fbdev_generic_setup+0xa4/0x190<br>[   13.755723]  drm_fbdev_generic_setup from sun4i_drv_bind+0x118/0x160<br>[   13.755738]  sun4i_drv_bind from try_to_bring_up_aggregate_device+0x168/0x1c4<br>[   13.755752]  try_to_bring_up_aggregate_device from __component_add+0x94/0x138<br>[   13.755764]  __component_add from sun4i_tcon_probe+0x7c/0xa0<br>[   13.755777]  sun4i_tcon_probe from platform_probe+0x5c/0xb0<br>[   13.755792]  platform_probe from really_probe+0xc8/0x2ec<br>[   13.755803]  really_probe from __driver_probe_device+0x84/0xe4<br>[   13.755813]  __driver_probe_device from driver_probe_device+0x30/0x104<br>[   13.755823]  driver_probe_device from __device_attach_driver+0x94/0x108<br>[   13.755834]  __device_attach_driver from bus_for_each_drv+0x88/0xd4<br>[   13.755847]  bus_for_each_drv from __device_attach+0xa8/0x1bc<br>[   13.755859]  __device_attach from bus_probe_device+0x84/0x8c<br>[   13.755871]  bus_probe_device from deferred_probe_work_func+0x78/0xa4<br>[   13.755886]  deferred_probe_work_func from process_one_work+0x1e8/0x3e8<br>[   13.755902]  process_one_work from worker_thread+0x224/0x54c<br>[   13.755913]  worker_thread from kthread+0xd0/0xec<br>[   13.755927]  kthread from ret_from_fork+0x14/0x2c<br>[   13.755940] Exception stack(0xc8835fb0 to 0xc8835ff8)<br>[   13.755948] 5fa0:                                     00000000 00000000 00000000 00000000<br>[   13.755956] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br>[   13.755963] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000<br>[   13.755969] ---[ end trace 0000000000000000 ]---<br>[   13.885303] ------------[ cut here ]------------<br>[   13.885316] WARNING: CPU: 0 PID: 9 at drivers/gpu/drm/drm_atomic_helper.c:1596 drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   13.885346] [CRTC:41:crtc-0] vblank wait timed out<br>[   13.885351] Modules linked in: 8189fs<br>[   13.885363] CPU: 0 PID: 9 Comm: kworker/u4:0 Tainted: G        W          6.0.1-gd7d8c971c9c5-dirty #10<br>[   13.885372] Hardware name: Generic DT based system<br>[   13.885377] Workqueue: events_unbound deferred_probe_work_func<br>[   13.885398]  unwind_backtrace from show_stack+0x10/0x14<br>[   13.885414]  show_stack from dump_stack_lvl+0x40/0x4c<br>[   13.885430]  dump_stack_lvl from __warn+0xb0/0xd8<br>[   13.885444]  __warn from warn_slowpath_fmt+0x98/0xc8<br>[   13.885456]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   13.885471]  drm_atomic_helper_wait_for_vblanks.part.0 from drm_atomic_helper_commit_tail_rpm+0x7c/0x8c<br>[   13.885487]  drm_atomic_helper_commit_tail_rpm from commit_tail+0x9c/0x190<br>[   13.885501]  commit_tail from drm_atomic_helper_commit+0x134/0x158<br>[   13.885515]  drm_atomic_helper_commit from drm_atomic_commit+0xa8/0xdc<br>[   13.885529]  drm_atomic_commit from drm_client_modeset_commit_atomic+0x20c/0x250<br>[   13.885544]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+0x5c/0x184<br>[   13.885559]  drm_client_modeset_commit_locked from drm_fb_helper_pan_display+0xc8/0x1dc<br>[   13.885574]  drm_fb_helper_pan_display from fb_pan_display+0x84/0x12c<br>[   13.885590]  fb_pan_display from bit_update_start+0x14/0x30<br>[   13.885602]  bit_update_start from fbcon_switch+0x36c/0x4b8<br>[   13.885616]  fbcon_switch from redraw_screen+0xe0/0x240<br>[   13.885631]  redraw_screen from fbcon_prepare_logo+0x3b0/0x45c<br>[   13.885644]  fbcon_prepare_logo from fbcon_init+0x3a4/0x540<br>[   13.885659]  fbcon_init from visual_init+0xbc/0x104<br>[   13.885672]  visual_init from do_bind_con_driver+0x1d8/0x3c4<br>[   13.885683]  do_bind_con_driver from do_take_over_console+0x194/0x1d8<br>[   13.885696]  do_take_over_console from do_fbcon_takeover+0x6c/0xcc<br>[   13.885710]  do_fbcon_takeover from fbcon_fb_registered+0x198/0x1a8<br>[   13.885723]  fbcon_fb_registered from register_framebuffer+0x194/0x264<br>[   13.885734]  register_framebuffer from __drm_fb_helper_initial_config_and_unlock+0x3f4/0x5a8<br>[   13.885748]  __drm_fb_helper_initial_config_and_unlock from drm_fbdev_client_hotplug+0x14c/0x1e8<br>[   13.885761]  drm_fbdev_client_hotplug from drm_fbdev_generic_setup+0xa4/0x190<br>[   13.885774]  drm_fbdev_generic_setup from sun4i_drv_bind+0x118/0x160<br>[   13.885789]  sun4i_drv_bind from try_to_bring_up_aggregate_device+0x168/0x1c4<br>[   13.885802]  try_to_bring_up_aggregate_device from __component_add+0x94/0x138<br>[   13.885814]  __component_add from sun4i_tcon_probe+0x7c/0xa0<br>[   13.885827]  sun4i_tcon_probe from platform_probe+0x5c/0xb0<br>[   13.885841]  platform_probe from really_probe+0xc8/0x2ec<br>[   13.885852]  really_probe from __driver_probe_device+0x84/0xe4<br>[   13.885862]  __driver_probe_device from driver_probe_device+0x30/0x104<br>[   13.885872]  driver_probe_device from __device_attach_driver+0x94/0x108<br>[   13.885883]  __device_attach_driver from bus_for_each_drv+0x88/0xd4<br>[   13.885896]  bus_for_each_drv from __device_attach+0xa8/0x1bc<br>[   13.885908]  __device_attach from bus_probe_device+0x84/0x8c<br>[   13.885920]  bus_probe_device from deferred_probe_work_func+0x78/0xa4<br>[   13.885935]  deferred_probe_work_func from process_one_work+0x1e8/0x3e8<br>[   13.885950]  process_one_work from worker_thread+0x224/0x54c<br>[   13.885961]  worker_thread from kthread+0xd0/0xec<br>[   13.885975]  kthread from ret_from_fork+0x14/0x2c<br>[   13.885987] Exception stack(0xc8835fb0 to 0xc8835ff8)<br>[   13.885994] 5fa0:                                     00000000 00000000 00000000 00000000<br>[   13.886003] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br>[   13.886010] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000<br>[   13.886015] ---[ end trace 0000000000000000 ]---<br>[   13.889784] Console: switching to colour frame buffer device 90x36<br>[   14.005302] ------------[ cut here ]------------<br>[   14.005313] WARNING: CPU: 0 PID: 9 at drivers/gpu/drm/drm_atomic_helper.c:1596 drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   14.005341] [CRTC:41:crtc-0] vblank wait timed out<br>[   14.005346] Modules linked in: 8189fs<br>[   14.005357] CPU: 0 PID: 9 Comm: kworker/u4:0 Tainted: G        W          6.0.1-gd7d8c971c9c5-dirty #10<br>[   14.005365] Hardware name: Generic DT based system<br>[   14.005371] Workqueue: events_unbound deferred_probe_work_func<br>[   14.005390]  unwind_backtrace from show_stack+0x10/0x14<br>[   14.005406]  show_stack from dump_stack_lvl+0x40/0x4c<br>[   14.005422]  dump_stack_lvl from __warn+0xb0/0xd8<br>[   14.005436]  __warn from warn_slowpath_fmt+0x98/0xc8<br>[   14.005449]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part.0+0x25c/0x264<br>[   14.005464]  drm_atomic_helper_wait_for_vblanks.part.0 from drm_atomic_helper_commit_tail_rpm+0x7c/0x8c<br>[   14.005480]  drm_atomic_helper_commit_tail_rpm from commit_tail+0x9c/0x190<br>[   14.005494]  commit_tail from drm_atomic_helper_commit+0x134/0x158<br>[   14.005507]  drm_atomic_helper_commit from drm_atomic_commit+0xa8/0xdc<br>[   14.005522]  drm_atomic_commit from drm_client_modeset_commit_atomic+0x20c/0x250<br>[   14.005538]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+0x5c/0x184<br>[   14.005553]  drm_client_modeset_commit_locked from drm_fb_helper_pan_display+0xc8/0x1dc<br>[   14.005568]  drm_fb_helper_pan_display from fb_pan_display+0x84/0x12c<br>[   14.005583]  fb_pan_display from bit_update_start+0x14/0x30<br>[   14.005595]  bit_update_start from fbcon_switch+0x36c/0x4b8<br>[   14.005609]  fbcon_switch from redraw_screen+0xe0/0x240<br>[   14.005624]  redraw_screen from do_bind_con_driver+0x390/0x3c4<br>[   14.005636]  do_bind_con_driver from do_take_over_console+0x194/0x1d8<br>[   14.005649]  do_take_over_console from do_fbcon_takeover+0x6c/0xcc<br>[   14.005663]  do_fbcon_takeover from fbcon_fb_registered+0x198/0x1a8<br>[   14.005676]  fbcon_fb_registered from register_framebuffer+0x194/0x264<br>[   14.005687]  register_framebuffer from __drm_fb_helper_initial_config_and_unlock+0x3f4/0x5a8<br>[   14.005701]  __drm_fb_helper_initial_config_and_unlock from drm_fbdev_client_hotplug+0x14c/0x1e8<br>[   14.005714]  drm_fbdev_client_hotplug from drm_fbdev_generic_setup+0xa4/0x190<br>[   14.005727]  drm_fbdev_generic_setup from sun4i_drv_bind+0x118/0x160<br>[   14.005743]  sun4i_drv_bind from try_to_bring_up_aggregate_device+0x168/0x1c4<br>[   14.005757]  try_to_bring_up_aggregate_device from __component_add+0x94/0x138<br>[   14.005768]  __component_add from sun4i_tcon_probe+0x7c/0xa0<br>[   14.005781]  sun4i_tcon_probe from platform_probe+0x5c/0xb0<br>[   14.005796]  platform_probe from really_probe+0xc8/0x2ec<br>[   14.005807]  really_probe from __driver_probe_device+0x84/0xe4<br>[   14.005817]  __driver_probe_device from driver_probe_device+0x30/0x104<br>[   14.005827]  driver_probe_device from __device_attach_driver+0x94/0x108<br>[   14.005838]  __device_attach_driver from bus_for_each_drv+0x88/0xd4<br>[   14.005851]  bus_for_each_drv from __device_attach+0xa8/0x1bc<br>[   14.005864]  __device_attach from bus_probe_device+0x84/0x8c<br>[   14.005876]  bus_probe_device from deferred_probe_work_func+0x78/0xa4<br>[   14.005891]  deferred_probe_work_func from process_one_work+0x1e8/0x3e8<br>[   14.005906]  process_one_work from worker_thread+0x224/0x54c<br>[   14.005917]  worker_thread from kthread+0xd0/0xec<br>[   14.005931]  kthread from ret_from_fork+0x14/0x2c<br>[   14.005943] Exception stack(0xc8835fb0 to 0xc8835ff8)<br>[   14.005950] 5fa0:                                     00000000 00000000 00000000 00000000<br>[   14.005959] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br>[   14.005966] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000<br>[   14.005971] ---[ end trace 0000000000000000 ]---<br>[   15.534461] sun4i-drm display-engine: [drm] fb0: sun4i-drmdrmfb frame buffer device<br></code></pre></td></tr></table></figure></code></pre></details><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat /dev/urandom &gt; /dev/fb0<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">modetest<br></code></pre></td></tr></table></figure><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[root@<span class="hljs-symbol">Huerli</span>]:/$modetest<br>trying to open device <span class="hljs-string">&#x27;i915&#x27;</span>...failed<br>[  <span class="hljs-number">520.125328</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">520.132697</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">520.150332</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">520.157893</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">520.164284</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">520.178921</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">520.186465</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">520.194413</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">520.202136</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">520.209453</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">520.216995</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">520.230344</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">520.245038</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">520.254596</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">520.263426</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">520.272615</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">520.282676</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">520.296583</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">520.307273</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">520.317271</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">520.327037</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">520.335862</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">520.343195</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">520.350596</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">520.358966</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">520.367390</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">520.375192</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00476008</span> <span class="hljs-number">0047767</span>f <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">520.388771</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">004772e8</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">520.402376</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">00030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">520.411883</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;amdgpu&#x27;</span>...failed<br>[  <span class="hljs-number">520.525325</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">520.532733</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">520.550466</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">520.558066</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">520.564471</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">520.579115</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">520.586692</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">520.594727</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">520.602588</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">520.610052</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">520.617731</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">520.631275</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">520.646100</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">520.655758</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">520.664717</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">520.674017</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">520.684165</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">520.698189</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">520.708909</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">520.718918</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">520.728676</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">520.737496</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">520.744820</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">520.752219</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">520.760587</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">520.769004</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">520.776801</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">520.790371</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">520.803965</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">520.813468</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;radeon&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;nouveau&#x27;</span>...failed<br>[  <span class="hljs-number">521.015313</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">521.022708</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">521.040474</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">521.048087</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">521.054512</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">521.069168</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">521.076752</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">521.084795</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">521.092658</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">521.100126</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">521.107810</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">521.121365</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">521.136202</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">521.145867</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">521.154832</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">521.164138</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">521.174292</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">521.188329</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">521.199056</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">521.209068</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">521.218835</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">521.227664</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">521.234998</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">521.242406</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">521.250783</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">521.259213</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">521.267020</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">521.280606</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">521.294215</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">521.303706</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;vmwgfx&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;omapdrm&#x27;</span>...failed<br>[  <span class="hljs-number">521.525313</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">521.532705</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">521.550470</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">521.558074</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">521.564487</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">521.579147</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">521.586734</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">521.594779</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">521.602647</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">521.610120</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">521.617805</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">521.631365</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">521.646206</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">521.655873</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">521.664839</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">521.674145</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">521.684301</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">521.698340</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">521.709065</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">521.719079</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">521.728843</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">521.737669</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">521.745000</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">521.752401</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">521.760778</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">521.769205</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">521.777009</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">521.790596</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">521.804203</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">521.813681</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;exynos&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;tilcdc&#x27;</span>...failed<br>[  <span class="hljs-number">522.025352</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">522.032749</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">522.050516</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">522.058127</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">522.064537</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">522.079196</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">522.086784</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">522.094829</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">522.102697</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">522.110171</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">522.117858</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">522.131420</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">522.146264</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">522.155930</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">522.164897</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">522.174203</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">522.184359</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">522.198401</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">522.209126</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">522.219142</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">522.228906</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">522.237734</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">522.245067</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">522.252473</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">522.260848</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">522.269277</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">522.277082</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">522.290669</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">522.304277</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">522.313781</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;msm&#x27;</span>...failed<br>[  <span class="hljs-number">522.425323</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">522.432732</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">522.450464</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">522.458067</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">522.464481</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">522.479140</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">522.486727</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">522.494770</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">522.502637</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">522.510109</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">522.517795</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">522.531354</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">522.546194</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">522.555860</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">522.564825</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">522.574130</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">522.584284</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">522.598320</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">522.609043</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">522.619056</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">522.628818</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">522.637645</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">522.644974</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">522.652379</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">522.660753</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">522.669179</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">522.676983</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477727</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">522.690567</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477310</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">522.704172</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">200</span>f0030 <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">522.713683</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;sti&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;tegra&#x27;</span>...failed<br>[  <span class="hljs-number">522.915315</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">522.922715</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">522.940476</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">522.948077</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">522.954505</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">522.969160</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">522.976744</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">522.984786</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">522.992653</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">523.000123</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">523.007808</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">523.021364</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">523.036201</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">523.045867</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">523.054834</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">523.064140</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">523.074293</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">523.088329</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">523.099054</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">523.109064</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">523.118825</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">523.127649</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">523.134978</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">523.142380</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">523.150751</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">523.159177</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">523.166981</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477727</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">523.180564</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477310</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">523.194168</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">523.203664</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;imx-drm&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;rockchip&#x27;</span>...failed<br>[  <span class="hljs-number">523.415360</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">523.422742</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">523.440507</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">523.448120</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">523.454542</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">523.469203</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">523.476790</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">523.484836</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">523.492705</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">523.500179</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">523.507864</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">523.521424</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">523.536267</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">523.545933</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">523.554898</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">523.564202</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">523.574356</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">523.588395</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">523.599122</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">523.609136</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">523.618902</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">523.627730</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">523.635062</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">523.642468</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">523.650842</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">523.659270</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">523.667077</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477727</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">523.680665</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477310</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">523.694275</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">523.703775</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;atmel-hlcdc&#x27;</span>...failed<br>[  <span class="hljs-number">523.815325</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">523.822729</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">523.840457</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">523.848057</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">523.854482</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">523.869132</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">523.876713</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">523.884754</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">523.892619</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">523.900085</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">523.907766</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">523.921316</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">523.936149</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">523.945811</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">523.954771</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">523.964071</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">523.974218</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">523.988240</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">523.998957</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">524.008961</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">524.018718</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">524.027540</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">524.034865</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">524.042263</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">524.050631</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">524.059050</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">524.066849</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">524.080425</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">524.094024</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">524.103577</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;fsl-dcu-drm&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;vc4&#x27;</span>...failed<br>[  <span class="hljs-number">524.305310</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">524.312717</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">524.330489</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">524.338119</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">524.344531</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">0</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">524.359187</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">524.366771</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">524.374815</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">524.382683</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">524.390151</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">524.397836</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">524.411393</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">524.426227</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">524.435891</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">524.444860</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">524.454167</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">524.464325</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">524.478365</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">524.489088</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">524.499100</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">524.508862</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">524.517689</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">524.525020</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">524.532426</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">524.540799</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">524.549224</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">524.557030</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">524.570615</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">524.584222</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">524.593717</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;virtio_gpu&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;mediatek&#x27;</span>...failed<br>[  <span class="hljs-number">524.805343</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">524.812726</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">1</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">524.830469</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">524.838079</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">524.844501</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">1</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">524.859168</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">524.866753</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">524.874799</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">524.882667</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">524.890138</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">524.897824</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">524.911384</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">524.926223</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">524.935887</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">524.944853</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">524.954156</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">524.964312</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">524.978346</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">524.989068</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">524.999080</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">525.008843</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">525.017671</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">525.025008</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">525.032420</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">525.040795</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">525.049225</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">525.057033</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477697</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">525.070616</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477380</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">525.084221</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">525.093688</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;meson&#x27;</span>...failed<br>[  <span class="hljs-number">525.205619</span>] ------------[ cut here ]------------<br>[  <span class="hljs-number">525.213019</span>] <span class="hljs-symbol">WARNING</span>: <span class="hljs-symbol">CPU</span>: <span class="hljs-number">1</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> at drivers/gpu/drm/drm_atomic_helper.c:<span class="hljs-number">1596</span> drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">525.230744</span>] [<span class="hljs-symbol">CRTC</span>:<span class="hljs-number">41</span>:crtc<span class="hljs-number">-0</span>] vblank wait timed out<br>[  <span class="hljs-number">525.238357</span>] <span class="hljs-symbol">Modules</span> linked in: <span class="hljs-number">8189</span>fs<br>[  <span class="hljs-number">525.244761</span>] <span class="hljs-symbol">CPU</span>: <span class="hljs-number">1</span> <span class="hljs-symbol">PID</span>: <span class="hljs-number">198</span> <span class="hljs-symbol">Comm</span>: modetest <span class="hljs-symbol">Tainted</span>: <span class="hljs-symbol">G</span>        <span class="hljs-symbol">W</span>          <span class="hljs-number">6.0</span><span class="hljs-number">.1</span>-gd7d8c971c9c5-dirty #<span class="hljs-number">9</span><br>[  <span class="hljs-number">525.259414</span>] <span class="hljs-symbol">Hardware</span> name: <span class="hljs-symbol">Generic</span> <span class="hljs-symbol">DT</span> based system<br>[  <span class="hljs-number">525.266997</span>]  unwind_backtrace from show_stack+<span class="hljs-number">0x10</span>/<span class="hljs-number">0x14</span><br>[  <span class="hljs-number">525.275038</span>]  show_stack from dump_stack_lvl+<span class="hljs-number">0x40</span>/<span class="hljs-number">0x4c</span><br>[  <span class="hljs-number">525.282905</span>]  dump_stack_lvl from <span class="hljs-symbol">__warn</span>+<span class="hljs-number">0xb0</span>/<span class="hljs-number">0xd8</span><br>[  <span class="hljs-number">525.290375</span>]  <span class="hljs-symbol">__warn</span> from warn_slowpath_fmt+<span class="hljs-number">0x98</span>/<span class="hljs-number">0xc8</span><br>[  <span class="hljs-number">525.298059</span>]  warn_slowpath_fmt from drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span>+<span class="hljs-number">0x25c</span>/<span class="hljs-number">0x264</span><br>[  <span class="hljs-number">525.311613</span>]  drm_atomic_helper_wait_for_vblanks.part<span class="hljs-number">.0</span> from drm_atomic_helper_commit_tail_rpm+<span class="hljs-number">0x7c</span>/<span class="hljs-number">0x8c</span><br>[  <span class="hljs-number">525.326445</span>]  drm_atomic_helper_commit_tail_rpm from commit_tail+<span class="hljs-number">0x9c</span>/<span class="hljs-number">0x190</span><br>[  <span class="hljs-number">525.336105</span>]  commit_tail from drm_atomic_helper_commit+<span class="hljs-number">0x134</span>/<span class="hljs-number">0x158</span><br>[  <span class="hljs-number">525.345066</span>]  drm_atomic_helper_commit from drm_atomic_commit+<span class="hljs-number">0xa8</span>/<span class="hljs-number">0xdc</span><br>[  <span class="hljs-number">525.354367</span>]  drm_atomic_commit from drm_client_modeset_commit_atomic+<span class="hljs-number">0x20c</span>/<span class="hljs-number">0x250</span><br>[  <span class="hljs-number">525.364518</span>]  drm_client_modeset_commit_atomic from drm_client_modeset_commit_locked+<span class="hljs-number">0x5c</span>/<span class="hljs-number">0x184</span><br>[  <span class="hljs-number">525.378547</span>]  drm_client_modeset_commit_locked from drm_client_modeset_commit+<span class="hljs-number">0x24</span>/<span class="hljs-number">0x40</span><br>[  <span class="hljs-number">525.389268</span>]  drm_client_modeset_commit from drm_fbdev_client_restore+<span class="hljs-number">0x54</span>/<span class="hljs-number">0x88</span><br>[  <span class="hljs-number">525.399275</span>]  drm_fbdev_client_restore from drm_client_dev_restore+<span class="hljs-number">0x6c</span>/<span class="hljs-number">0xb8</span><br>[  <span class="hljs-number">525.409031</span>]  drm_client_dev_restore from drm_release+<span class="hljs-number">0x128</span>/<span class="hljs-number">0x148</span><br>[  <span class="hljs-number">525.417851</span>]  drm_release from <span class="hljs-symbol">__fput</span>+<span class="hljs-number">0x74</span>/<span class="hljs-number">0x240</span><br>[  <span class="hljs-number">525.425175</span>]  <span class="hljs-symbol">__fput</span> from task_work_run+<span class="hljs-number">0x90</span>/<span class="hljs-number">0xc0</span><br>[  <span class="hljs-number">525.432579</span>]  task_work_run from do_work_pending+<span class="hljs-number">0x49c</span>/<span class="hljs-number">0x4b4</span><br>[  <span class="hljs-number">525.440949</span>]  do_work_pending from slow_work_pending+<span class="hljs-number">0xc</span>/<span class="hljs-number">0x20</span><br>[  <span class="hljs-number">525.449367</span>] <span class="hljs-symbol">Exception</span> stack(<span class="hljs-number">0xc8a8dfb0</span> to <span class="hljs-number">0xc8a8dff8</span>)<br>[  <span class="hljs-number">525.457165</span>] dfa0:                                     <span class="hljs-number">00000000</span> <span class="hljs-number">00477727</span> b6ee47b0 <span class="hljs-number">00000001</span><br>[  <span class="hljs-number">525.470738</span>] dfc0: <span class="hljs-number">00000003</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00477310</span> <span class="hljs-number">00000006</span> <span class="hljs-number">00000000</span> <span class="hljs-number">00000010</span> b6eff43b <span class="hljs-number">00473008</span><br>[  <span class="hljs-number">525.484331</span>] dfe0: <span class="hljs-number">00000006</span> befaf898 b6e83143 b6e02a66 <span class="hljs-number">20030030</span> <span class="hljs-number">00000003</span><br>[  <span class="hljs-number">525.493794</span>] ---[ end trace <span class="hljs-number">0000000000000000</span> ]---<br>trying to open device <span class="hljs-string">&#x27;pl111&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;stm&#x27;</span>...failed<br>trying to open device <span class="hljs-string">&#x27;sun4i-drm&#x27;</span>...done<br><span class="hljs-symbol">Encoders</span>:<br>id      crtc    type    possible crtcs  possible clones<br><span class="hljs-number">42</span>      <span class="hljs-number">41</span>      none    <span class="hljs-number">0x00000001</span>      <span class="hljs-number">0x00000001</span><br><span class="hljs-number">51</span>      <span class="hljs-number">50</span>      <span class="hljs-symbol">TVDAC</span>   <span class="hljs-number">0x00000002</span>      <span class="hljs-number">0x00000002</span><br><span class="hljs-symbol">Connectors</span>:<br>id      encoder status          name            size (mm)       modes   encoders<br><span class="hljs-number">43</span>      <span class="hljs-number">42</span>      connected       <span class="hljs-symbol">Unknown</span><span class="hljs-number">-1</span>       <span class="hljs-number">154</span>x90          <span class="hljs-number">1</span>       <span class="hljs-number">42</span><br>  modes:<br>  index name refresh (<span class="hljs-symbol">Hz</span>) hdisp hss hse htot vdisp vss vse vtot<br>  #<span class="hljs-number">0</span> <span class="hljs-number">1024</span>x600 <span class="hljs-number">38.97</span> <span class="hljs-number">1024</span> <span class="hljs-number">1184</span> <span class="hljs-number">1188</span> <span class="hljs-number">1344</span> <span class="hljs-number">600</span> <span class="hljs-number">617</span> <span class="hljs-number">618</span> <span class="hljs-number">635</span> <span class="hljs-number">33260</span> flags: ; type: preferred, driver<br>  props:<br>        <span class="hljs-number">1</span> <span class="hljs-symbol">EDID</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br>        <span class="hljs-number">2</span> <span class="hljs-symbol">DPMS</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">On</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Standby</span>=<span class="hljs-number">1</span> <span class="hljs-symbol">Suspend</span>=<span class="hljs-number">2</span> <span class="hljs-symbol">Off</span>=<span class="hljs-number">3</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">5</span> link-status:<br>                flags: enum<br>                enums: <span class="hljs-symbol">Good</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Bad</span>=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">6</span> non-desktop:<br>                flags: immutable range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">4</span> <span class="hljs-symbol">TILE</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br><span class="hljs-number">52</span>      <span class="hljs-number">51</span>      connected       <span class="hljs-symbol">Composite</span><span class="hljs-number">-1</span>     <span class="hljs-number">0x0</span>             <span class="hljs-number">2</span>       <span class="hljs-number">51</span><br>  modes:<br>        index name refresh (<span class="hljs-symbol">Hz</span>) hdisp hss hse htot vdisp vss vse vtot<br>  #<span class="hljs-number">0</span> <span class="hljs-symbol">PAL</span> <span class="hljs-number">25.00</span> <span class="hljs-number">720</span> <span class="hljs-number">723</span> <span class="hljs-number">725</span> <span class="hljs-number">864</span> <span class="hljs-number">576</span> <span class="hljs-number">604</span> <span class="hljs-number">606</span> <span class="hljs-number">625</span> <span class="hljs-number">13500</span> flags: interlace; type: driver<br>  #<span class="hljs-number">1</span> <span class="hljs-symbol">NTSC</span> <span class="hljs-number">29.97</span> <span class="hljs-number">720</span> <span class="hljs-number">738</span> <span class="hljs-number">740</span> <span class="hljs-number">858</span> <span class="hljs-number">480</span> <span class="hljs-number">506</span> <span class="hljs-number">508</span> <span class="hljs-number">525</span> <span class="hljs-number">13500</span> flags: interlace; type: driver<br>  props:<br>        <span class="hljs-number">1</span> <span class="hljs-symbol">EDID</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br>        <span class="hljs-number">2</span> <span class="hljs-symbol">DPMS</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">On</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Standby</span>=<span class="hljs-number">1</span> <span class="hljs-symbol">Suspend</span>=<span class="hljs-number">2</span> <span class="hljs-symbol">Off</span>=<span class="hljs-number">3</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">5</span> link-status:<br>                flags: enum<br>                enums: <span class="hljs-symbol">Good</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Bad</span>=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">6</span> non-desktop:<br>                flags: immutable range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">4</span> <span class="hljs-symbol">TILE</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br><span class="hljs-symbol">CRTCs</span>:<br>id      fb      pos     size<br><span class="hljs-number">41</span>      <span class="hljs-number">53</span>      (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)   (<span class="hljs-number">1024</span>x600)<br>  #<span class="hljs-number">0</span> <span class="hljs-number">1024</span>x600 <span class="hljs-number">38.97</span> <span class="hljs-number">1024</span> <span class="hljs-number">1184</span> <span class="hljs-number">1188</span> <span class="hljs-number">1344</span> <span class="hljs-number">600</span> <span class="hljs-number">617</span> <span class="hljs-number">618</span> <span class="hljs-number">635</span> <span class="hljs-number">33260</span> flags: ; type: preferred, driver<br>  props:<br>        <span class="hljs-number">24</span> <span class="hljs-symbol">VRR_ENABLED</span>:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br><span class="hljs-number">50</span>      <span class="hljs-number">53</span>      (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)   (<span class="hljs-number">720</span>x576)<br>  #<span class="hljs-number">0</span> <span class="hljs-symbol">PAL</span> <span class="hljs-number">25.00</span> <span class="hljs-number">720</span> <span class="hljs-number">723</span> <span class="hljs-number">725</span> <span class="hljs-number">864</span> <span class="hljs-number">576</span> <span class="hljs-number">604</span> <span class="hljs-number">606</span> <span class="hljs-number">625</span> <span class="hljs-number">13500</span> flags: interlace; type: driver<br>  props:<br>        <span class="hljs-number">24</span> <span class="hljs-symbol">VRR_ENABLED</span>:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br><span class="hljs-symbol">Planes</span>:<br>id      crtc    fb      <span class="hljs-symbol">CRTC</span> x,y        x,y     gamma size      possible crtcs<br><span class="hljs-number">31</span>      <span class="hljs-number">0</span>       <span class="hljs-number">0</span>       <span class="hljs-number">0</span>,<span class="hljs-number">0</span>             <span class="hljs-number">0</span>,<span class="hljs-number">0</span>     <span class="hljs-number">0</span>               <span class="hljs-number">0x00000001</span><br>  formats: <span class="hljs-symbol">BG16</span> <span class="hljs-symbol">BG24</span> <span class="hljs-symbol">BX12</span> <span class="hljs-symbol">BX15</span> <span class="hljs-symbol">BX24</span> <span class="hljs-symbol">RG16</span> <span class="hljs-symbol">RG24</span> <span class="hljs-symbol">RX12</span> <span class="hljs-symbol">RX15</span> <span class="hljs-symbol">RX24</span> <span class="hljs-symbol">XB15</span> <span class="hljs-symbol">XB12</span> <span class="hljs-symbol">XB24</span> <span class="hljs-symbol">XR15</span> <span class="hljs-symbol">XR12</span> <span class="hljs-symbol">XR24</span> <span class="hljs-symbol">NV16</span> <span class="hljs-symbol">NV12</span> <span class="hljs-symbol">NV21</span> <span class="hljs-symbol">NV61</span> <span class="hljs-symbol">UYVY</span> <span class="hljs-symbol">VYUY</span> <span class="hljs-symbol">YUYV</span> <span class="hljs-symbol">YVYU</span> <span class="hljs-symbol">YU11</span> <span class="hljs-symbol">YU12</span> <span class="hljs-symbol">YU16</span> <span class="hljs-symbol">YV11</span> <span class="hljs-symbol">YV12</span> <span class="hljs-symbol">YV16</span><br>  props:<br>        <span class="hljs-number">8</span> type:<br>                flags: immutable enum<br>                enums: <span class="hljs-symbol">Overlay</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Primary</span>=<span class="hljs-number">1</span> <span class="hljs-symbol">Cursor</span>=<span class="hljs-number">2</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">30</span> <span class="hljs-symbol">IN_FORMATS</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br>                        <span class="hljs-number">01000000000000001e00000018000000</span><br>                        <span class="hljs-number">01000000900000004247313642473234</span><br>                        <span class="hljs-number">42583132425831354258323452473136</span><br>                        <span class="hljs-number">52473234525831325258313552583234</span><br>                        <span class="hljs-number">58423135584231325842323458523135</span><br>                        <span class="hljs-number">58523132585232344e5631364</span>e563132<br>                        <span class="hljs-number">4e5632314</span>e5636315559565956595559<br>                        <span class="hljs-number">59555956595659555955313159553132</span><br>                        <span class="hljs-number">59553136595631315956313259563136</span><br>                        ffffff3f000000000000000000000000<br>                        <span class="hljs-number">0000000000000000</span><br>                in_formats blob decoded:<br>                         <span class="hljs-symbol">BG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV21</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV61</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">UYVY</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">VYUY</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YUYV</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YVYU</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU11</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV11</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV16</span>:  <span class="hljs-symbol">LINEAR</span><br>        <span class="hljs-number">33</span> alpha:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">65535</span><br>                value: <span class="hljs-number">65535</span><br>        <span class="hljs-number">34</span> zpos:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">35</span> <span class="hljs-symbol">COLOR_ENCODING</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">ITU</span>-<span class="hljs-symbol">R</span> <span class="hljs-symbol">BT</span><span class="hljs-number">.601</span> <span class="hljs-symbol">YCbCr</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">ITU</span>-<span class="hljs-symbol">R</span> <span class="hljs-symbol">BT</span><span class="hljs-number">.709</span> <span class="hljs-symbol">YCbCr</span>=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">1</span><br>        <span class="hljs-number">36</span> <span class="hljs-symbol">COLOR_RANGE</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">YCbCr</span> limited range=<span class="hljs-number">0</span> <span class="hljs-symbol">YCbCr</span> full range=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br><span class="hljs-number">37</span>      <span class="hljs-number">41</span>      <span class="hljs-number">53</span>      <span class="hljs-number">0</span>,<span class="hljs-number">0</span>             <span class="hljs-number">0</span>,<span class="hljs-number">0</span>     <span class="hljs-number">0</span>               <span class="hljs-number">0x00000001</span><br>  formats: <span class="hljs-symbol">AB15</span> <span class="hljs-symbol">AB12</span> <span class="hljs-symbol">AB24</span> <span class="hljs-symbol">AR15</span> <span class="hljs-symbol">AR12</span> <span class="hljs-symbol">AR24</span> <span class="hljs-symbol">BG16</span> <span class="hljs-symbol">BG24</span> <span class="hljs-symbol">BA15</span> <span class="hljs-symbol">BA12</span> <span class="hljs-symbol">BA24</span> <span class="hljs-symbol">BX24</span> <span class="hljs-symbol">RG16</span> <span class="hljs-symbol">RG24</span> <span class="hljs-symbol">RA12</span> <span class="hljs-symbol">RA15</span> <span class="hljs-symbol">RA24</span> <span class="hljs-symbol">RX24</span> <span class="hljs-symbol">XB24</span> <span class="hljs-symbol">XR24</span><br>  props:<br>        <span class="hljs-number">8</span> type:<br>                flags: immutable enum<br>                enums: <span class="hljs-symbol">Overlay</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Primary</span>=<span class="hljs-number">1</span> <span class="hljs-symbol">Cursor</span>=<span class="hljs-number">2</span><br>                value: <span class="hljs-number">1</span><br>        <span class="hljs-number">30</span> <span class="hljs-symbol">IN_FORMATS</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br>                        <span class="hljs-number">01000000000000001400000018000000</span><br>                        <span class="hljs-number">01000000680000004142313541423132</span><br>                        <span class="hljs-number">41423234415231354152313241523234</span><br>                        <span class="hljs-number">42473136424732344241313542413132</span><br>                        <span class="hljs-number">42413234425832345247313652473234</span><br>                        <span class="hljs-number">52413132524131355241323452583234</span><br>                        <span class="hljs-number">5842323458523234</span>ffff0f0000000000<br>                        <span class="hljs-number">00000000000000000000000000000000</span><br>                in_formats blob decoded:<br>                         <span class="hljs-symbol">AB15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">AB12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">AB24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">AR15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">AR12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">AR24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BA15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BA12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BA24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RA12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RA15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RA24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR24</span>:  <span class="hljs-symbol">LINEAR</span><br>        <span class="hljs-number">39</span> alpha:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">65535</span><br>                value: <span class="hljs-number">65535</span><br>        <span class="hljs-number">40</span> zpos:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>                value: <span class="hljs-number">1</span><br><span class="hljs-number">44</span>      <span class="hljs-number">50</span>      <span class="hljs-number">53</span>      <span class="hljs-number">0</span>,<span class="hljs-number">0</span>             <span class="hljs-number">0</span>,<span class="hljs-number">0</span>     <span class="hljs-number">0</span>               <span class="hljs-number">0x00000002</span><br>  formats: <span class="hljs-symbol">BG16</span> <span class="hljs-symbol">BG24</span> <span class="hljs-symbol">BX12</span> <span class="hljs-symbol">BX15</span> <span class="hljs-symbol">BX24</span> <span class="hljs-symbol">RG16</span> <span class="hljs-symbol">RG24</span> <span class="hljs-symbol">RX12</span> <span class="hljs-symbol">RX15</span> <span class="hljs-symbol">RX24</span> <span class="hljs-symbol">XB15</span> <span class="hljs-symbol">XB12</span> <span class="hljs-symbol">XB24</span> <span class="hljs-symbol">XR15</span> <span class="hljs-symbol">XR12</span> <span class="hljs-symbol">XR24</span> <span class="hljs-symbol">NV16</span> <span class="hljs-symbol">NV12</span> <span class="hljs-symbol">NV21</span> <span class="hljs-symbol">NV61</span> <span class="hljs-symbol">UYVY</span> <span class="hljs-symbol">VYUY</span> <span class="hljs-symbol">YUYV</span> <span class="hljs-symbol">YVYU</span> <span class="hljs-symbol">YU11</span> <span class="hljs-symbol">YU12</span> <span class="hljs-symbol">YU16</span> <span class="hljs-symbol">YV11</span> <span class="hljs-symbol">YV12</span> <span class="hljs-symbol">YV16</span><br>  props:<br>        <span class="hljs-number">8</span> type:<br>                flags: immutable enum<br>                enums: <span class="hljs-symbol">Overlay</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">Primary</span>=<span class="hljs-number">1</span> <span class="hljs-symbol">Cursor</span>=<span class="hljs-number">2</span><br>                value: <span class="hljs-number">1</span><br>        <span class="hljs-number">30</span> <span class="hljs-symbol">IN_FORMATS</span>:<br>                flags: immutable blob<br>                blobs:<br>                value:<br>                        <span class="hljs-number">01000000000000001e00000018000000</span><br>                        <span class="hljs-number">01000000900000004247313642473234</span><br>                        <span class="hljs-number">42583132425831354258323452473136</span><br>                        <span class="hljs-number">52473234525831325258313552583234</span><br>                        <span class="hljs-number">58423135584231325842323458523135</span><br>                        <span class="hljs-number">58523132585232344e5631364</span>e563132<br>                        <span class="hljs-number">4e5632314</span>e5636315559565956595559<br>                        <span class="hljs-number">59555956595659555955313159553132</span><br>                        <span class="hljs-number">59553136595631315956313259563136</span><br>                        ffffff3f000000000000000000000000<br>                        <span class="hljs-number">0000000000000000</span><br>                in_formats blob decoded:<br>                         <span class="hljs-symbol">BG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">BX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RG24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">RX24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XB24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR15</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">XR24</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV21</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">NV61</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">UYVY</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">VYUY</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YUYV</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YVYU</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU11</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YU16</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV11</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV12</span>:  <span class="hljs-symbol">LINEAR</span><br>                         <span class="hljs-symbol">YV16</span>:  <span class="hljs-symbol">LINEAR</span><br>        <span class="hljs-number">46</span> alpha:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">65535</span><br>                value: <span class="hljs-number">65535</span><br>        <span class="hljs-number">47</span> zpos:<br>                flags: range<br>                values: <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>                value: <span class="hljs-number">0</span><br>        <span class="hljs-number">48</span> <span class="hljs-symbol">COLOR_ENCODING</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">ITU</span>-<span class="hljs-symbol">R</span> <span class="hljs-symbol">BT</span><span class="hljs-number">.601</span> <span class="hljs-symbol">YCbCr</span>=<span class="hljs-number">0</span> <span class="hljs-symbol">ITU</span>-<span class="hljs-symbol">R</span> <span class="hljs-symbol">BT</span><span class="hljs-number">.709</span> <span class="hljs-symbol">YCbCr</span>=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">1</span><br>        <span class="hljs-number">49</span> <span class="hljs-symbol">COLOR_RANGE</span>:<br>                flags: enum<br>                enums: <span class="hljs-symbol">YCbCr</span> limited range=<span class="hljs-number">0</span> <span class="hljs-symbol">YCbCr</span> full range=<span class="hljs-number">1</span><br>                value: <span class="hljs-number">0</span><br><span class="hljs-symbol">Frame</span> buffers:<br>id      size    pitch<br></code></pre></td></tr></table></figure></code></pre></details><p><img src="/img/t113/fb0_err.png"><br>屏幕所处的模式不一样，使用fbset设置一下。<br>将这个命令添加到profile.d&#x2F;myprofile.sh中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">fbset -g 1024 600 1024 600 16<br></code></pre></td></tr></table></figure><h4 id="查看fbset"><a href="#查看fbset" class="headerlink" title="查看fbset"></a>查看fbset</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Huerli]</span>:/$fbset -help<br>BusyBox v1<span class="hljs-number">.36</span><span class="hljs-number">.1</span> (<span class="hljs-number">2023</span><span class="hljs-number">-09</span><span class="hljs-number">-28</span> <span class="hljs-number">12</span>:<span class="hljs-number">38</span>:<span class="hljs-number">45</span> CST) multi-<span class="hljs-built_in">call</span> <span class="hljs-built_in">binary</span>.<br>Usage: fbset [OPTIONS] [MODE]<br>Show <span class="hljs-literal">and</span> modify frame buffer settings<br></code></pre></td></tr></table></figure><h2 id="添加触摸"><a href="#添加触摸" class="headerlink" title="添加触摸"></a>添加触摸</h2><h3 id="kernel-3"><a href="#kernel-3" class="headerlink" title="kernel"></a>kernel</h3><h4 id="勾选触摸驱动"><a href="#勾选触摸驱动" class="headerlink" title="勾选触摸驱动"></a>勾选触摸驱动</h4><p>我的屏幕是goodix的GT911的触摸芯片，所有在内核中选择goodix 的iic驱动</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elm">-&gt; <span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span> <br>    -&gt; <span class="hljs-type">Input</span> device sup<span class="hljs-keyword">port</span> <br>        -&gt; <span class="hljs-type">Touchscreens</span><br>            -&gt; &lt;*&gt;   <span class="hljs-type">Goodix</span> <span class="hljs-type">I2C</span> touchscreen<br></code></pre></td></tr></table></figure><h4 id="添加设备树"><a href="#添加设备树" class="headerlink" title="添加设备树"></a>添加设备树</h4><p>根据原理图，我的gt911是使用的iic2，int使用PB3,RESET使用PB2<br><img src="/img/t113/gt911_b.png"><br>照猫画虎，根据我的观察，在&amp;pio节点下的 1就是代表PB 3就是第三个引脚号，也就是 &amp;pio 1 3 &#x3D;&#x3D; PB3   ，<br>GPIO_ACTIVE_HIGH &#x3D;&#x3D; 初始化时拉高<br>irq-gpios &#x3D; &lt;&amp;pio 1 3 GPIO_ACTIVE_HIGH&gt;;<br>interrupt-parent &#x3D; &lt;&amp;pio&gt;;              gpio的外部中断<br>interrupts &#x3D; &lt;1 3 IRQ_TYPE_EDGE_FALLING&gt;;   PB3的下降沿中断  </p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">&amp;i2c2 &#123;<br>    clock-frequency = <span class="hljs-variable">&lt;400000&gt;</span>;<br>    pinctrl-0 = <span class="hljs-variable">&lt;&amp;i2c2_pe12_pins&gt;</span>;<br>    pinctrl-names = <span class="hljs-string">&quot;default&quot;</span>;<br>    /<span class="hljs-symbol">*</span>dmas = <span class="hljs-variable">&lt;&amp;dma 45&gt;</span>, <span class="hljs-variable">&lt;&amp;dma 45&gt;</span>;<br>    dma-names = <span class="hljs-string">&quot;tx&quot;</span>, <span class="hljs-string">&quot;rx&quot;</span>;<span class="hljs-symbol">*</span>/<br>    status = <span class="hljs-string">&quot;okay&quot;</span>;<br>        gt911:touchscream<span class="hljs-meta">@14</span> &#123;<br>            compatible = <span class="hljs-string">&quot;goodix,gt911&quot;</span>;<br>            reg = <span class="hljs-variable">&lt;0x14&gt;</span>;<br>            interrupt-parent = <span class="hljs-variable">&lt;&amp;pio&gt;</span>;<br>            interrupts = <span class="hljs-variable">&lt;1 3 IRQ_TYPE_EDGE_FALLING&gt;</span>;<br>            status = <span class="hljs-string">&quot;okay&quot;</span>;<br>            irq-gpios = <span class="hljs-variable">&lt;&amp;pio 1 3 GPIO_ACTIVE_HIGH&gt;</span>;<br>            reset-gpios = <span class="hljs-variable">&lt;&amp;pio 1 2  GPIO_ACTIVE_HIGH&gt;</span>;<br>            /<span class="hljs-symbol">*</span> touchscreen-swapped-x-y; <span class="hljs-symbol">*</span>/<br>        &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="/img/t113/gt911_dts.png"></p><h4 id="编译-3"><a href="#编译-3" class="headerlink" title="编译"></a>编译</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make  zImage  dtbs -j6<br></code></pre></td></tr></table></figure><h4 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h4><p>将zImage和dtb文件拷贝到sd卡中。</p><h3 id="buildroot-1"><a href="#buildroot-1" class="headerlink" title="buildroot"></a>buildroot</h3><p>勾选上tslib</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs coq">make menuconfig<br><br>Target packages<br>-&gt;<span class="hljs-keyword">Libraries</span><br>-&gt;Hardware handling<br>-&gt;[*] tslib<br></code></pre></td></tr></table></figure><h4 id="编译-4"><a href="#编译-4" class="headerlink" title="编译"></a>编译</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make<br></code></pre></td></tr></table></figure><h4 id="拷贝-1"><a href="#拷贝-1" class="headerlink" title="拷贝"></a>拷贝</h4><p>tar -axf rootfs.tar</p><h3 id="上电！！！-3"><a href="#上电！！！-3" class="headerlink" title="上电！！！"></a>上电！！！</h3><h4 id="未插屏幕的情况"><a href="#未插屏幕的情况" class="headerlink" title="未插屏幕的情况"></a>未插屏幕的情况</h4><p>在log中会有报错,说iic在指定位置读不到。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[    1.234779] Goodix-TS 0<span class="hljs-string">-0014</span>: Error reading 1 bytes from 0x8140: <span class="hljs-string">-6</span><br>[    1.314710] Goodix-TS 0<span class="hljs-string">-0014</span>: I2C communication failure: <span class="hljs-string">-6</span><br></code></pre></td></tr></table></figure><p>日志如下</p><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><code class="hljs log">[I] AWBoot r6163 starting...<br>[I] SMHC: sdhci0 controller v50310 initialized<br>[I] SHMC: SD card detected<br>[I] FATFS: read sun8i-t113-mangopi-dual.dtb addr=44000000<br>[I] FATFS: read zImage addr=44800000<br>[I] booting linux...<br>▒[    0.000000] Booting Linux on physical CPU 0x0<br>[    0.000000] Linux version 6.0.1-gd7d8c971c9c5-dirty (huerli@huerli) (arm-none-linux-gnueabihf-gcc (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 12.3.1 20230626, GNU ld (Arm GNU Toolchain                                            12.3.Rel1 (Build arm-12.35)) 2.40.0.20230627) #6 SMP Fri Sep 29 14:34:26 CST 2023<br>[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d<br>[    0.000000] CPU: div instructions available: patching division code<br>[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache<br>[    0.000000] OF: fdt: Machine model: MangoPi MQ-Dual<br>[    0.000000] Memory policy: Data cache writealloc<br>[    0.000000] cma: Failed to reserve 72 MiB<br>[    0.000000] Zone ranges:<br>[    0.000000]   Normal   [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000]   HighMem  empty<br>[    0.000000] Movable zone start for each node<br>[    0.000000] Early memory node ranges<br>[    0.000000]   node   0: [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] percpu: Embedded 11 pages/cpu s15508 r8192 d21356 u45056<br>[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 32512<br>[    0.000000] Kernel command line: mem=128M cma=72M root=/dev/mmcblk0p2 init=/sbin/init rootwait console=tty0 console=ttyS5,115200<br>[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes, linear)<br>[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes, linear)<br>[    0.000000] mem auto-init: stack:all(zero), heap alloc:off, heap free:off<br>[    0.000000] Memory: 116232K/131072K available (8192K kernel code, 945K rwdata, 2124K rodata, 1024K init, 264K bss, 14840K reserved, 0K cma-reserved, 0K highmem)<br>[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1<br>[    0.000000] rcu: Hierarchical RCU implementation.<br>[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=8 to nr_cpu_ids=2.<br>[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.<br>[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2<br>[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16<br>[    0.000000] rcu: srcu_init: Setting srcu_struct sizes based on contention.<br>[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).<br>[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns<br>[    0.000001] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns<br>[    0.000013] Switching to timer-based delay loop, resolution 41ns<br>[    0.000187] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns<br>[    0.000686] Console: colour dummy device 80x30<br>[    0.001011] printk: console [tty0] enabled<br>[    0.001053] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=240000)<br>[    0.001084] pid_max: default: 32768 minimum: 301<br>[    0.001245] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001277] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001816] CPU: Testing write buffer coherency: ok<br>[    0.002146] /cpus/cpu@0 missing clock-frequency property<br>[    0.002198] /cpus/cpu@1 missing clock-frequency property<br>[    0.002221] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000<br>[    0.002981] Setting up static identity map for 0x40100000 - 0x40100060<br>[    0.003153] rcu: Hierarchical SRCU implementation.<br>[    0.003174] rcu:     Max phase no-delay instances is 1000.<br>[    0.003699] smp: Bringing up secondary CPUs ...<br>[    0.004400] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001<br>[    0.004521] smp: Brought up 1 node, 2 CPUs<br>[    0.004562] SMP: Total of 2 processors activated (96.00 BogoMIPS).<br>[    0.004578] CPU: All CPU(s) started in SVC mode.<br>[    0.005091] devtmpfs: initialized<br>[    0.009193] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5<br>[    0.009421] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns<br>[    0.009464] futex hash table entries: 512 (order: 3, 32768 bytes, linear)<br>[    0.009616] pinctrl core: initialized pinctrl subsystem<br>[    0.010946] NET: Registered PF_NETLINK/PF_ROUTE protocol family<br>[    0.011258] DMA: preallocated 256 KiB pool for atomic coherent allocations<br>[    0.012037] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;<br>[    0.012277] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.<br>[    0.012326] hw-breakpoint: maximum watchpoint size is 8 bytes.<br>[    0.020723] platform 5460000.tcon-top: Fixing up cyclic dependency with 5200000.mixer<br>[    0.020823] platform 5460000.tcon-top: Fixing up cyclic dependency with 5100000.mixer<br>[    0.021105] platform 5461000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.021484] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5604000.tv-encoder<br>[    0.021557] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.022322] platform 7090000.rtc: Fixing up cyclic dependency with 7010000.clock-controller<br>[    0.032114] SCSI subsystem initialized<br>[    0.032618] usbcore: registered new interface driver usbfs<br>[    0.032691] usbcore: registered new interface driver hub<br>[    0.032742] usbcore: registered new device driver usb<br>[    0.032942] mc: Linux media interface: v0.10<br>[    0.033000] videodev: Linux video capture interface: v2.00<br>[    0.033088] pps_core: LinuxPPS API ver. 1 registered<br>[    0.033104] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;\giometti@linux.it&gt;<br>[    0.033133] PTP clock support registered<br>[    0.033555] Advanced Linux Sound Architecture Driver Initialized.<br>[    0.034735] clocksource: Switched to clocksource arch_sys_counter<br>[    0.041956] NET: Registered PF_INET protocol family<br>[    0.042181] IP idents hash table entries: 2048 (order: 2, 16384 bytes, linear)<br>[    0.042721] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)<br>[    0.042770] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)<br>[    0.042796] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.042824] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)<br>[    0.042854] TCP: Hash tables configured (established 1024 bind 1024)<br>[    0.042945] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.042990] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.043156] NET: Registered PF_UNIX/PF_LOCAL protocol family<br>[    0.043828] RPC: Registered named UNIX socket transport module.<br>[    0.043870] RPC: Registered udp transport module.<br>[    0.043882] RPC: Registered tcp transport module.<br>[    0.043894] RPC: Registered tcp NFSv4.1 backchannel transport module.<br>[    0.045772] Initialise system trusted keyrings<br>[    0.046113] workingset: timestamp_bits=30 max_order=15 bucket_order=0<br>[    0.050882] NFS: Registering the id_resolver key type<br>[    0.050965] Key type id_resolver registered<br>[    0.050980] Key type id_legacy registered<br>[    0.051030] Key type asymmetric registered<br>[    0.051047] Asymmetric key parser &#x27;x509&#x27; registered<br>[    0.051186] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 246)<br>[    0.051211] io scheduler mq-deadline registered<br>[    0.051225] io scheduler kyber registered<br>[    0.107889] Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled<br>[    0.117097] CAN device driver interface<br>[    0.117819] ehci_hcd: USB 2.0 &#x27;Enhanced&#x27; Host Controller (EHCI) Driver<br>[    0.117846] ehci-platform: EHCI generic platform driver<br>[    0.117986] ohci_hcd: USB 1.1 &#x27;Open&#x27; Host Controller (OHCI) Driver<br>[    0.118016] ohci-platform: OHCI generic platform driver<br>[    0.120517] sun6i-rtc 7090000.rtc: registered as rtc0<br>[    0.120669] sun6i-rtc 7090000.rtc: setting system clock to 1970-01-02T00:00:20 UTC (86420)<br>[    0.120821] sun6i-rtc 7090000.rtc: RTC enabled<br>[    0.121150] i2c_dev: i2c /dev entries driver<br>[    0.122997] sunxi-wdt 20500a0.watchdog: Watchdog enabled (timeout=16 sec, nowayout=0)<br>[    0.124134] sun8i-ce 3040000.crypto: Set mod clock to 300000000 (300 Mhz) from 400000000 (400 Mhz)<br>[    0.124461] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.124675] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.124900] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125085] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125206] sun8i-ce 3040000.crypto: Register cbc(aes)<br>[    0.125242] sun8i-ce 3040000.crypto: Register ecb(aes)<br>[    0.125262] sun8i-ce 3040000.crypto: Register cbc(des3_ede)<br>[    0.125282] sun8i-ce 3040000.crypto: Register ecb(des3_ede)<br>[    0.125321] sun8i-ce 3040000.crypto: CryptoEngine Die ID 0<br>[    0.126168] usbcore: registered new interface driver usbhid<br>[    0.126197] usbhid: USB HID core driver<br>[    0.128827] NET: Registered PF_PACKET protocol family<br>[    0.128883] can: controller area network core<br>[    0.128955] NET: Registered PF_CAN protocol family<br>[    0.128973] can: raw protocol<br>[    0.128988] can: broadcast manager protocol<br>[    0.129005] can: netlink gateway - max_hops=1<br>[    0.129210] Key type dns_resolver registered<br>[    0.129317] Registering SWP/SWPB emulation handler<br>[    0.129418] Loading compiled-in X.509 certificates<br>[    0.147331] sun20i-d1-pinctrl 2000000.pinctrl: initialized sunXi PIO driver<br>[    0.168934] 2500400.serial: ttyS1 at MMIO 0x2500400 (irq = 231, base_baud = 1500000) is a 16550A<br>[    0.190657] 2501400.serial: ttyS5 at MMIO 0x2501400 (irq = 232, base_baud = 1500000) is a 16550A<br>[    1.048957] printk: console [ttyS5] enabled<br>[    1.054539] usb_phy_generic usb_phy_generic.1.auto: dummy supplies not allowed for exclusive requests<br>[    1.064396] musb-hdrc musb-hdrc.2.auto: MUSB HDRC host driver<br>[    1.070236] musb-hdrc musb-hdrc.2.auto: new USB bus registered, assigned bus number 1<br>[    1.078916] hub 1-0:1.0: USB hub found<br>[    1.082724] hub 1-0:1.0: 1 port detected<br>[    1.090264] ehci-platform 4200000.usb: EHCI Host Controller<br>[    1.095973] ehci-platform 4200000.usb: new USB bus registered, assigned bus number 2<br>[    1.096459] Goodix-TS 0-0014: supply AVDD28 not found, using dummy regulator<br>[    1.103830] ehci-platform 4200000.usb: irq 235, io mem 0x04200000<br>[    1.110937] Goodix-TS 0-0014: supply VDDIO not found, using dummy regulator<br>[    1.125038] ohci-platform 4200400.usb: Generic Platform OHCI controller<br>[    1.131700] ohci-platform 4200400.usb: new USB bus registered, assigned bus number 3<br>[    1.139621] ohci-platform 4200400.usb: irq 238, io mem 0x04200400<br>[    1.144733] ehci-platform 4200000.usb: USB 2.0 started, EHCI 1.00<br>[    1.152559] hub 2-0:1.0: USB hub found<br>[    1.156405] hub 2-0:1.0: 1 port detected<br>[    1.219363] hub 3-0:1.0: USB hub found<br>[    1.223173] hub 3-0:1.0: 1 port detected<br>[    1.234779] Goodix-TS 0-0014: Error reading 1 bytes from 0x8140: -6<br>[    1.314710] Goodix-TS 0-0014: I2C communication failure: -6<br>[    1.324323] cfg80211: Loading compiled-in X.509 certificates for regulatory database<br>[    1.324340] sunxi-mmc 4020000.mmc: Got CD GPIO<br>[    1.334957] cfg80211: Loaded X.509 cert &#x27;sforshee: 00b28ddf47aef9cea7&#x27;<br>[    1.343355] ALSA device list:<br>[    1.344883] sunxi-mmc 4021000.mmc: allocated mmc-pwrseq<br>[    1.346354]   No soundcards found.<br>[    1.355431] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2<br>[    1.364068] cfg80211: failed to load regulatory.db<br>[    1.364591] sunxi-mmc 4020000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.378110] sunxi-mmc 4021000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.395374] sunxi-mmc 4021000.mmc: card claims to support voltages below defined range<br>[    1.422927] mmc1: new high speed SDIO card at address 0001<br>[    1.450300] mmc0: new high speed SDHC card at address aaaa<br>[    1.456656] mmcblk0: mmc0:aaaa SC32G 29.7 GiB<br>[    1.467062]  mmcblk0: p1 p2<br>[    2.164754] phy phy-4100400.phy.0: Changing dr_mode to 1<br>[    2.170119] ohci-platform 4101400.usb: Generic Platform OHCI controller<br>[    2.176802] ohci-platform 4101400.usb: new USB bus registered, assigned bus number 4<br>[    2.184731] ohci-platform 4101400.usb: irq 237, io mem 0x04101400<br>[    2.259432] hub 4-0:1.0: USB hub found<br>[    2.263238] hub 4-0:1.0: 1 port detected<br>[    2.384804] ehci-platform 4101000.usb: EHCI Host Controller<br>[    2.390429] ehci-platform 4101000.usb: new USB bus registered, assigned bus number 5<br>[    2.398351] ehci-platform 4101000.usb: irq 234, io mem 0x04101000<br>[    2.424724] ehci-platform 4101000.usb: USB 2.0 started, EHCI 1.00<br>[    2.431528] hub 5-0:1.0: USB hub found<br>[    2.435356] hub 5-0:1.0: 1 port detected<br>[    2.447654] EXT4-fs (mmcblk0p2): INFO: recovery required on readonly filesystem<br>[    2.455050] EXT4-fs (mmcblk0p2): write access will be enabled during recovery<br>[    2.624112] EXT4-fs (mmcblk0p2): recovery complete<br>[    2.633681] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Quota mode: disabled.<br>[    2.642672] VFS: Mounted root (ext4 filesystem) readonly on device 179:2.<br>[    2.649665] devtmpfs: mounted<br>[    2.653811] Freeing unused kernel image (initmem) memory: 1024K<br>[    2.659948] Run /sbin/init as init process<br>[    2.852243] EXT4-fs (mmcblk0p2): re-mounted. Quota mode: disabled.<br>Starting syslogd: OK<br>Starting klogd: OK<br>Running sysctl: OK<br>Starting mdev... OK<br>Seeding 256 bits[    3.953104] random: crng init done and crediting<br>Saving 256 bits of creditable seed for next boot<br>Starting network: OK<br>Starting WiFi: Successfully initialized wpa_supplicant<br>udhcpc: started, v1.36.1<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting select for 100.100.162.167, server 100.100.160.1<br>udhcpc: lease of 100.100.162.167 obtained from 100.100.160.1, lease time 3600<br>deleting routers<br>adding dns 61.139.2.69<br>adding dns 218.6.200.139<br>OK<br>Starting sshd: OK<br>Starting vsftpd: OK<br>Welcome to Buildroot<br>Huerli login: root<br>[root@Huerli]:~$poweroff<br>[root@Huerli]:~$Stopping vsftpd: stopped /usr/sbin/vsftpd (pid 178)<br>OK<br>Stopping sshd: OK<br>Stopping WiFi: OK<br>Stopping network: OK<br>Seeding 256 bits and crediting<br>Saving 256 bits of creditable seed for next boot<br>Stopping mdev... stopped process in pidfile &#x27;/var/run/mdev.pid&#x27; (pid 121)<br>OK<br>Stopping klogd: OK<br>Stopping syslogd: OK<br>umount: devtmpfs busy - remounted read-only<br>[   43.091405] EXT4-fs (mmcblk0p2): re-mounted. Quota mode: disabled.<br>The system is going down NOW!<br>Sent SIGTERM to all processes<br>Requesting system poweroff<br>[   45.137554] reboot: System halted<br></code></pre></td></tr></table></figure></code></pre></details>  <h4 id="把触摸屏排线插上"><a href="#把触摸屏排线插上" class="headerlink" title="把触摸屏排线插上"></a>把触摸屏排线插上</h4><p>对于的报错消失</p><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><code class="hljs log2">[I] AWBoot r6163 starting...<br>[I] SMHC: sdhci0 controller v50310 initialized<br>[I] SHMC: SD card detected<br>[I] FATFS: read sun8i-t113-mangopi-dual.dtb addr=44000000<br>[I] FATFS: read zImage addr=44800000<br>[I] AWBoot r6163 starting...<br>[I] SMHC: sdhci0 controller v50310 initialized<br>[I] SHMC: SD card detected<br>[I] FATFS: read sun8i-t113-mangopi-dual.dtb addr=44000000<br>[I] FATFS: read zImage addr=44800000<br>[I] booting linux...<br>[    0.000000] Booting Linux on physical CPU 0x0<br>[    0.000000] Linux version 6.0.1-gd7d8c971c9c5-dirty (huerli@huerli) (arm-none-linux-gnueabihf-gcc (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 12.3.1 20230626, GNU ld (Arm GNU Toolchain                                            12.3.Rel1 (Build arm-12.35)) 2.40.0.20230627) #6 SMP Fri Sep 29 14:34:26 CST 2023<br>[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d<br>[    0.000000] CPU: div instructions available: patching division code<br>[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache<br>[    0.000000] OF: fdt: Machine model: MangoPi MQ-Dual<br>[    0.000000] Memory policy: Data cache writealloc<br>[    0.000000] cma: Failed to reserve 72 MiB<br>[    0.000000] Zone ranges:<br>[    0.000000]   Normal   [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000]   HighMem  empty<br>[    0.000000] Movable zone start for each node<br>[    0.000000] Early memory node ranges<br>[    0.000000]   node   0: [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x0000000047ffffff]<br>[    0.000000] percpu: Embedded 11 pages/cpu s15508 r8192 d21356 u45056<br>[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 32512<br>[    0.000000] Kernel command line: mem=128M cma=72M root=/dev/mmcblk0p2 init=/sbin/init rootwait console=tty0 console=ttyS5,115200<br>[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes, linear)<br>[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes, linear)<br>[    0.000000] mem auto-init: stack:all(zero), heap alloc:off, heap free:off<br>[    0.000000] Memory: 116232K/131072K available (8192K kernel code, 945K rwdata, 2124K rodata, 1024K init, 264K bss, 14840K reserved, 0K cma-reserved, 0K highmem)<br>[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1<br>[    0.000000] rcu: Hierarchical RCU implementation.<br>[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=8 to nr_cpu_ids=2.<br>[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.<br>[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2<br>[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16<br>[    0.000000] rcu: srcu_init: Setting srcu_struct sizes based on contention.<br>[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).<br>[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns<br>[    0.000001] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns<br>[    0.000012] Switching to timer-based delay loop, resolution 41ns<br>[    0.000187] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns<br>[    0.000682] Console: colour dummy device 80x30<br>[    0.000995] printk: console [tty0] enabled<br>[    0.001038] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=240000)<br>[    0.001070] pid_max: default: 32768 minimum: 301<br>[    0.001232] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001263] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.001804] CPU: Testing write buffer coherency: ok<br>[    0.002125] /cpus/cpu@0 missing clock-frequency property<br>[    0.002176] /cpus/cpu@1 missing clock-frequency property<br>[    0.002196] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000<br>[    0.002946] Setting up static identity map for 0x40100000 - 0x40100060<br>[    0.003113] rcu: Hierarchical SRCU implementation.<br>[    0.003135] rcu:     Max phase no-delay instances is 1000.<br>[    0.003664] smp: Bringing up secondary CPUs ...<br>[    0.004355] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001<br>[    0.004477] smp: Brought up 1 node, 2 CPUs<br>[    0.004518] SMP: Total of 2 processors activated (96.00 BogoMIPS).<br>[    0.004534] CPU: All CPU(s) started in SVC mode.<br>[    0.005049] devtmpfs: initialized<br>[    0.009156] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5<br>[    0.009381] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns<br>[    0.009425] futex hash table entries: 512 (order: 3, 32768 bytes, linear)<br>[    0.009574] pinctrl core: initialized pinctrl subsystem<br>[    0.010897] NET: Registered PF_NETLINK/PF_ROUTE protocol family<br>[    0.011211] DMA: preallocated 256 KiB pool for atomic coherent allocations<br>[    0.011995] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;<br>[    0.012237] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.<br>[    0.012285] hw-breakpoint: maximum watchpoint size is 8 bytes.<br>[    0.020677] platform 5460000.tcon-top: Fixing up cyclic dependency with 5200000.mixer<br>[    0.020777] platform 5460000.tcon-top: Fixing up cyclic dependency with 5100000.mixer<br>[    0.021056] platform 5461000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.021431] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5604000.tv-encoder<br>[    0.021506] platform 5470000.lcd-controller: Fixing up cyclic dependency with 5460000.tcon-top<br>[    0.022271] platform 7090000.rtc: Fixing up cyclic dependency with 7010000.clock-controller<br>[    0.032042] SCSI subsystem initialized<br>[    0.032541] usbcore: registered new interface driver usbfs<br>[    0.032615] usbcore: registered new interface driver hub<br>[    0.032664] usbcore: registered new device driver usb<br>[    0.032865] mc: Linux media interface: v0.10<br>[    0.032924] videodev: Linux video capture interface: v2.00<br>[    0.033013] pps_core: LinuxPPS API ver. 1 registered<br>[    0.033031] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;\giometti@linux.it&gt;<br>[    0.033060] PTP clock support registered<br>[    0.033469] Advanced Linux Sound Architecture Driver Initialized.<br>[    0.034640] clocksource: Switched to clocksource arch_sys_counter<br>[    0.041880] NET: Registered PF_INET protocol family<br>[    0.042107] IP idents hash table entries: 2048 (order: 2, 16384 bytes, linear)<br>[    0.042663] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)<br>[    0.042710] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)<br>[    0.042736] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)<br>[    0.042764] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)<br>[    0.042793] TCP: Hash tables configured (established 1024 bind 1024)<br>[    0.042887] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.042931] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)<br>[    0.043097] NET: Registered PF_UNIX/PF_LOCAL protocol family<br>[    0.043770] RPC: Registered named UNIX socket transport module.<br>[    0.043811] RPC: Registered udp transport module.<br>[    0.043824] RPC: Registered tcp transport module.<br>[    0.043835] RPC: Registered tcp NFSv4.1 backchannel transport module.<br>[    0.045716] Initialise system trusted keyrings<br>[    0.046039] workingset: timestamp_bits=30 max_order=15 bucket_order=0<br>[    0.050793] NFS: Registering the id_resolver key type<br>[    0.050876] Key type id_resolver registered<br>[    0.050893] Key type id_legacy registered<br>[    0.050942] Key type asymmetric registered<br>[    0.050957] Asymmetric key parser &#x27;x509&#x27; registered<br>[    0.051084] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 246)<br>[    0.051108] io scheduler mq-deadline registered<br>[    0.051122] io scheduler kyber registered<br>[    0.107709] Serial: 8250/16550 driver, 8 ports, IRQ sharing disabled<br>[    0.117193] CAN device driver interface<br>[    0.117931] ehci_hcd: USB 2.0 &#x27;Enhanced&#x27; Host Controller (EHCI) Driver<br>[    0.117959] ehci-platform: EHCI generic platform driver<br>[    0.118095] ohci_hcd: USB 1.1 &#x27;Open&#x27; Host Controller (OHCI) Driver<br>[    0.118129] ohci-platform: OHCI generic platform driver<br>[    0.120556] sun6i-rtc 7090000.rtc: registered as rtc0<br>[    0.120709] sun6i-rtc 7090000.rtc: setting system clock to 1970-01-02T00:01:06 UTC (86466)<br>[    0.120879] sun6i-rtc 7090000.rtc: RTC enabled<br>[    0.121251] i2c_dev: i2c /dev entries driver<br>[    0.123118] sunxi-wdt 20500a0.watchdog: Watchdog enabled (timeout=16 sec, nowayout=0)<br>[    0.124338] sun8i-ce 3040000.crypto: Set mod clock to 300000000 (300 Mhz) from 400000000 (400 Mhz)<br>[    0.124737] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.124950] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125110] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125254] sun8i-ce 3040000.crypto: will run requests pump with realtime priority<br>[    0.125361] sun8i-ce 3040000.crypto: Register cbc(aes)<br>[    0.125397] sun8i-ce 3040000.crypto: Register ecb(aes)<br>[    0.125418] sun8i-ce 3040000.crypto: Register cbc(des3_ede)<br>[    0.125437] sun8i-ce 3040000.crypto: Register ecb(des3_ede)<br>[    0.125475] sun8i-ce 3040000.crypto: CryptoEngine Die ID 0<br>[    0.126321] usbcore: registered new interface driver usbhid<br>[    0.126352] usbhid: USB HID core driver<br>[    0.128940] NET: Registered PF_PACKET protocol family<br>[    0.128998] can: controller area network core<br>[    0.129073] NET: Registered PF_CAN protocol family<br>[    0.129091] can: raw protocol<br>[    0.129106] can: broadcast manager protocol<br>[    0.129123] can: netlink gateway - max_hops=1<br>[    0.129332] Key type dns_resolver registered<br>[    0.129438] Registering SWP/SWPB emulation handler<br>[    0.129536] Loading compiled-in X.509 certificates<br>[    0.147428] sun20i-d1-pinctrl 2000000.pinctrl: initialized sunXi PIO driver<br>[    0.169006] 2500400.serial: ttyS1 at MMIO 0x2500400 (irq = 231, base_baud = 1500000) is a 16550A<br>[    0.190808] 2501400.serial: ttyS5 at MMIO 0x2501400 (irq = 232, base_baud = 1500000) is a 16550A<br>[    1.049305] printk: console [ttyS5] enabled<br>[    1.055678] phy phy-4100400.phy.0: Changing dr_mode to 1<br>[    1.056748] usb_phy_generic usb_phy_generic.1.auto: dummy supplies not allowed for exclusive requests<br>[    1.061016] ehci-platform 4101000.usb: EHCI Host Controller<br>[    1.070790] musb-hdrc musb-hdrc.2.auto: MUSB HDRC host driver<br>[    1.075845] ehci-platform 4101000.usb: new USB bus registered, assigned bus number 1<br>[    1.081590] musb-hdrc musb-hdrc.2.auto: new USB bus registered, assigned bus number 2<br>[    1.089420] ehci-platform 4101000.usb: irq 233, io mem 0x04101000<br>[    1.097885] hub 2-0:1.0: USB hub found<br>[    1.104152] ehci-platform 4200000.usb: EHCI Host Controller<br>[    1.107088] hub 2-0:1.0: 1 port detected<br>[    1.116212] ohci-platform 4200400.usb: Generic Platform OHCI controller<br>[    1.123275] ohci-platform 4200400.usb: new USB bus registered, assigned bus number 3<br>[    1.131202] ohci-platform 4200400.usb: irq 237, io mem 0x04200400<br>[    1.134741] ehci-platform 4200000.usb: new USB bus registered, assigned bus number 4<br>[    1.137365] ehci-platform 4101000.usb: USB 2.0 started, EHCI 1.00<br>[    1.145152] ehci-platform 4200000.usb: irq 235, io mem 0x04200000<br>[    1.157661] hub 1-0:1.0: USB hub found<br>[    1.161602] hub 1-0:1.0: 1 port detected<br>[    1.162026] Goodix-TS 0-0014: supply AVDD28 not found, using dummy regulator<br>[    1.172785] Goodix-TS 0-0014: supply VDDIO not found, using dummy regulator<br>[    1.184628] ehci-platform 4200000.usb: USB 2.0 started, EHCI 1.00<br>[    1.191422] hub 4-0:1.0: USB hub found<br>[    1.195253] hub 4-0:1.0: 1 port detected<br>[    1.209255] hub 3-0:1.0: USB hub found<br>[    1.213061] hub 3-0:1.0: 1 port detected<br>[    1.295056] Goodix-TS 0-0014: ID 911, version: 1060<br>[    1.302492] Goodix-TS 0-0014: Direct firmware load for goodix_911_cfg.bin failed with error -2<br>[    1.303317] sunxi-mmc 4020000.mmc: Got CD GPIO<br>[    1.312730] sunxi-mmc 4021000.mmc: allocated mmc-pwrseq<br>[    1.316100] ohci-platform 4101400.usb: Generic Platform OHCI controller<br>[    1.321614] cfg80211: Loading compiled-in X.509 certificates for regulatory database<br>[    1.327616] ohci-platform 4101400.usb: new USB bus registered, assigned bus number 5<br>[    1.343315] ohci-platform 4101400.usb: irq 236, io mem 0x04101400<br>[    1.348155] sunxi-mmc 4021000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.358801] input: Goodix Capacitive TouchScreen as /devices/platform/soc/2502800.i2c/i2c-0/0-0014/input/input0<br>[    1.358949] sunxi-mmc 4020000.mmc: initialized, max. request size: 2048 KB, uses new timings mode<br>[    1.380192] cfg80211: Loaded X.509 cert &#x27;sforshee: 00b28ddf47aef9cea7&#x27;<br>[    1.386979] ALSA device list:<br>[    1.389962]   No soundcards found.<br>[    1.393821] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2<br>[    1.407729] sunxi-mmc 4021000.mmc: card claims to support voltages below defined range<br>[    1.429380] hub 5-0:1.0: USB hub found<br>[    1.433214] hub 5-0:1.0: 1 port detected<br>[    1.437899] Waiting for root device /dev/mmcblk0p2...<br>[    1.446443] mmc1: new high speed SDIO card at address 0001<br>[    1.454820] mmc0: new high speed SDHC card at address aaaa<br>[    1.461121] mmcblk0: mmc0:aaaa SC32G 29.7 GiB<br>[    1.471407]  mmcblk0: p1 p2<br>[    1.509376] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Quota mode: disabled.<br>[    1.518387] VFS: Mounted root (ext4 filesystem) readonly on device 179:2.<br>[    1.529543] devtmpfs: mounted<br>[    1.533706] Freeing unused kernel image (initmem) memory: 1024K<br>[    1.539884] Run /sbin/init as init process<br>[    1.746765] EXT4-fs (mmcblk0p2): re-mounted. Quota mode: disabled.<br>Starting syslogd: OK<br>Starting klogd: OK<br>Running sysctl: OK<br>Starting mdev... OK<br>Seeding 256 bits<br>[    2.853662] random: crng init done and crediting<br>Saving 256 bits of creditable seed for next boot<br>Starting network: OK<br>Starting WiFi: Successfully initialized wpa_supplicant<br>udhcpc: started, v1.36.1<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting discover<br>udhcpc: broadcasting select for 100.100.162.167, server 100.100.160.1<br>udhcpc: lease of 100.100.162.167 obtained from 100.100.160.1, lease time 3600<br>deleting routers<br>adding dns 61.139.2.69<br>adding dns 218.6.200.139<br>OK<br>Starting sshd: OK<br>Starting vsftpd: OK<br>Welcome to Buildroot<br>Huerli login: root<br>[root@Huerli]:~$ls<br></code></pre></td></tr></table></figure></code></pre></details><h3 id="使用tslib"><a href="#使用tslib" class="headerlink" title="使用tslib"></a>使用tslib</h3><p>对应的文件被安装在 - &#x2F;usr&#x2F;bin目录下<br>可以打出ts然后多次点击TAB键就会出现对应的命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs log">[root@Huerli]:~$ts<br>ts            ts_finddev    ts_print_mt   ts_test_mt    tsort<br>ts_calibrate  ts_harvest    ts_print_raw  ts_uinput<br>ts_conf       ts_print      ts_test       ts_verify<br>[root@Huerli]:~$ts<br>ts            ts_finddev    ts_print_mt   ts_test_mt    tsort<br>ts_calibrate  ts_harvest    ts_print_raw  ts_uinput<br>ts_conf       ts_print      ts_test       ts_verify<br></code></pre></td></tr></table></figure><p>执行一下 <code>ts_print</code>,打印触摸点</p><table><thead><tr><th align="center">X</th><th align="center">Y</th><th align="center">按下</th></tr></thead><tbody><tr><td align="center">540</td><td align="center">392</td><td align="center">255</td></tr></tbody></table><details><summary>展开查看</summary><pre><code class="hljs"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><code class="hljs log">[root@Huerli]:~$ts_print<br>86489.443429:    540    392    255<br>86489.557154:    538    392    255<br>86489.567517:    533    391    255<br>86489.577816:    522    391    255<br>86489.588170:    503    388    255<br>86489.598432:    481    382    255<br>86489.608744:    460    371    255<br>86489.619147:    443    358    255<br>86489.629458:    431    344    255<br>86489.639863:    423    326    255<br>86489.649861:    416    308    255<br>86489.660509:    411    292    255<br>86489.670887:    407    275    255<br>86489.681187:    402    257    255<br>86489.691527:    397    240    255<br>86489.701894:    394    228    255<br>86489.712200:    393    220    255<br>86489.722532:    395    214    255<br>86489.732908:    400    210    255<br>86489.743244:    406    206    255<br>86489.753622:    416    202    255<br>86489.763992:    428    199    255<br>86489.774233:    442    198    255<br>86489.784568:    453    198    255<br>86489.794980:    465    199    255<br>86489.805283:    475    201    255<br>86489.815625:    486    204    255<br>86489.825888:    498    212    255<br>86489.836201:    510    225    255<br>86489.846577:    520    239    255<br>86489.856991:    527    253    255<br>86489.867328:    533    267    255<br>86489.877598:    537    281    255<br>86489.887943:    541    295    255<br>86489.898342:    545    307    255<br>86489.908683:    548    316    255<br>86489.918981:    549    324    255<br>86489.929324:    549    332    255<br>86489.939670:    548    339    255<br>86489.950004:    546    346    255<br>86489.960344:    543    352    255<br>86489.970713:    540    358    255<br>86489.981126:    535    363    255<br>86489.991291:    527    367    255<br>86490.001601:    517    370    255<br>86490.012009:    506    370    255<br>86490.022352:    496    368    255<br>86490.032341:    487    364    255<br>86490.042681:    479    359    255<br>86490.052980:    470    353      0<br>86490.870054:    851    491    255<br>86490.963098:    850    490    255<br>86490.973423:    847    489    255<br>86490.983796:    841    488    255<br>86490.994093:    824    487    255<br>86491.004470:    805    485    255<br>86491.014729:    785    484    255<br>86491.025098:    767    484    255<br>86491.035480:    754    485    255<br>86491.045800:    742    485    255<br>86491.056140:    731    486    255<br>86491.066538:    719    487    255<br>86491.076742:    705    488    255<br>86491.087137:    691    489    255<br>86491.097475:    677    489    255<br>86491.107782:    662    489    255<br>86491.118182:    646    487    255<br>86491.128494:    631    485    255<br>86491.138823:    617    482    255<br>86491.149167:    604    480    255<br>86491.159465:    591    479    255<br>86491.169802:    578    479    255<br>86491.180143:    566    479    255<br>86491.190478:    554    480    255<br>86491.200857:    543    480    255<br>86491.211165:    531    481    255<br>86491.221541:    517    481    255<br>86491.231849:    504    481    255<br>86491.242184:    493    480    255<br>86491.252495:    483    478    255<br>86491.262902:    473    475    255<br>86491.273214:    463    472    255<br>86491.283612:    452    469    255<br>86491.293851:    442    467    255<br>86491.304219:    432    465    255<br>86491.314492:    424    463    255<br>86491.324894:    416    463    255<br>86491.335230:    408    462    255<br>86491.345573:    398    462    255<br>86491.355837:    388    463    255<br>86491.366250:    377    464    255<br>86491.376582:    368    465    255<br>86491.386926:    359    468    255<br>86491.397223:    350    470    255<br>86491.407606:    341    472    255<br>86491.417867:    331    473    255<br>86491.428213:    320    473    255<br>86491.438617:    310    473    255<br>86491.448960:    301    472    255<br>86491.459306:    292    471    255<br>86491.469710:    283    469    255<br>86491.479945:    274    465    255<br>86491.490242:    263    462    255<br>86491.500655:    252    459    255<br>86491.510885:    242    457    255<br>86491.521228:    234    455    255<br>86491.531625:    228    453    255<br>86491.541618:    225    452    255<br>86491.552335:    222    451    255<br>86491.562678:    218    449    255<br>86491.572943:    212    441    255<br>86491.583320:    203    429    255<br>86491.593655:    194    416    255<br>86491.603999:    185    402    255<br>86491.614297:    180    389    255<br>86491.624635:    176    374    255<br>86491.635000:    174    360    255<br>86491.645378:    173    347    255<br>86491.655606:    172    333    255<br>86491.665983:    170    317    255<br>86491.676321:    167    301    255<br>86491.686697:    165    286    255<br>86491.697007:    164    269    255<br>86491.707380:    164    253    255<br>86491.717859:    164    237    255<br>86491.728060:    164    222    255<br>86491.738303:    164    207    255<br>86491.748672:    165    190    255<br>86491.759018:    166    176    255<br>86491.769355:    169    162    255<br>86491.779699:    173    147    255<br>86491.789966:    177    132    255<br>86491.800313:    182    117    255<br>86491.810646:    188    105    255<br>86491.820987:    195     96    255<br>86491.831386:    203     90    255<br>86491.841683:    211     87    255<br>86491.852016:    220     86    255<br>86491.862349:    232     86    255<br>86491.872691:    244     86    255<br>86491.883040:    257     86    255<br>86491.893425:    270     86    255<br>86491.903693:    282     86    255<br>86491.914038:    296     86    255<br>86491.924441:    311     86    255<br>86491.934921:    325     87    255<br>86491.945116:    340     88    255<br>86491.955428:    355     91    255<br>86491.965792:    372     94    255<br>86491.976132:    388     98    255<br>86491.986501:    405    103    255<br>86491.996774:    422    108    255<br>86492.007103:    439    112    255<br>86492.017479:    455    116    255<br>86492.027810:    472    118    255<br>86492.038151:    488    120    255<br>86492.048518:    506    121    255<br>86492.058786:    522    122    255<br>86492.069160:    539    122    255<br>86492.079491:    557    122    255<br>86492.089792:    574    122    255<br>86492.100168:    590    122    255<br>86492.110464:    606    122    255<br>86492.120868:    623    122    255<br>86492.131209:    639    123    255<br>86492.141502:    655    124    255<br>86492.151977:    671    124    255<br>86492.162181:    686    126    255<br>86492.172513:    701    128    255<br>86492.182855:    716    131    255<br>86492.193182:    731    134    255<br>86492.203522:    746    138    255<br>86492.213854:    760    142    255<br>86492.224264:    774    147    255<br>86492.234559:    785    153    255<br>86492.244862:    795    162    255<br>86492.255225:    806    172    255<br>86492.265636:    815    184    255<br>86492.275929:    824    196    255<br>86492.286235:    832    209    255<br>86492.296569:    838    223    255<br>86492.307012:    842    239    255<br>86492.317268:    846    255    255<br>86492.327572:    850    272    255<br>86492.337970:    852    289    255<br>86492.348311:    853    305    255<br>86492.358610:    853    322    255<br>86492.368745:    851    339    255<br>86492.378872:    849    354    255<br>86492.389206:    847    373      0<br>^C<br></code></pre></td></tr></table></figure></code></pre></details>执行一下```ts_test```<p>ts.conf</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># Access plugins (访问插件)</span><br><span class="hljs-comment">################</span><br><br><span class="hljs-comment"># Uncomment if you wish to use the linux input layer event interface</span><br><span class="hljs-comment"># (如果希望使用linux输入层事件接口，则取消注释)</span><br>module_raw input<br><br><span class="hljs-comment"># For other driver modules, see the ts.conf man page</span><br><span class="hljs-comment"># 对于其他驱动模块，请参阅ts.conf手册页</span><br><br><span class="hljs-comment"># Filter plugins 过滤器插件</span><br><span class="hljs-comment">################</span><br><br><span class="hljs-comment"># Uncomment if first or last samples are unreliable</span><br><span class="hljs-comment"># module skip nhead=1 ntail=1</span><br><br><span class="hljs-comment"># Uncomment if needed for devices that measure pressure</span><br><span class="hljs-comment"># 如果测量压力的设备需要取消注释</span><br>module pthres <span class="hljs-attribute">pmin</span>=1<br><br><span class="hljs-comment"># Uncomment if needed</span><br><span class="hljs-comment"># module debounce drop_threshold=40</span><br><br><span class="hljs-comment"># Uncomment if needed to filter spikes</span><br><span class="hljs-comment">#module median depth=5</span><br><br><span class="hljs-comment"># Uncomment to enable smoothing of fraction N/D</span><br><span class="hljs-comment"># module iir N=6 D=10</span><br><br><span class="hljs-comment"># Uncomment if needed</span><br><span class="hljs-comment"># module lowpass factor=0.1 threshold=1</span><br><br><span class="hljs-comment"># Uncomment if needed to filter noise samples</span><br>module dejitter <span class="hljs-attribute">delta</span>=100<br><br><span class="hljs-comment"># Uncomment to define threshold in number of events from device</span><br><span class="hljs-comment"># module evthres N=5</span><br><br><span class="hljs-comment"># Uncomment and adjust if you need to invert an axis or both</span><br><span class="hljs-comment">#module invert x0=1024 y0=600</span><br><br><span class="hljs-comment"># Uncomment to use ts_calibrate&#x27;s settings</span><br>module linear<br></code></pre></td></tr></table></figure><h2 id="MPU6050"><a href="#MPU6050" class="headerlink" title="MPU6050"></a>MPU6050</h2><h1 id="QT5"><a href="#QT5" class="headerlink" title="QT5"></a>QT5</h1><p>从buildroot勾选编译qt5</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs scss">&gt;  Target packages <br>    &gt; Graphic libraries and applications (graphic/text)<br>        &gt;  <span class="hljs-selector-attr">[*]</span> Qt5  ---&gt;<br>            -*-   qt5base<br>            -*-     Compile and install examples (with code)<br>            <span class="hljs-selector-attr">[*]</span>     concurrent module<br>            <span class="hljs-selector-attr">[*]</span>     MySQL Plugin<br>            <span class="hljs-selector-attr">[*]</span>     PostgreSQL Plugin<br>                  SQLite <span class="hljs-number">3</span> support (No sqlite support)  ---&gt;<br>            -*-     gui module<br>                  -*-     widgets module<br>                  -*-     linuxfb support<br>                  <span class="hljs-selector-attr">[*]</span>     fontconfig support<br>                  <span class="hljs-selector-attr">[*]</span>     harfbuzz support<br>                  <span class="hljs-selector-attr">[*]</span>     GIF support<br>                  <span class="hljs-selector-attr">[*]</span>     JPEG support<br>                  -*-     PNG support<br>                  <span class="hljs-selector-attr">[*]</span>     syslog support<br>                  <span class="hljs-selector-attr">[*]</span>     DBus module<br>                  -*-     Enable ICU support<br>                  <span class="hljs-selector-attr">[*]</span>     Enable Tslib support<br>            <span class="hljs-selector-attr">[*]</span>   qt5charts<br>            <span class="hljs-selector-attr">[*]</span>   qt5coap<br>            -*-   qt5declarative<br>            -*-     quick module<br>            <span class="hljs-selector-attr">[*]</span>   qt5doc (includes quick demos)<br>            <span class="hljs-selector-attr">[*]</span>   qt5enginio<br>            <span class="hljs-selector-attr">[*]</span>   qt5imageformats<br>            <span class="hljs-selector-attr">[*]</span>   qt5knx<br>            -*-   qt5location<br>            <span class="hljs-selector-attr">[*]</span>   qt5lottie<br>            <span class="hljs-selector-attr">[*]</span>   qt5mqtt<br>            <span class="hljs-selector-attr">[*]</span>   qt5multimedia<br>            <span class="hljs-selector-attr">[*]</span>   qt5opcua<br>            <span class="hljs-selector-attr">[*]</span>   qt5quickcontrols2<br>            <span class="hljs-selector-attr">[*]</span>   qt5quicktimeline<br>            <span class="hljs-selector-attr">[*]</span>   qt5remoteobjects<br>            -*-   qt5script<br>            <span class="hljs-selector-attr">[*]</span>   qt5scxml<br>            -*-   qt5sensors<br>            <span class="hljs-selector-attr">[*]</span>   qt5serialbus<br>            -*-   qt5serialport<br>            <span class="hljs-selector-attr">[*]</span>   qt5speech<br>            -*-   qt5svg<br>            -*-   qt5tools<br>            -*-     Linguist host tools (lconvert, lrelease, lupdate)<br>            <span class="hljs-selector-attr">[*]</span>     qdoc host tool<br>            <span class="hljs-selector-attr">[*]</span>     pixeltool<br>            <span class="hljs-selector-attr">[*]</span>     qtdiag<br>            <span class="hljs-selector-attr">[*]</span>     qtpaths<br>            <span class="hljs-selector-attr">[*]</span>   qt5virtualkeyboard<br>            <span class="hljs-selector-attr">[*]</span>     qtplugininfo<br>            (en_GB) language layouts<br>            <span class="hljs-selector-attr">[*]</span>     handwriting<br>            <span class="hljs-selector-attr">[*]</span>     Arrow key navigation<br>            -*-   qt5webchannel<br>            <span class="hljs-selector-attr">[*]</span>   qt5webkit<br>            -*-   qt5websockets<br>            <span class="hljs-selector-attr">[*]</span>   cutelyst<br>            <span class="hljs-selector-attr">[*]</span>   grantlee<br>            <span class="hljs-selector-attr">[*]</span>   KF5  ---&gt;<br>            <span class="hljs-selector-attr">[*]</span>   qextserialport<br>            <span class="hljs-selector-attr">[*]</span>   qjson<br></code></pre></td></tr></table></figure><h1 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h1><p>buildroot勾选python3</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h1 id="一次性配置内核"><a href="#一次性配置内核" class="headerlink" title="一次性配置内核"></a>一次性配置内核</h1><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs elm">- make menuconfig<br>&gt; <span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span> <br>&gt; <span class="hljs-type">Common</span> <span class="hljs-type">Clock</span> <span class="hljs-type">Framework</span><br>&lt;*&gt;   <span class="hljs-type">Clock</span> sup<span class="hljs-keyword">port</span> for Allwinner SoCs<br>&lt;*&gt;     <span class="hljs-type">Support</span> for the <span class="hljs-type">Allwinner</span> <span class="hljs-type">D1</span> <span class="hljs-type">CCU</span> <br>&lt;*&gt;     <span class="hljs-type">Support</span> for the <span class="hljs-type">Allwinner</span> <span class="hljs-type">D1</span> <span class="hljs-type">PRCM</span> <span class="hljs-type">CCU</span><br>   &gt;<span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span><br><span class="hljs-type">Network</span> device sup<span class="hljs-keyword">port</span><br>   <span class="hljs-type">Wireless</span> <span class="hljs-type">LAN</span><br>   [*]   <span class="hljs-type">Realtek</span> devices<br>   &lt;<span class="hljs-type">M</span>&gt;     <span class="hljs-type">Realtek</span> <span class="hljs-number">8189</span>F <span class="hljs-type">SDIO</span> <span class="hljs-type">WiFi</span><br>   &gt;<span class="hljs-type">Networking</span> sup<span class="hljs-keyword">port</span><br>   &lt;*&gt;   <span class="hljs-type">RF</span> switch subsystem sup<span class="hljs-keyword">port</span>  <span class="hljs-comment">----</span><br>   &lt;y&gt;   <span class="hljs-type">GPIO</span> <span class="hljs-type">RFKILL</span> driver<br>       &lt;*&gt;<span class="hljs-type">Wireless</span><br>   &lt;*&gt;   cfg80211 - wireless configuration <span class="hljs-type">API</span><br><br>-&gt; <span class="hljs-type">Device</span> <span class="hljs-type">Drivers</span> <br>    -&gt; <span class="hljs-type">Input</span> device sup<span class="hljs-keyword">port</span> <br>        -&gt; <span class="hljs-type">Touchscreens</span><br>            -&gt; &lt;*&gt;   <span class="hljs-type">Goodix</span> <span class="hljs-type">I2C</span> touchscreen<br></code></pre></td></tr></table></figure><h1 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h1><h2 id="mdev-和eudev"><a href="#mdev-和eudev" class="headerlink" title="mdev 和eudev"></a>mdev 和eudev</h2><p><code>mdev</code> 和 <code>eudev</code> 是 Linux 系统中两个不同的设备管理工具，它们有一些重要区别：</p><ol><li>**<code>mdev</code>**：</li></ol><ul><li><code>mdev</code> 是 BusyBox 工具集的一部分，通常用于嵌入式 Linux 系统或资源受限的环境中。</li><li>它是一个轻量级的设备管理工具，旨在简化设备管理和热插拔支持。</li><li><code>mdev</code> 通常用于启动时从 <code>/proc</code> 和 <code>/sys</code> 等文件系统中读取设备信息，并在 <code>/dev</code> 目录下创建相应的设备节点。</li><li><code>mdev</code> 不提供复杂的自定义规则或事件处理，因此适用于简单的设备管理任务。</li></ul><ol start="2"><li>**<code>eudev</code>**：</li></ol><ul><li><code>eudev</code> 是 <code>udev</code> 的一个分支或替代品，最初是为了解决与 systemd 集成相关的问题而创建的。</li><li><code>eudev</code> 的目标是提供一个独立于 systemd 的 <code>udev</code> 实现，以满足那些不使用 systemd 的 Linux 发行版或用户的需求。</li><li>与 <code>udev</code> 相比，<code>eudev</code> 更加轻量级，没有与 systemd 集成的依赖性。</li><li>它仍然提供了 <code>udev</code> 的强大功能，包括设备检测、设备命名、热插拔支持以及自定义规则和事件处理等。<br>总的来说，<code>mdev</code> 主要用于轻量级嵌入式系统和特定环境，而 <code>eudev</code> 主要用于那些希望在不使用 systemd 的情况下使用 <code>udev</code> 功能的用户。您的选择将取决于您的系统需求和对系统初始化和设备管理的要求。如果您在嵌入式系统或资源有限的环境中工作，<code>mdev</code> 可能是更好的选择。如果您需要一种独立于 systemd 的 <code>udev</code> 实现，<code>eudev</code> 可能是更合适的选项。</li></ul><h1 id="x2F-etc-x2F-profile-d-x2F-myprofile-sh"><a href="#x2F-etc-x2F-profile-d-x2F-myprofile-sh" class="headerlink" title="&#x2F;etc&#x2F;profile.d&#x2F;myprofile.sh"></a>&#x2F;etc&#x2F;profile.d&#x2F;myprofile.sh</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span><br>PS1=<span class="hljs-string">&#x27;[\u@\h]:\w$ &#x27;</span><br><span class="hljs-built_in">export</span> PS1<br>fbset -g 1024 600 1024 600 16<br></code></pre></td></tr></table></figure><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://whycan.com/t_9293.html">在wsl下开发T113的主线linux（最新gcc+awboot+最新kernel+最新buildroot）</a><br><a href="https://bbs.aw-ol.com/topic/2338/mangopi-dual-t113-%E4%B8%BB%E7%BA%BF%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91%E8%AE%B0%E5%BD%95?_=1695871737861&lang=zh-CN">MangoPi Dual T113 主线内核编译记录</a><br><a href="https://bbs.aw-ol.com/topic/2054/mq-quad-h616-%E4%B8%BB%E7%BA%BF%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95-u-boot-kernel-buildroot?_=1695736078740&lang=zh-CN">MQ-Quad H616 主线内核编译调试记录(u-boot、kernel、buildroot)</a><br><a href="https://zhuanlan.zhihu.com/p/425420889">设备树</a><br><a href="https://blog.csdn.net/ohyes158/article/details/79756442">设备树之GPIO和中断实例</a><br><a href="https://blog.csdn.net/qq_35031421/article/details/113436888">tslib</a><br><a href="https://whycan.com/t_5684.html">Lichee-Nano添加电容触摸GT911</a><br><a href="https://zhuanlan.zhihu.com/p/46403145">uImage和zImage的区别</a><br><a href="https://www.gloomyghost.com/live/20220808.aspx">lcd</a><br><a href="https://doc.embedfire.com/linux/stm32mp1/driver/zh/latest/linux_driver/framework_drm.html">drm</a><br><a href="https://blog.csdn.net/picassocao/article/details/129097586">drm</a><br><a href="https://blog.csdn.net/pengrui18/article/details/53638943#:~:text=1%20%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE%20make%20menuconfig%20ARCH%3Darm%201.1%20Networking%20support-%3E,%E5%81%9C%E7%94%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%90%AF%E7%94%A8RFKill%E7%9A%84%E8%AE%BE%E5%A4%87%E3%80%82%20%E6%82%A8%E8%BF%98%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8rfkill%E9%98%BB%E6%96%AD%E6%9F%90%E4%B8%80%E7%B1%BB%E8%AE%BE%E5%A4%87%EF%BC%8C%E6%88%96%E8%80%85%E6%89%80%E6%9C%89%E5%90%AF%E7%94%A8%E4%BA%86RFKill%E7%9A%84%E8%AE%BE%E5%A4%87%E3%80%82%20%E4%BE%8B%E5%A6%82%EF%BC%9A%20rfkill%20block%20wifi%20%E5%81%9C%E7%94%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89Wi-Fi%E8%AE%BE%E5%A4%87%E3%80%82%20">嵌入式linux开发板上增加rfkill命令</a><br><a href="https://wiki.qt.io/Cross-Compile_Qt_6_for_Raspberry_Pi#Further_Readings">qt wiki</a><br><a href="https://doc.embedfire.com/linux/rk356x/Qt/zh/latest/lubancat_qt/install/install_arm_3.html">野火教程</a><br><a href="https://www.cnblogs.com/twzy/p/15160836.html">F1C200S</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>源码编译qt-t113</title>
    <link href="/2023/09/26/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91qt-t113/"/>
    <url>/2023/09/26/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91qt-t113/</url>
    
    <content type="html"><![CDATA[<h1 id="从源码编译qt6-5-2"><a href="#从源码编译qt6-5-2" class="headerlink" title="从源码编译qt6.5.2"></a>从源码编译qt6.5.2</h1><h2 id="添加交叉编译器路径到环境变量"><a href="#添加交叉编译器路径到环境变量" class="headerlink" title="添加交叉编译器路径到环境变量"></a>添加交叉编译器路径到环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">export STAGING_DIR=/home/huerli/Tina-Linux/out/t113-mq_r/staging_dir<br>export PATH=$PATH:/home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin<br></code></pre></td></tr></table></figure><p>查看交叉编译器</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">arm-openwrt-linux-gcc <span class="hljs-comment">--version</span><br></code></pre></td></tr></table></figure><h2 id="源码编译tslib"><a href="#源码编译tslib" class="headerlink" title="源码编译tslib"></a>源码编译tslib</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">- sudo apt-get install automake autoconf libtool libsysfs-dev<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">- cd /home/huerli(你的位置)<br>- git clone https://github.com/libts/tslib.git<br>- cd tslib<br>- ./autogen.sh<br>- mkdir tmp<br>- echo &quot;ac_cv_func_malloc_0_nonnull=yes&quot; &gt; arm-linux.cache<br>- ./configure --host=arm-openwrt-linux -cache-file=arm-linux.cache -prefix=$(pwd)/tmp<br>- make<br>- make install <br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install bison build-essential clang flex gperf libatspi2.0-dev libbluetooth-dev libclang-dev libcups2-dev libdrm-dev libegl1-mesa-dev libfontconfig1-dev libfreetype6-dev libgstreamer1.0-dev libhunspell-dev libnss3-dev libopengl-dev libpulse-dev libssl-dev libts-dev libx11-dev libx11-xcb-dev libxcb-glx0-dev libxcb-icccm4-dev libxcb-image0-dev libxcb-keysyms1-dev libxcb-randr0-dev libxcb-render-util0-dev libxcb-shape0-dev libxcb-shm0-dev libxcb-sync-dev libxcb-util-dev libxcb-xfixes0-dev libxcb-xinerama0-dev libxcb-xkb-dev libxcb1-dev libxcomposite-dev libxcursor-dev libxdamage-dev libxext-dev libxfixes-dev libxi-dev libxkbcommon-dev libxkbcommon-x11-dev libxkbfile-dev libxrandr-dev libxrender-dev libxshmfence-dev libxshmfence1 llvm ninja-build nodejs python-is-python2 python2<br></code></pre></td></tr></table></figure><h2 id="源码编译cmake3-21"><a href="#源码编译cmake3-21" class="headerlink" title="源码编译cmake3.21"></a>源码编译cmake3.21</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">- wget https://github.com/Kitware/CMake/releases/download/v3.27.6/cmake-3.27.6.tar.gz<br>- tar xf cmake-3.27.6.tar.gz<br>- cd cmake-3.27.6<br>- ./configure  <br>- make  <br>- sudo make install  <br>- cmake -version<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">- wget https://mirrors.cloud.tencent.com/qt/archive/qt/6.5/6.5.2/single/qt-everywhere-src-6.5.2.tar.xz<br>- tar xf qt-everywhere-src-6.5.2.tar.xz<br>- cd qt-everywhere-src-6.5.2<br>- vim qtbase/mkspecs/linux-arm-gnueabi-g++/qmake.conf<br></code></pre></td></tr></table></figure><h2 id="编译主机"><a href="#编译主机" class="headerlink" title="编译主机"></a>编译主机</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><p>将代码替换为下方代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs config">#<br># qmake configuration for building with arm-linux-gnueabi-g++<br>#<br><br>MAKEFILE_GENERATOR      = UNIX<br>CONFIG                 += incremental<br>QMAKE_INCREMENTAL_STYLE = sublib<br><br><br>#QT_QPA_DEFAULT_PLATFORM  = linuxfb<br>#QMAKE_CFLAGS   += -O2 -march=armv7-a -mtune=cortex-a7 -mfpu=neon -mfloat-abi=hard<br>#QMAKE_CXXFLAGS      += -O2 -march=armv7-a -mtune=cortex-a7 -mfpu=neon -mfloat-abi=hard<br><br>include(../common/linux.conf)<br>include(../common/gcc-base-unix.conf)<br>include(../common/g++-unix.conf)<br><br># modifications to g++.conf<br>QMAKE_CC                = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-gcc<br>QMAKE_CXX               = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-g++<br>QMAKE_LINK              = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-g++<br>QMAKE_LINK_SHLIB        = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-g++<br><br># modifications to linux.conf<br>QMAKE_AR                = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-ar cqs<br>QMAKE_OBJCOPY           = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-objcopy<br>QMAKE_NM                = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-nm -P<br>QMAKE_STRIP             = /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-strip<br>load(qt_config)<br></code></pre></td></tr></table></figure><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">- ./configure -prefix /opt/qt6.5.2 -opensource -platform linux-arm-gnueabi-g++ -device linux-arm-gnueabi-g++ -no-opengl -nomake examples<br>- cmake --build . --parallel<br>- sudo cmake  --install .<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">- ./configure -prefix /opt/qt6.5.2 -release -opensource -platform arm-openwrt-g++ -device arm-openwrt-g++ -no-opengl -nomake examples -device-option CROSS_COMPILE=arm-openwrt-linux-<br>- cmake --build . --parallel<br>- sudo cmake  --install .<br></code></pre></td></tr></table></figure><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment"># 设置目标系统、处理器架构</span><br><span class="hljs-keyword">set</span>(CMAKE_SYSTEM_NAME Linux)<br><span class="hljs-keyword">set</span>(CMAKE_SYSTEM_PROCESSOR arm)<br><br><span class="hljs-comment"># 设置工具链目录</span><br><br><br><span class="hljs-keyword">set</span>(TOOL_CHAIN_INCLUDE /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/<span class="hljs-keyword">include</span> )<br><span class="hljs-keyword">set</span>(TOOL_CHAIN_LIB  /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/lib )<br><br><span class="hljs-comment"># 设置编译器位置</span><br><span class="hljs-keyword">set</span>(CMAKE_C_COMPILER /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-gcc)<br><span class="hljs-keyword">set</span>(CMAKE_CXX_COMPILER /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-g++)<br><br><span class="hljs-comment"># 设置cmake查找主路径</span><br><span class="hljs-keyword">set</span>(CMAKE_FIND_ROOT_PATH <span class="hljs-variable">$&#123;TOOL_CHAIN_DIR&#125;</span>/aarch64-none-linux-gnu)<br><br><span class="hljs-keyword">set</span>(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)<br><span class="hljs-comment"># 只在指定目录下查找库文件</span><br><span class="hljs-keyword">set</span>(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)<br><span class="hljs-comment"># 只在指定目录下查找头文件</span><br><span class="hljs-keyword">set</span>(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)<br><span class="hljs-comment"># 只在指定目录下查找依赖包</span><br><span class="hljs-keyword">set</span>(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)<br><br><span class="hljs-comment"># 包含工具链文件</span><br><span class="hljs-keyword">include_directories</span>(<br>        /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/<span class="hljs-keyword">include</span>)<br><br><span class="hljs-comment"># 设置CMAKE_INCLUDE_PATH</span><br><span class="hljs-keyword">set</span>(CMAKE_INCLUDE_PATH <span class="hljs-variable">$&#123;TOOL_CHAIN_INCLUDE&#125;</span>)<br><br><span class="hljs-comment"># 设置CMAKE_LIBRARY_PATH</span><br><span class="hljs-keyword">set</span>(CMAKE_LIBRARY_PATH <span class="hljs-variable">$&#123;TOOL_CHAIN_LIB&#125;</span>)<br><br>```[tool-<span class="hljs-number">1</span>.cmake](..%<span class="hljs-number">2</span>F..%<span class="hljs-number">2</span>F..%<span class="hljs-number">2</span>FDesktop%<span class="hljs-number">2</span>FBS%<span class="hljs-number">2</span>Fbs-qt%<span class="hljs-number">2</span>Fqt6.<span class="hljs-number">5.2</span>%<span class="hljs-number">2</span>Ftool-<span class="hljs-number">1</span>.cmake)<br><br><br>../configure -release -opensource -device arm-openwrt-linux-g++ -no-opengl   -prefix /opt/t113-qt-v3  -device-<span class="hljs-keyword">option</span> CROSS_COMPILE=arm-openwrt-linux- -qt-host-path $HOME/qt-host -- -DCMAKE_TOOLCHAIN_FILE=toolchain.cmake<br><br><br><br>../qt5/configure -release -opengl es2 -nomake examples -nomake tests -qt-host-path $HOME/qt-host -extprefix $HOME/qt-raspi -prefix /usr/local/qt6 -device linux-rasp-pi4-aarch64 -device-<span class="hljs-keyword">option</span> CROSS_COMPILE=aarch64-linux-gnu- -- -DCMAKE_TOOLCHAIN_FILE=$HOME/toolchain.cmake -DQT_FEATURE_xcb=<span class="hljs-keyword">ON</span> -DFEATURE_xcb_xlib=<span class="hljs-keyword">ON</span> -DQT_FEATURE_xlib=<span class="hljs-keyword">ON</span><br><span class="hljs-comment">## 查看qmake</span><br>```shell<br>- vim ~/.bashrc<br>写入<br>- <span class="hljs-keyword">export</span> PATH=$PATH:/opt/qt6.<span class="hljs-number">5.2</span>/bin<br>- source ~/.bashrc<br>- qmake -query<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 设置目标系统、处理器架构</span><br>set(CMAKE_SYSTEM_NAME Linux)<br>set(CMAKE_SYSTEM_PROCESSOR arm)<br><br><span class="hljs-comment"># 设置工具链目录</span><br><br><br>set(TOOL_CHAIN_INCLUDE <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl<span class="hljs-regexp">/toolchain/</span>)<br>set(TOOL_CHAIN_LIB  <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl<span class="hljs-regexp">/toolchain/</span>)<br><br><span class="hljs-comment"># 设置编译器位置</span><br>set(CMAKE_C_COMPILER <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl<span class="hljs-regexp">/toolchain/</span>bin/arm-openwrt-linux-gcc.bin)<br>set(CMAKE_CXX_COMPILER <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl<span class="hljs-regexp">/toolchain/</span>bin/arm-openwrt-linux-g++.bin)<br><br><span class="hljs-comment"># 设置cmake查找主路径</span><br>set(CMAKE_FIND_ROOT_PATH <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl)<br><br>set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)<br><span class="hljs-comment"># 只在指定目录下查找库文件</span><br>set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)<br><span class="hljs-comment"># 只在指定目录下查找头文件</span><br>set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)<br><span class="hljs-comment"># 只在指定目录下查找依赖包</span><br>set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)<br><br><span class="hljs-comment"># 包含工具链文件</span><br>include_directories(<br>        <span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/Tina-Linux/</span>prebuilt<span class="hljs-regexp">/gcc/</span>linux-x86<span class="hljs-regexp">/arm/</span>toolchain-sunxi-musl<span class="hljs-regexp">/toolchain/i</span>nclude)<br><br><span class="hljs-comment"># 设置CMAKE_INCLUDE_PATH</span><br>set(CMAKE_INCLUDE_PATH <span class="hljs-variable">$&#123;TOOL_CHAIN_INCLUDE&#125;</span>)<br><br><span class="hljs-comment"># 设置CMAKE_LIBRARY_PATH</span><br>set(CMAKE_LIBRARY_PATH <span class="hljs-variable">$&#123;TOOL_CHAIN_LIB&#125;</span>)<br><br></code></pre></td></tr></table></figure><p><a href="https://wiki.qt.io/Cross-Compile_Qt_6_for_Raspberry_Pi#Further_Readings">qt wiki</a><br><a href="https://doc.embedfire.com/linux/rk356x/Qt/zh/latest/lubancat_qt/install/install_arm_3.html">野火教程</a></p><p>-DQT_FEATURE_xcb&#x3D;ON -DFEATURE_xcb_xlib&#x3D;ON -DQT_FEATURE_xlib&#x3D;ON</p><p>sudo apt-get install libgl1-mesa-dev build-essential libglu1-mesa-dev freeglut3-dev build-essential libgl1-mesa-dev</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs c">cmake_minimum_required(VERSION <span class="hljs-number">3.18</span>)<br>include_guard(GLOBAL)<br><br><span class="hljs-built_in">set</span>(CMAKE_SYSTEM_NAME Linux)<br><span class="hljs-built_in">set</span>(CMAKE_SYSTEM_PROCESSOR arm)<br><br><span class="hljs-built_in">set</span>(TARGET_SYSROOT /home/huerli/t113-sysroot)<br><span class="hljs-built_in">set</span>(CMAKE_SYSROOT $&#123;TARGET_SYSROOT&#125;)<br><br><span class="hljs-built_in">set</span>(ENV&#123;PKG_CONFIG_PATH&#125; $PKG_CONFIG_PATH:/home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux/pkgconfig)<br><span class="hljs-built_in">set</span>(ENV&#123;PKG_CONFIG_LIBDIR&#125; /usr/lib/pkgconfig:/usr/share/pkgconfig/:$&#123;TARGET_SYSROOT&#125;/usr/lib/arm-openwrt-linux/pkgconfig:$&#123;TARGET_SYSROOT&#125;/usr/lib/pkgconfig)<br><span class="hljs-built_in">set</span>(ENV&#123;PKG_CONFIG_SYSROOT_DIR&#125; $&#123;CMAKE_SYSROOT&#125;)<br><br><span class="hljs-meta"># <span class="hljs-keyword">if</span> you use other version of gcc and g++ than gcc/g++ 9, you must change the following variables</span><br><span class="hljs-built_in">set</span>(CMAKE_C_COMPILER /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-gcc)<br><span class="hljs-built_in">set</span>(CMAKE_CXX_COMPILER /home/huerli/Tina-Linux/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-g++)<br><br><span class="hljs-built_in">set</span>(CMAKE_C_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_C_FLAGS&#125; -I$&#123;TARGET_SYSROOT&#125;/usr/include&quot;</span>)<br><span class="hljs-built_in">set</span>(CMAKE_CXX_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_C_FLAGS&#125;&quot;</span>)<br><br><span class="hljs-built_in">set</span>(QT_COMPILER_FLAGS <span class="hljs-string">&quot;-march=armv7-a&quot;</span>)<br><span class="hljs-built_in">set</span>(QT_COMPILER_FLAGS_RELEASE <span class="hljs-string">&quot;-O2 -pipe&quot;</span>)<br><span class="hljs-built_in">set</span>(QT_LINKER_FLAGS <span class="hljs-string">&quot;-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed&quot;</span>)<br><br><span class="hljs-built_in">set</span>(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)<br><span class="hljs-built_in">set</span>(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)<br><span class="hljs-built_in">set</span>(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)<br><span class="hljs-built_in">set</span>(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)<br><span class="hljs-built_in">set</span>(CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)<br><span class="hljs-built_in">set</span>(CMAKE_BUILD_RPATH $&#123;TARGET_SYSROOT&#125;)<br><br><br>include(CMakeInitializeConfigs)<br><br>function(cmake_initialize_per_config_variable _PREFIX _DOCSTRING)<br>  <span class="hljs-keyword">if</span> (_PREFIX MATCHES <span class="hljs-string">&quot;CMAKE_(C|CXX|ASM)_FLAGS&quot;</span>)<br>    <span class="hljs-built_in">set</span>(CMAKE_$&#123;CMAKE_MATCH_1&#125;_FLAGS_INIT <span class="hljs-string">&quot;$&#123;QT_COMPILER_FLAGS&#125;&quot;</span>)<br>        <br>    foreach (config DEBUG RELEASE MINSIZEREL RELWITHDEBINFO)<br>      <span class="hljs-keyword">if</span> (DEFINED QT_COMPILER_FLAGS_$&#123;config&#125;)<br>        <span class="hljs-built_in">set</span>(CMAKE_$&#123;CMAKE_MATCH_1&#125;_FLAGS_$&#123;config&#125;_INIT <span class="hljs-string">&quot;$&#123;QT_COMPILER_FLAGS_$&#123;config&#125;&#125;&quot;</span>)<br>      endif()<br>    endforeach()<br>  endif()<br><br><br>  <span class="hljs-keyword">if</span> (_PREFIX MATCHES <span class="hljs-string">&quot;CMAKE_(SHARED|MODULE|EXE)_LINKER_FLAGS&quot;</span>)<br>    foreach (config SHARED MODULE EXE)<br>      <span class="hljs-built_in">set</span>(CMAKE_$&#123;config&#125;_LINKER_FLAGS_INIT <span class="hljs-string">&quot;$&#123;QT_LINKER_FLAGS&#125;&quot;</span>)<br>    endforeach()<br>  endif()<br><br>  _cmake_initialize_per_config_variable($&#123;ARGV&#125;)<br>endfunction()<br><br><span class="hljs-built_in">set</span>(XCB_PATH_VARIABLE $&#123;TARGET_SYSROOT&#125;)<br><br><span class="hljs-built_in">set</span>(GL_INC_DIR $&#123;TARGET_SYSROOT&#125;/usr/include)<br><span class="hljs-built_in">set</span>(GL_LIB_DIR $&#123;TARGET_SYSROOT&#125;:$&#123;TARGET_SYSROOT&#125;/usr/lib/arm-openwrt-linux/:$&#123;TARGET_SYSROOT&#125;/usr:$&#123;TARGET_SYSROOT&#125;/usr/lib)<br><br><span class="hljs-built_in">set</span>(EGL_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(EGL_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libEGL.so)<br><br><span class="hljs-built_in">set</span>(OPENGL_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(OPENGL_opengl_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libOpenGL.so)<br><br><span class="hljs-built_in">set</span>(GLESv2_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(GLIB_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libGLESv2.so)<br><br><span class="hljs-built_in">set</span>(GLESv2_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(GLESv2_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libGLESv2.so)<br><br><span class="hljs-built_in">set</span>(gbm_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(gbm_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libgbm.so)<br><br><span class="hljs-built_in">set</span>(Libdrm_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(Libdrm_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libdrm.so)<br><br><span class="hljs-built_in">set</span>(XCB_XCB_INCLUDE_DIR $&#123;GL_INC_DIR&#125;)<br><span class="hljs-built_in">set</span>(XCB_XCB_LIBRARY $&#123;XCB_PATH_VARIABLE&#125;/usr/lib/arm-openwrt-linux/libxcb.so)<br></code></pre></td></tr></table></figure><p>&#x2F;home&#x2F;huerli&#x2F;t113&#x2F;arm-none-linux-gnueabihf&#x2F;bin&#x2F;arm-none-linux-gnueabihf-gcc<br>&#x2F;home&#x2F;huerli&#x2F;t113&#x2F;arm-none-linux-gnueabihf&#x2F;bin&#x2F;arm-none-linux-gnueabihf-g++</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>编译T113-tina</title>
    <link href="/2023/09/26/%E7%BC%96%E8%AF%91T113-tina/"/>
    <url>/2023/09/26/%E7%BC%96%E8%AF%91T113-tina/</url>
    
    <content type="html"><![CDATA[<h2 id="安装ssh"><a href="#安装ssh" class="headerlink" title="安装ssh"></a>安装ssh</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install openssh-server openssh-client net-tools<br></code></pre></td></tr></table></figure><h2 id="安装vim"><a href="#安装vim" class="headerlink" title="安装vim"></a>安装vim</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install vim<br></code></pre></td></tr></table></figure><h1 id="编译tina"><a href="#编译tina" class="headerlink" title="编译tina"></a>编译tina</h1><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install build-essential subversion git-core libncurses5-dev zlib1g-dev gawk flex quilt libssl-dev xsltproc libxml-parser-perl mercurial bzr ecj cvs unzip lib32z1 lib32z1-dev lib32stdc++6 libstdc++6 libmpc-dev libgmp-dev -y<br></code></pre></td></tr></table></figure><h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><p>$ git clone  <a href="https://github.com/mangopi-sbc/Tina-Linux.git">https://github.com/mangopi-sbc/Tina-Linux.git</a><br>$ cd Tina-Linux&#x2F;<br>$ git submodule update –init –recursive</p><p>可以采用网盘形式放到指定位置</p><p>&#x2F;&#x2F; download the static file<br>$ wget <a href="http://dl.mangopi.org/tina/prebuilt.tar.gz">http://dl.mangopi.org/tina/prebuilt.tar.gz</a> .<br>$ tar xzvf prebuilt.tar.gz<br>$ wget <a href="http://dl.mangopi.org/tina/dl.tar">http://dl.mangopi.org/tina/dl.tar</a> .<br>$ tar xvf dl.tar<br>$ wget <a href="http://dl.mangopi.org/tina/toolchain/riscv64-linux-x86_64-20200528.tar.xz">http://dl.mangopi.org/tina/toolchain/riscv64-linux-x86_64-20200528.tar.xz</a> -P .&#x2F;lichee&#x2F;brandy-2.0&#x2F;tools&#x2F;toolchain&#x2F;<br>$ wget <a href="http://dl.mangopi.org/tina/toolchain/gcc-linaro-7.2.1-2017.11-x86_64_arm-linux-gnueabi.tar.xz">http://dl.mangopi.org/tina/toolchain/gcc-linaro-7.2.1-2017.11-x86_64_arm-linux-gnueabi.tar.xz</a> -P .&#x2F;lichee&#x2F;brandy-2.0&#x2F;tools&#x2F;toolchain&#x2F;</p><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>$ source build&#x2F;envsetup.sh &amp;&amp; lunch</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"> You&#x27;re building on Linux<br><br>Lunch menu... pick a combo:<br><span class="hljs-bullet">     1.</span> d1<span class="hljs-emphasis">_mq_</span>pro-tina<br><span class="hljs-bullet">     2.</span> d1<span class="hljs-emphasis">_nezha_</span>min-tina<br><span class="hljs-bullet">     3.</span> d1<span class="hljs-emphasis">_nezha-tina</span><br><span class="hljs-emphasis">     4. f133_</span>evb1-tina<br><span class="hljs-bullet">     5.</span> f133<span class="hljs-emphasis">_mq_</span>r-tina<br><span class="hljs-bullet">     6.</span> t113<span class="hljs-emphasis">_evb1-tina</span><br><span class="hljs-emphasis">     7. t113_</span>mq<span class="hljs-emphasis">_r-tina</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">  $ 1 or 5 or 7</span><br><span class="hljs-emphasis">  </span><br><span class="hljs-emphasis">  $ make</span><br><span class="hljs-emphasis">  $ mboot</span><br><span class="hljs-emphasis">  $ pack</span><br><span class="hljs-emphasis">  </span><br><span class="hljs-emphasis">  Tina-Linux/out/d1-mq_</span>pro/tina<span class="hljs-emphasis">_d1-mq_</span>pro<span class="hljs-emphasis">_uart0.img</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>蓝牙</title>
    <link href="/2023/09/26/%E8%93%9D%E7%89%99/"/>
    <url>/2023/09/26/%E8%93%9D%E7%89%99/</url>
    
    <content type="html"><![CDATA[<h1 id="蓝牙配对"><a href="#蓝牙配对" class="headerlink" title="蓝牙配对"></a>蓝牙配对</h1><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><h3 id="模块复位"><a href="#模块复位" class="headerlink" title="模块复位"></a>模块复位</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+RESET</td><td>OK</td><td>无</td></tr></tbody></table><h3 id="恢复默认状态"><a href="#恢复默认状态" class="headerlink" title="恢复默认状态"></a>恢复默认状态</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+ORGL</td><td>OK</td><td>无</td></tr></tbody></table><h3 id="获取-x2F-设置模块地址"><a href="#获取-x2F-设置模块地址" class="headerlink" title="获取&#x2F;设置模块地址"></a>获取&#x2F;设置模块地址</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+ADDR？</td><td>+ADDR：<Param> OK</td><td>Param：模块蓝牙地址</td></tr><tr><td>AT+ADDR&#x3D;&lt;<code>Param</code>&gt;</td><td>OK</td><td>Param：模块蓝牙地址</td></tr></tbody></table><h3 id="获取-x2F-设置模块角色"><a href="#获取-x2F-设置模块角色" class="headerlink" title="获取&#x2F;设置模块角色"></a>获取&#x2F;设置模块角色</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+ROLE</td><td>+ROLE:&lt;<code>Param</code>&gt; <br>OK</br></td><td>1-主机 <br>2-回环</br></td></tr><tr><td>AT+ROLE&#x3D;<Param></td><td>OK</td><td><code>Param</code>： 0-从机（默认）</td></tr></tbody></table><ul><li>从角色——被动连接；</li><li>回环角色——被动连接，接收远程蓝牙主设备数据并将数据原样返回给远程蓝牙主设备；</li><li>主角色——查询周围 SPP 蓝牙从设备，并主动发起连接，从而建立主、从蓝牙设备间的透明数据传输通道。</li></ul><h3 id="获取-x2F-设置模块名称"><a href="#获取-x2F-设置模块名称" class="headerlink" title="获取&#x2F;设置模块名称"></a>获取&#x2F;设置模块名称</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+NAME&#x3D;<Param></td><td>OK</td><td>Param：模块蓝牙名称</td></tr><tr><td>AT+NAME？</td><td>+NAME:&lt;<code>Param</code>&gt; <br>OK</br></td><td>Param：模块蓝牙名称</td></tr></tbody></table><h3 id="获取-x2F-设置串口参数"><a href="#获取-x2F-设置串口参数" class="headerlink" title="获取&#x2F;设置串口参数"></a>获取&#x2F;设置串口参数</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+UART&#x3D;&lt;<code>Param1</code>&gt;,&lt;<code>Param2</code>&gt;,&lt;<code>Param3</code>&gt;</td><td>OK</td><td>Param1：波特率 <br>Param2：停止位</br><br>Param3：校验位</br></td></tr><tr><td>AT+UART?</td><td>+UART&#x3D;&lt;<code>Param1</code>&gt;,&lt;<code>Param2</code>&gt;,&lt;<code>Param3</code>&gt; OK</td><td>（默认：9600，0，0）</td></tr></tbody></table><h3 id="获取-x2F-设置绑定蓝牙地址"><a href="#获取-x2F-设置绑定蓝牙地址" class="headerlink" title="获取&#x2F;设置绑定蓝牙地址"></a>获取&#x2F;设置绑定蓝牙地址</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+BIND&#x3D;<Param></td><td>OK</td><td>Param：绑定蓝牙地址</td></tr><tr><td>AT+ BIND？</td><td>+ BIND:<Param>OK</td><td>Param：绑定蓝牙地址</td></tr></tbody></table><h3 id="获取-x2F-设置蓝牙密码"><a href="#获取-x2F-设置蓝牙密码" class="headerlink" title="获取&#x2F;设置蓝牙密码"></a>获取&#x2F;设置蓝牙密码</h3><table><thead><tr><th>指令</th><th>响应</th><th>参数</th></tr></thead><tbody><tr><td>AT+PSWD&#x3D;<Param></td><td>OK</td><td>Param：蓝牙密码</td></tr><tr><td>AT+ PSWD？</td><td>+ PSWD:<Param>OK</td><td>Param：蓝牙密码</td></tr></tbody></table><h2 id="配对"><a href="#配对" class="headerlink" title="配对"></a>配对</h2><h3 id="恢复出厂设置"><a href="#恢复出厂设置" class="headerlink" title="恢复出厂设置"></a>恢复出厂设置</h3><p>清空以前操作（可选）</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+ORGL<br></code></pre></td></tr></table></figure><h3 id="修改主从角色"><a href="#修改主从角色" class="headerlink" title="修改主从角色"></a>修改主从角色</h3><p>主：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">AT+<span class="hljs-keyword">ROLE</span> <span class="hljs-title">=1</span><br></code></pre></td></tr></table></figure><p>从</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">AT+<span class="hljs-keyword">ROLE</span> <span class="hljs-title">=0</span><br></code></pre></td></tr></table></figure><h3 id="修改名字"><a href="#修改名字" class="headerlink" title="修改名字"></a>修改名字</h3><p>用于区分主从机<br>主：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+NAME = A<br></code></pre></td></tr></table></figure><p>从</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+NAME = B<br></code></pre></td></tr></table></figure><h3 id="修改波特率"><a href="#修改波特率" class="headerlink" title="修改波特率"></a>修改波特率</h3><p>主：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AT</span>+UART=<span class="hljs-number">115200</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>从</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AT</span>+UART=<span class="hljs-number">115200</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><p>主：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+PSWD=<span class="hljs-string">&quot;123456&quot;</span><br></code></pre></td></tr></table></figure><p>从</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+PSWD=<span class="hljs-string">&quot;123456&quot;</span><br></code></pre></td></tr></table></figure><h3 id="查询并绑定地址"><a href="#查询并绑定地址" class="headerlink" title="查询并绑定地址"></a>查询并绑定地址</h3><p>从</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+BIND<br></code></pre></td></tr></table></figure><p>主</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AT</span>+BIND=<span class="hljs-number">21</span>,<span class="hljs-number">13</span>,<span class="hljs-number">522200</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>qt-configure</title>
    <link href="/2023/09/26/qt-configure/"/>
    <url>/2023/09/26/qt-configure/</url>
    
    <content type="html"><![CDATA[<h1 id="qt-configure手册"><a href="#qt-configure手册" class="headerlink" title="qt-configure手册"></a>qt-configure手册</h1><h2 id="qt-configure手册-1"><a href="#qt-configure手册-1" class="headerlink" title="qt-configure手册"></a>qt-configure手册</h2><table><thead><tr><th align="center">options</th><th align="center">用法</th></tr></thead><tbody><tr><td align="center">-prefix &lt;dir&gt;</td><td align="center">部署目录，如目标设备上所示。</td></tr><tr><td align="center">-no-prefix</td><td align="center">部署目录被设置为qtbase构建目录,可以代替-developer-build来避免安装，也可以避免-developer-build默认的-warnings-are-errors。</td></tr><tr><td align="center">-extprefix &lt;dir&gt;</td><td align="center">安装目录，如在主机上看到的。[SYSROOT&#x2F;PREFIX]</td></tr><tr><td align="center">-bindir &lt;dir&gt;</td><td align="center">可执行文件 [PREFIX&#x2F;bin]</td></tr><tr><td align="center">-headerdir &lt;dir&gt;</td><td align="center">头文件 [PREFIX&#x2F;include]</td></tr><tr><td align="center">-libdir &lt;dir&gt;</td><td align="center">库文件 [PREFIX&#x2F;lib]</td></tr><tr><td align="center">-archdatadir &lt;dir&gt;</td><td align="center">依赖于arch的数据 [PREFIX]</td></tr><tr><td align="center">-plugindir &lt;dir&gt;</td><td align="center">插件 [ARCHDATADIR&#x2F;plugins]</td></tr><tr><td align="center">-libexecdir &lt;dir&gt;</td><td align="center">帮助文件 [ARCHDATADIR&#x2F;bin on Windows,ARCHDATADIR&#x2F;libexec otherwise]</td></tr><tr><td align="center">-qmldir &lt;dir&gt;</td><td align="center">QML 导入 [ARCHDATADIR&#x2F;qml]</td></tr><tr><td align="center">-datadir &lt;dir&gt;</td><td align="center">Arch-independent数据 [PREFIX]</td></tr><tr><td align="center">-docdir &lt;dir&gt;</td><td align="center">文档文件夹 [DATADIR&#x2F;doc]</td></tr><tr><td align="center">-translationdir &lt;dir&gt;</td><td align="center">翻译文件 [DATADIR&#x2F;translations]</td></tr><tr><td align="center">-sysconfdir &lt;dir&gt;</td><td align="center">系统设置文件 [PREFIX&#x2F;etc&#x2F;xdg]</td></tr><tr><td align="center">-examplesdir &lt;dir&gt;</td><td align="center">示例文件[PREFIX&#x2F;examples]</td></tr><tr><td align="center">-testsdir &lt;dir&gt;</td><td align="center">测试文件 [PREFIX&#x2F;tests]</td></tr><tr><td align="center">-hostdatadir &lt;dir&gt;</td><td align="center">qmake使用的数据 [PREFIX]</td></tr></tbody></table><p>其余选项的约定:当一个选项的描述后面跟着括号中的值列表时，解释如下:’yes’代表裸选项;所有其他值都可能是选项的前缀，例如-no-gui。或者，也可以指定该值，例如，——gui&#x3D;yes。如果未指定，则按尝试的顺序列出值;’auto’是’yes&#x2F;no’的简写。单独的“yes”和“no”表示没有auto检测的二进制选项。  </p><h3 id="配置源"><a href="#配置源" class="headerlink" title="配置源:"></a>配置源:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-help, -h</td><td align="left">显示帮助菜单</td></tr><tr><td align="left">-redo</td><td align="left">使用以前使用的选项重新配置。另外，redo会删除CMakeCache.txt文件和CMakeFiles&#x2F;目录，并重新创建它们。可以传递其他选项，但不会通过-redo保存以供以后使用。</td></tr><tr><td align="left">-feature-&lt;feature&gt;</td><td align="left">使能&lt;feature&gt;</td></tr><tr><td align="left">-no-feature-&lt;feature&gt;</td><td align="left">失能&lt;feature&gt;</td></tr><tr><td align="left">-list-features</td><td align="left">列出可用的特性。注意，一些特性也有专用的命令行选项。</td></tr></tbody></table><h3 id="构建选项"><a href="#构建选项" class="headerlink" title="构建选项:"></a>构建选项:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-cmake-generator <name></td><td align="left">显式地为CMake指定构建系统生成器，而不是自动检测生成器。</td></tr><tr><td align="left">-cmake-use-default-generator</td><td align="left">关闭CMake构建系统生成器的auto检测。</td></tr><tr><td align="left">-cmake-file-api</td><td align="left">让CMake存储构建元数据以便将构建加载到IDE中。[no; yes if -developer-build]</td></tr><tr><td align="left">-no-guess-compiler</td><td align="left">不要使用目标mkspec中的编译器。</td></tr><tr><td align="left">-release</td><td align="left">在关闭调试的情况下构建Qt  [yes]</td></tr><tr><td align="left">-debug</td><td align="left">在打开调试的情况下构建Qt   [no]</td></tr><tr><td align="left">-debug-and-release</td><td align="left">构建两个版本的Qt，打开和不打开调试开关[yes] (仅限苹果和Windows)</td></tr><tr><td align="left">-optimize-debug</td><td align="left">在调试构建中启用调试友好的优化[auto] (不支持MSVC或Clang工具链)</td></tr><tr><td align="left">-optimize-size</td><td align="left">优化发布版本的大小而不是速度[no]</td></tr><tr><td align="left">-force-debug-info</td><td align="left">为发布版本创建符号文件[no]</td></tr><tr><td align="left">-separate-debug-info</td><td align="left">分割调试信息到单独的文件[no]</td></tr><tr><td align="left">-gdb-index</td><td align="left">索引调试信息，提高GDB的运行速度 [no; auto if -developer-build with debug info]</td></tr><tr><td align="left">-gc-binaries</td><td align="left">将每个函数或数据项放在自己的节中，并启用未使用节的链接器垃圾收集。[auto为静态构建，否则为no]</td></tr><tr><td align="left">-force-asserts</td><td align="left">即使在发布版本中也启用 Q_ASSERT[no]</td></tr><tr><td align="left">-developer-build</td><td align="left">编译并链接Qt以开发Qt本身（导出用于auto测试、额检查等）[no]</td></tr><tr><td align="left">-shared</td><td align="left">构建共享 Qt 库 [yes] (no for UIKit)</td></tr><tr><td align="left">-static</td><td align="left">构建静态 Qt 库[no] (yes for UIKit)</td></tr><tr><td align="left">-framework</td><td align="left">构建 Qt 框架包[yes] (Apple only)</td></tr><tr><td align="left">-platform <target></td><td align="left">为 qmake 配套文件选择 mkspec</td></tr><tr><td align="left">-device <name></td><td align="left">选择 devices&#x2F;mkspec 作为 qmake 配套文件</td></tr><tr><td align="left">-device-option &lt;key&#x3D;value&gt;</td><td align="left">添加设备 mkspec 选项</td></tr><tr><td align="left">-appstore-compliant</td><td align="left">禁用平台应用商店中不允许的代码。 对于默认情况下需要通过应用程序商店分发的平台（特别是 Android、iOS、tvOS 和 watchOS），此功能默认启用。[]auto</td></tr><tr><td align="left">-qt-host-path <path></td><td align="left">指定用于交叉编译的 Qt 主机构建路径。</td></tr><tr><td align="left">-qtnamespace <name></td><td align="left">将所有 Qt 库代码包装在“namespace <name> {…}”中。</td></tr><tr><td align="left">-qtlibinfix <infix></td><td align="left">将所有 libQt6*.so 重命名为 libQt6*<infix>.so</td></tr><tr><td align="left">-testcocoon</td><td align="left">使用 TestCocoon 代码覆盖率工具进行检测 [no]</td></tr><tr><td align="left">-gcov</td><td align="left">配备 GCov 代码覆盖率工具的仪器 [no]</td></tr><tr><td align="left">-trace [backend]</td><td align="left">启用带有跟踪点的检测。 当前支持的后端为“etw”(Windows) 和“lttng”(Linux)，或“yes”用于auto检测。 [no]</td></tr><tr><td align="left">-sanitize {address</td><td align="left">thread</td></tr><tr><td align="left">-mips_dsp&#x2F;-mips_dspr2</td><td align="left">使用MIPS DSP&#x2F;rev2指令 [auto]</td></tr><tr><td align="left">-qreal <type></td><td align="left">类型定义为指定的类型[double].注意:这会影响二进制兼容性。</td></tr><tr><td align="left">-R <string></td><td align="left">为Qt库添加一个显式的运行时库路径。支持相对于LIBDIR的路径。</td></tr><tr><td align="left">-rpath</td><td align="left">使用库安装路径作为运行时库路径链接Qt库和可执行文件。类似于-R LIBDIR。在Apple平台上，禁用此功能意味着对动态库和框架使用绝对安装名(基于LIBDIR)。[auto]</td></tr><tr><td align="left">-reduce-exports</td><td align="left">减少输出符号数量[auto]</td></tr><tr><td align="left">-reduce-relocations</td><td align="left">减少搬迁量[auto] (Unix only)</td></tr><tr><td align="left">-plugin-manifests</td><td align="left">将清单嵌入到插件中 [no] (Windows only)</td></tr><tr><td align="left">-static-runtime</td><td align="left">使用 -static，使用静态运行时 [no] (Windows only)</td></tr><tr><td align="left">-pch</td><td align="left">使用预编译头[auto]</td></tr><tr><td align="left">-ltcg</td><td align="left">使用链接时间代码生成[no]</td></tr><tr><td align="left">-intelcet</td><td align="left">使用英特尔控制流强制技术[no]</td></tr><tr><td align="left">-linker [bfd,gold,lld,mold]</td><td align="left">强制使用 GNU ld、GNU gold、LLVM&#x2F;LLD 或 Mold 链接器而不是默认链接器（仅限 GCC 和 clang）</td></tr><tr><td align="left">-ccache</td><td align="left">使用 ccache 编译器缓存 [no]（仅限 Unix）</td></tr><tr><td align="left">-unity-build</td><td align="left">启用 Unity (Jumbo) 构建</td></tr><tr><td align="left">-unity-build-batch-size <int></td><td align="left">Unity 构建用于创建 Unity 源文件的最大源文件数量 [8]</td></tr><tr><td align="left">-warnings-are-errors</td><td align="left">将警告视为错误 [否； 是的，如果-开发人员构建]</td></tr><tr><td align="left">-disable-deprecated-up-to <version></td><td align="left">将 QT_DISABLE_DEPRECATED_UP_TO 值设置为 &lt;版本&gt;。QT_DISABLE_DEPRECATED_UP_TO 用于从 API 和 ABI 中删除已弃用的方法。 <version> 是一个十六进制值，例如 0x060500 可用于删除 Qt 6.5.0 或更早版本中弃用的所有代码。 默认情况下，<version> 在 Windows 和非 Windows 上分别设置为 0x040000 和 0x050000。</td></tr></tbody></table><h3 id="构建环境"><a href="#构建环境" class="headerlink" title="构建环境"></a>构建环境</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-sysroot &lt;dir&gt;</td><td align="left">将 &lt;dir&gt;设置为目标 sysroot</td></tr><tr><td align="left">-pkg-config</td><td align="left">使用 pkg-config [auto]（仅限 Unix）</td></tr><tr><td align="left">-D &lt;string&gt;</td><td align="left">传递额外的预处理器定义</td></tr><tr><td align="left">-I &lt;string&gt;</td><td align="left">传递附加包含路径</td></tr><tr><td align="left">-L &lt;string&gt;</td><td align="left">传递附加库路径</td></tr><tr><td align="left">-F &lt;string&gt;</td><td align="left">传递附加框架路径（仅限 Apple）</td></tr><tr><td align="left">-sdk &lt;sdk&gt;</td><td align="left">使用 Apple 提供的 SDK &lt;sdk&gt; 构建 Qt。 该参数应该是“xcodebuild -showsdks”列出的可用 SDK 之一。</td></tr><tr><td align="left">-android-sdk path</td><td align="left">设置Android SDK根路径[$ANDROID_SDK_ROOT]</td></tr><tr><td align="left">-android-ndk path</td><td align="left">设置Android NDK根路径[$ANDROID_NDK_ROOT]</td></tr><tr><td align="left">-android-ndk-platform</td><td align="left">设置Android平台</td></tr><tr><td align="left">-android-abis</td><td align="left">只能指定一个ABI，默认为：armeabi-v7a</td></tr><tr><td align="left">-android-javac-target</td><td align="left">设置 javac 构建目标版本 [8]</td></tr><tr><td align="left">-android-javac-source</td><td align="left">设置 javac 构建源版本 [8]</td></tr><tr><td align="left">-android-style-assets</td><td align="left">在运行时auto从设备中提取样式资源。 该选项使Android风格正常运行，但也使Android平台插件与LGPL2.1不兼容。 [yes]</td></tr></tbody></table><h3 id="成分选择"><a href="#成分选择" class="headerlink" title="成分选择"></a>成分选择</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-submodules &lt;repo&gt;[,&lt;repo&gt;]</td><td align="left">构建列出的存储库及其依赖的存储库，而不是所有签出的存储库。 该列表应以逗号分隔，例如 -submodules qtsvg,qtnetworkauth [默认是构建所有签出的存储库]</td></tr><tr><td align="left">-skip &lt;repo&gt;[,&lt;repo&gt;]</td><td align="left">从构建中排除一个或多个整个存储库。 该列表应以逗号分隔。 例如 -跳过 qtimageformats、qtsvg</td></tr><tr><td align="left">-make <part></td><td align="left">将 <part> 添加到要构建的零件列表中。 指定此选项将首先清除默认列表。 （允许值：库、工具、示例、测试、基准测试、手动测试、最小静态测试）[默认值：库和示例，如果不是交叉构建，也是工具，如果 -developer-build 也测试]</td></tr><tr><td align="left">-nomake <part></td><td align="left">从要构建的零件列表中排除 <part>。</td></tr><tr><td align="left">-gui</td><td align="left">构建 Qt GUI 模块和依赖项 [yes]</td></tr><tr><td align="left">-widgets</td><td align="left">构建 Qt Widgets 模块和依赖项 [yes]</td></tr><tr><td align="left">-no-dbus</td><td align="left">不构建 Qt D-Bus 模块 [Android 和 Windows 上默认]</td></tr><tr><td align="left">-dbus-linked</td><td align="left">构建 Qt D-Bus 并链接到 libdbus-1 [auto]</td></tr><tr><td align="left">-dbus-runtime</td><td align="left">构建 Qt D-Bus 并动态加载 libdbus-1 [no]</td></tr><tr><td align="left">-accessibility</td><td align="left">启用辅助功能支持 [yes] 注意：不建议禁用辅助功能。</td></tr></tbody></table><h3 id="核心选项"><a href="#核心选项" class="headerlink" title="核心选项"></a>核心选项</h3><p>Qt 附带了一些第三方库的捆绑副本。 如果相应系统库的auto检测失败，则默认使用这些。</p><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-doubleconversion</td><td align="left">选择使用的双转换库[system&#x2F;qt&#x2F;no] <br>没有暗示使用 sscanf_l 和 snprintf_l （不精确）<br/></td></tr><tr><td align="left">-glib</td><td align="left">启用 Glib 支持 [no; Unix [auto]]</td></tr><tr><td align="left">-eventfd</td><td align="left">启用 eventfd 支持</td></tr><tr><td align="left">-inotify</td><td align="left">启用 inotify 支持</td></tr><tr><td align="left">-icu</td><td align="left">启用 ICU 支持 [auto]</td></tr><tr><td align="left">-pcre</td><td align="left">选择使用的libpcre2 [system&#x2F;qt&#x2F;no]</td></tr><tr><td align="left">-zlib</td><td align="left">选择使用的zlib  [system&#x2F;qt]</td></tr><tr><td align="left">Logging backends: <br> -journald  <br/> <br> -syslog <br/>   <br> -slog2  <br/></td><td align="left"><br>Enable journald support [no] (Unix only)  <br/> <br>Enable syslog support [no] (Unix only)<br/>  <br>Enable slog2 support [auto] (QNX only)<br/></td></tr></tbody></table><h3 id="网络选项"><a href="#网络选项" class="headerlink" title="网络选项"></a>网络选项</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-ssl</td><td align="left">启用任一 SSL 支持方法 [auto]</td></tr><tr><td align="left">-no-openssl</td><td align="left">不要使用 OpenSSL [Apple 上的默认设置]</td></tr><tr><td align="left">-openssl-linked</td><td align="left">使用 OpenSSL 并链接到 libssl [no]</td></tr><tr><td align="left">-openssl-runtime</td><td align="left">使用 OpenSSL 并动态加载 libssl [auto]</td></tr><tr><td align="left">-schannel</td><td align="left">Use Secure Channel [auto] (Windows only)</td></tr><tr><td align="left">-securetransport</td><td align="left">使用 SecureTransport [auto]（仅限 Apple）</td></tr><tr><td align="left">-sctp</td><td align="left">启用 SCTP 支持 [no]</td></tr><tr><td align="left">-libproxy</td><td align="left">启用 libproxy [no]</td></tr><tr><td align="left">-system-proxies</td><td align="left">默认使用系统网络代理[yes]</td></tr></tbody></table><h3 id="gui-printint-wedget选项"><a href="#gui-printint-wedget选项" class="headerlink" title="gui,printint,wedget选项"></a>gui,printint,wedget选项</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-cups</td><td align="left">启用 CUPS 支持 [auto]（仅限 Unix）</td></tr><tr><td align="left">-fontconfig</td><td align="left">启用 Fontconfig 支持 [auto]（仅限 Unix）</td></tr><tr><td align="left">-freetype</td><td align="left">选择使用的FreeType [system&#x2F;qt&#x2F;no]</td></tr><tr><td align="left">-harfbuzz</td><td align="left">选择使用的 HarfBuzz-NG [system&#x2F;qt&#x2F;no]（在 Apple 和 Windows 上不会自动检测）</td></tr><tr><td align="left">-gtk</td><td align="left">启用 GTK 平台主题支持 [auto]</td></tr><tr><td align="left">-no-opengl</td><td align="left">禁用 OpenGL 支持</td></tr><tr><td align="left">-opengl <api></td><td align="left">启用 OpenGL 支持。 支持的 API：es2、桌面（Unix 上默认）、动态（仅限 Windows，Windows 上默认）</td></tr><tr><td align="left">-opengles3</td><td align="left">启用 OpenGL ES 3.x 支持而不是 ES 2.x [自动]</td></tr><tr><td align="left">-egl</td><td align="left">启用 EGL 支持 [自动]</td></tr><tr><td align="left">-qpa <name></td><td align="left">选择默认的 QPA 后端（例如 xcb、cocoa、windows） 用分号分隔的优先级列表。</td></tr><tr><td align="left">-xcb-xlib</td><td align="left">启用 Xcb-Xlib 支持 [auto]</td></tr></tbody></table><h3 id="Platform-backends"><a href="#Platform-backends" class="headerlink" title="Platform backends:"></a>Platform backends:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-direct2d<br/><br>-directfb<br/><br>-eglfs<br/><br>-gbm<br/><br>-kms<br/><br>-linuxfb<br/><br>-xcb <br/></td><td align="left"><br>启用 Direct2D 支持 [auto]（仅限 Windows）<br/><br>启用 DirectFB 支持 [否]（仅限 Unix）<br/><br>启用 EGLFS 支持 [auto; Android 和 Windows 上没有]<br/><br>启用 GBM 后端 [auto]（仅限 Linux）<br/><br>启用 KMS 后端 [auto]（仅限 Linux）<br/><br>Enable Linux Framebuffer support [auto] (Linux only)<br/><br>启用 X11 支持 [auto]（仅限 Linux）<br/></td></tr></tbody></table><h3 id="Input-backends"><a href="#Input-backends" class="headerlink" title="Input backends:"></a>Input backends:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-libudev<br/><br>-evdev<br/><br>-libinput<br/><br>-mtdev<br/><br>-tslib<br/><br>-bundled-xcb-xinput<br/><br>-xkbcommon <br/></td><td align="left"><br>启用 udev 支持 [自动]<br/><br>启用 evdev 支持 [自动]<br/><br>启用 libinput 支持 [自动]<br/><br>启用 mtdev 支持 [自动]<br/><br>启用 tslib 支持 [自动]<br/><br>使用捆绑的 XInput2 支持 [自动]<br/><br>启用键映射支持 [自动]<br/></td></tr></tbody></table><h3 id="Image-formats"><a href="#Image-formats" class="headerlink" title="Image formats:"></a>Image formats:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-gif<br/><br>-ico <br/><br>-libpng <br/><br>-libjpeg <br/></td><td align="left"><br>启用对GIF的读取支持 [auto] <br/><br>启用对ICO的支持[yes]<br/><br> 选择使用的libpng [system&#x2F;qt&#x2F;no] <br/><br>选择libjpeg [system&#x2F;qt&#x2F;no]<br/></td></tr></tbody></table><h3 id="Database-options"><a href="#Database-options" class="headerlink" title="Database options:"></a>Database options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-sql-<driver><br/><br>-sqlite<br/></td><td align="left"><br>启用SQL插件。支持的驱动程序:db2 ibase mysql oci odbc psql sqlite <br/><br>选择使用sqlite [system&#x2F;qt]<br/></td></tr></tbody></table><h3 id="Qt3D-options"><a href="#Qt3D-options" class="headerlink" title="Qt3D options:"></a>Qt3D options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>  -assimp <br/><br>  -qt3d-profile-jobs <br/><br>  -qt3d-profile-gl<br/><br>  -qt3d-simd <br/><br>  -qt3d-render <br/><br> -qt3d-input <br/><br>  -qt3d-logic <br/><br>  -qt3d-extras<br/><br>  -qt3d-animation<br/></td><td align="left"><br>选择已使用的assimp库[system&#x2F;qt&#x2F;no] <br/><br>启用工作剖析[no]<br/><br> 启用OpenGL分析[no] <br/><br>选择SIMD支持级别[no&#x2F;sse2&#x2F;avx2] <br/><br>启用Qt3D渲染方面[是] <br/><br>启用Qt3D输入方面[是] <br/><br> 启用Qt3D逻辑方面[是] <br/><br>启用Qt3D Extras方面[yes] <br/><br>启用Qt3D动画方面[是]<br/></td></tr></tbody></table><h3 id="Further-image-format-options"><a href="#Further-image-format-options" class="headerlink" title="Further image format options:"></a>Further image format options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-jasper <br/><br> -mng <br/><br> -tiff <br/><br>-webp <br/></td><td align="left"><br> 使用JasPer库启用JPEG-2000支持[no]<br/><br> 启用MNG支持[no]<br/><br> 启用TIFF支持[system&#x2F;qt&#x2F;no] <br/><br>启用WEBP支持[system&#x2F;qt&#x2F;no]<br/></td></tr></tbody></table><h3 id="Multimedia-options"><a href="#Multimedia-options" class="headerlink" title="Multimedia options:"></a>Multimedia options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br> -pulseaudio <br/><br> -alsa <br/><br> -no-gstreamer <br/><br> -gstreamer [version] <br/><br> -evr <br/></td><td align="left"><br> 启用PulseAudio支持[auto] (仅限Unix) <br/><br> 启用ALSA支持[auto] (仅限Unix)  <br/><br> 禁用支持GStreamer <br/><br> 启用GStreamer支持[auto]如果没有参数，首先尝试1.0，然后是0.10。 <br/><br>  在WMF中启用EVR[auto]<br/></td></tr></tbody></table><h3 id="QtQuick3D-options"><a href="#QtQuick3D-options" class="headerlink" title="QtQuick3D options:"></a>QtQuick3D options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left">-assimp</td><td align="left">选择已使用的assimp库[system&#x2F;qt&#x2F;no]</td></tr></tbody></table><h3 id="TextToSpeech-options"><a href="#TextToSpeech-options" class="headerlink" title="TextToSpeech options:"></a>TextToSpeech options:</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-flite <br/><br> -flite-alsa <br/><br> -speechd<br/></td><td align="left"><br>启用Flite支持[auto] (仅限Unix) <br/><br>启用Flite与ALSA支持[auto] (仅限Unix) <br/><br>启用语音调度器支持[auto] (仅限Unix)<br/></td></tr></tbody></table><h3 id="WebEngine-options"><a href="#WebEngine-options" class="headerlink" title="WebEngine options"></a>WebEngine options</h3><table><thead><tr><th align="left">options</th><th align="left">用法</th></tr></thead><tbody><tr><td align="left"><br>-webengine-alsa <br/> <br>  -webengine-pulseaudio <br/><br>  -webengine-embedded-build <br/><br>  -webengine-icu  <br/><br>  -webengine-ffmpeg  <br/><br>  -webengine-opus <br/><br>  -webengine-webp <br/><br>  -webengine-pepper-plugins <br/><br>-webengine-printing-and-pdf <br/> <br>  -webengine-proprietary-codecs  <br/><br>  -webengine-spellchecker <br/><br>-webengine-native-spellchecker <br/><br>  -webengine-webrtc <br/></td><td align="left"><br> 启用ALSA支持[auto] (仅限Linux) <br/><br>启用PulseAudio支持[auto] (仅限Linux)<br/><br> 启用Linux嵌入式构建[auto] (仅限Linux) <br/><br> 使用系统ICU库[system&#x2F;qt] (仅限Linux) <br/><br>使用系统FFmpeg库[system&#x2F;qt] (仅限Linux) <br/><br>使用系统Opus库[system&#x2F;qt] (仅限Linux) <br/><br>使用系统WebP库[system&#x2F;qt] (仅限Linux)<br/><br> 启用Pepper Flash和Widevine插件[auto] <br/><br>启用列印及输出至PDF[自动]<br/><br> 启用对专有编解码器的支持[no] <br/><br>启用拼写检查器支持[yes] <br/><br>启用对本机拼写检查器的支持[no] (仅限macOS)<br/><br> 启用对WebRTC的支持 [auto]<br/></td></tr></tbody></table><h1 id="组件详解"><a href="#组件详解" class="headerlink" title="组件详解"></a>组件详解</h1><h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><p>SSL是Secure Sockets Layer（安全套接层协议）的缩写。在计算机网络上，OpenSSL是一个开放源代码的软件库包，应用程序可以使用这个包来进行安全通信，避免窃听，同时确认另一端连接者的身份。这个包广泛被应用在互联网的网页服务器上。<br>SSL能使用户&#x2F;服务器应用之间的通信不被攻击者窃听，并且始终对服务器进行认证，还可选择对用户进行认证。SSL协议要求建立在可靠的传输层协议(TCP)之上。SSL协议的优势在于它是与应用层协议独立无关的，高层的应用层协议(例如：HTTP，FTP，TELNET等)能透明地建立于SSL协议之上。SSL协议在应用层协议通信之前就已经完成加密算法、通信密钥的协商及服务器认证工作。在此之后应用层协议所传送的数据都会被加密，从而保证通信的私密性。<br>SSL是利用公开密钥的加密技术（RSA）来作为用户端与服务器端在传送机密资料时的加密通讯协定。<br>OpenSSL采用C语言作为开发语言，这使得OpenSSL具有优秀的跨平台性。<br>OpenSSL整个软件包大概可以分成三个主要的功能部分：SSL协议库、应用程序以及密码算法库（对称加密，如AES，非对称加密）。<br>OpenSSL一共实现了4种非对称加密算法，包括DH算法、RSA算法、DSA算法和椭圆曲线算法（EC）。DH算法一般用于密钥交换。RSA算法既可以用于密钥交换，也可以用于数字签名，当然，如果你能够忍受其缓慢的速度，那么也可以用于数据加密。DSA算法则一般只用于数字签名。<br>OpenSSL实现了5种信息摘要算法，分别是MD2、MD5、MDC2、SHA（SHA1）和RIPEMD。SHA算法事实上包括了SHA和SHA1两种信息摘要算法。此外，OpenSSL还实现了DSS标准中规定的两种信息摘要算法DSS和DSS1。  </p><h2 id="mqtt"><a href="#mqtt" class="headerlink" title="mqtt"></a>mqtt</h2><h2 id="Glib"><a href="#Glib" class="headerlink" title="Glib"></a>Glib</h2><h2 id="eventfd"><a href="#eventfd" class="headerlink" title="eventfd"></a>eventfd</h2><h2 id="inotify"><a href="#inotify" class="headerlink" title="inotify"></a>inotify</h2><h2 id="ICU"><a href="#ICU" class="headerlink" title="ICU"></a>ICU</h2><h2 id="libpcre2"><a href="#libpcre2" class="headerlink" title="libpcre2"></a>libpcre2</h2><h2 id="zlib"><a href="#zlib" class="headerlink" title="zlib"></a>zlib</h2><h2 id="journald"><a href="#journald" class="headerlink" title="journald"></a>journald</h2><h2 id="syslog"><a href="#syslog" class="headerlink" title="syslog"></a>syslog</h2><h2 id="slog2"><a href="#slog2" class="headerlink" title="slog2"></a>slog2</h2><h2 id="Fontconfig"><a href="#Fontconfig" class="headerlink" title="Fontconfig"></a>Fontconfig</h2><h2 id="FreeType"><a href="#FreeType" class="headerlink" title="FreeType"></a>FreeType</h2><h2 id="HarfBuzz-NG"><a href="#HarfBuzz-NG" class="headerlink" title="HarfBuzz-NG"></a>HarfBuzz-NG</h2><h2 id="GTK"><a href="#GTK" class="headerlink" title="GTK"></a>GTK</h2><p>GTK(GIMPTooKit)原本只是GIMP开发过程中用来管理图型界面的一套工具程序库.由于它使用LGPL声明,程序的开发者可以免费使用它来开发公共程序软件,免费软件或甚至商用软件.随者使用率及使用范围的增大,很快的GTK从只为了满足GIMP需求而存在的印象中跳出,发展成今日功能广泛的一套程序库.<br>GTK的稳定版已从1.2发行到现在的2.0.1.2版基本上只有GLIB跟GTK+两个组件,而GTK中另含有GDK(GIMP Drawing Kit)程疗库.一般我们直接使用的是GTK.其中几乎所有绘图功能都是透过GDK来完成的.GDK主要负责和×Window的程序库做低层的沟通.它也提供较为简化的程序界面给GTK使用. glib是最低层的程序库.它主要的功能是与系统上的 C library.打交道从而给予程序设计者一个一致的环境,不需为了各个UNIX系统上的些许不同而顾虑.2.0除了修改1.2之外，还增加了ATK(Accessibility Tool Kit)和Pango (pan希腊”全部”, go日文”语”).透过ATK使得在开发帮助残疾人士的工具软件上，不论是在可行性还是在难易度上都有相当大的改善. Pango的多国文字处理能力在全球化的今天更是一项不可或缺的功能. 此外专门处理图形的GDK-pixbuf也合并到了2.0 版的GTK+套件中.<br>GTK有一项特点是它完全使用C语言,但无论在设计上或是在应用上都一直有着OO的特点.对象之间不但有继承的特性,更有回调函数(callback function)构成事件驱动的特点.<br>GTK的世界十分广阔.诸如GNet等使用GLIB建立的网络公共程序库,虽然不是GTK+小组制作但也有越来越多人在使用.有兴趣的网友们可以去GTK及GNOME的官方网站.  </p><h2 id="opengl"><a href="#opengl" class="headerlink" title="opengl"></a>opengl</h2><p>openGL是Open Graphics Library的缩写，指开源图形库。wikipedia 对其定义如下，它是一个跨语言，跨平台的应用程序接口，提供2D，3D图形渲染接口，操作在GPU之上，实现硬件加速渲染。<br>OpenGL用于桌面系统，在移动平台上的是其嵌入式的版本，叫做OpenGL ES（OpenGL Embedded Systems。OpenGL ES 1.0把三维带进了移动平台，2.0取代了大多数旧的API，替换为新的可编程API；2012年8月，Khronos组织确定了3.0的规范，并向后兼容了OpenGL ES 2.0。</p><h2 id="EGL"><a href="#EGL" class="headerlink" title="EGL"></a>EGL</h2><h2 id="QPA"><a href="#QPA" class="headerlink" title="QPA"></a>QPA</h2><h2 id="Xcb-Xlib"><a href="#Xcb-Xlib" class="headerlink" title="Xcb-Xlib"></a>Xcb-Xlib</h2><h2 id="Direct2D"><a href="#Direct2D" class="headerlink" title="Direct2D"></a>Direct2D</h2><h2 id="DirectFB"><a href="#DirectFB" class="headerlink" title="DirectFB"></a>DirectFB</h2><h2 id="EGLFS"><a href="#EGLFS" class="headerlink" title="EGLFS"></a>EGLFS</h2><p>EGL是OpenGL和本地视窗系统中间的一个接口。Qt可以使用EGL作为context和surface管理，然而，API包含非指定平台部分：本地视窗的创建必须通过特定平台的方式创建。因此，就需要对板子或者指定GPU修改代码。有两种修改的方式：一种是通过eglfs hooks，这种方式可以是一个单源文件编译进平台插件中，第二种方式就是动态加载EGL设备集成插件。<br>EGLFS是一个为了Qt5应用运行的平台插件，Qt5运行在EGL和OpenGL ES2.0之上而且没有真实的视窗系统（比如 X11 Wayland）。对于Qt Quick 2和本地OpenGL应用，它也支持软件渲染视窗（例如QWidget）。在OpenGL应用中，widget的内容是使用CPU转化为图像渲染的，然后通过这个插件上传到纹理和混合。<br>这就是为什么当代嵌入式Linuxy设备建议包含一个GPU的原因。EGLFS强制第一个顶级窗口（QWidget或者QQucikView）为全屏。这个窗口也被选择成为根widget窗口，其它的顶级窗口（例如对话框，弹出菜单或者下拉菜单）都放入第一个窗口中。这很有必要，因为使用EGLFS总有一个真实存在的本地窗口和EGL窗口外观，并且其它的都属于第一个创建的widget或者window. 这种方式可以工作得很好，有一个主窗口存在在整个应用的生命周期里，其它的后来创建的所有的窗口都属于第一个窗口。</p><h2 id="linuxfb"><a href="#linuxfb" class="headerlink" title="linuxfb"></a>linuxfb</h2><p>Linux framebuffer（&#x2F;dev&#x2F;fb）是用来屏蔽图形显示硬件的抽象层。如果不对硬件进行抽象屏蔽，不同硬件显卡，可能需要编写不同的驱动和应用程序。而引入framebuffer进行统一的抽象后，开发人员可以不用关心硬件平台的差异，以统一的方式编写应用层和较高内核层程序。linuxfb提供接口，让用户的应用程序可以直接访问framebuffer（显示缓存区）来实现显示功能，而不用关心framebuffer的具体实现细节。<br>framebuffer提供了显卡的抽象描述，同时代表了显卡上的显存，往显示缓存中写入特定格式的数据就意味着向屏幕输出内容。用户将framebuffer映射到进程空间后，就可以直接进行读写操作，写操作会直接反映在屏幕显示的画面上。这种方式尤其适用于没有实际物理显存的嵌入式设备。<br>带GPU硬件的设备，在显示时，图形的旋转、渲染等，大部分由GPU完成。而framebuffer仅仅是一个映射，将用户写入的信息直接显示在屏幕上，所以所以的图形处理，都是在用户层实现、由CPU完成，因而CPU的负担会加重。</p><h2 id="GBM"><a href="#GBM" class="headerlink" title="GBM"></a>GBM</h2><h2 id="KMS"><a href="#KMS" class="headerlink" title="KMS"></a>KMS</h2><h2 id="X11"><a href="#X11" class="headerlink" title="X11"></a>X11</h2><h2 id="udev"><a href="#udev" class="headerlink" title="udev"></a>udev</h2><h2 id="evdev"><a href="#evdev" class="headerlink" title="evdev"></a>evdev</h2><h2 id="libinput"><a href="#libinput" class="headerlink" title="libinput"></a>libinput</h2><h2 id="mtdev"><a href="#mtdev" class="headerlink" title="mtdev"></a>mtdev</h2><h2 id="tslib"><a href="#tslib" class="headerlink" title="tslib"></a>tslib</h2><h2 id="XInput2"><a href="#XInput2" class="headerlink" title="XInput2"></a>XInput2</h2><h2 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h2><h2 id="ICO"><a href="#ICO" class="headerlink" title="ICO"></a>ICO</h2><h2 id="libjpeg"><a href="#libjpeg" class="headerlink" title="libjpeg"></a>libjpeg</h2><h2 id="libpng"><a href="#libpng" class="headerlink" title="libpng"></a>libpng</h2><h2 id="JasPer"><a href="#JasPer" class="headerlink" title="JasPer"></a>JasPer</h2><h2 id="MNG"><a href="#MNG" class="headerlink" title="MNG"></a>MNG</h2><h2 id="TIFF"><a href="#TIFF" class="headerlink" title="TIFF"></a>TIFF</h2><h2 id="WEBP"><a href="#WEBP" class="headerlink" title="WEBP"></a>WEBP</h2><h2 id="PulseAudio"><a href="#PulseAudio" class="headerlink" title="PulseAudio"></a>PulseAudio</h2><h2 id="ALSA"><a href="#ALSA" class="headerlink" title="ALSA"></a>ALSA</h2><h2 id="GStreamer"><a href="#GStreamer" class="headerlink" title="GStreamer"></a>GStreamer</h2><h2 id="WMF"><a href="#WMF" class="headerlink" title="WMF"></a>WMF</h2><h2 id="assimp"><a href="#assimp" class="headerlink" title="assimp"></a>assimp</h2><h2 id="Flite"><a href="#Flite" class="headerlink" title="Flite"></a>Flite</h2>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>RV1126</title>
    <link href="/2023/06/12/RV1126/"/>
    <url>/2023/06/12/RV1126/</url>
    
    <content type="html"><![CDATA[<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs isbl">�ҷǳ�����Ȥ��ʹ������ԭ����<span class="hljs-variable">о</span>΢<span class="hljs-variable">RV1126</span> <span class="hljs-variable">AI</span> <span class="hljs-variable">Linux</span>����������˹����ܺ�Ƕ��ʽ������ѧϰ��ʵ������������������<span class="hljs-variable">о</span>΢�ĸ�����<span class="hljs-variable">AI</span>��������ӵ��ǿ��ļ��������Ͷ��ִ�����������ʵ�ַḻ�Ĺ��ܣ�������ʶ������ʶ��ͼ�����ȡ�<br>��������������彫Ϊ���ṩһ���ܺõĻ�����̽�����µ�Ƕ��ʽ�������˹�����Ӧ�á�ͬʱ������������<span class="hljs-variable">Linux</span>����ϵͳ���԰����Ҹ�������˽����ϵͳ��ԭ����Ӧ�á�<br>���⣬��Ҳ�ǳ���������ԭ����Ƕ��ʽ��������������ȵ�λ����������������彫����һ�����������ɿ��Ĳ�Ʒ��<br>�����ƻ���<br>��һ�����ҽ���ϸ�Ķ�����ԭ���ṩ��<span class="hljs-variable">RV1126</span> <span class="hljs-variable">AI</span> <span class="hljs-variable">Linux</span>��������ĵ����ֲᣬ�˽⿪�����Ӳ�����������ѧϰ���ʹ��<span class="hljs-variable">SDK</span>�͹�������<br>�ڶ������ҽ�ʵ��һ<span class="hljs-variable">Щ</span>�򵥵�ʾ�����룬��ʹ������ͷ���ղ�����ͼ������ʹ����˷��������ʶ��ȣ�����Ϥ������Ĺ��ܺ�<span class="hljs-variable">API</span>��<br>���������ҽ����<span class="hljs-variable"><span class="hljs-keyword">и</span></span>����ӵ���Ŀʵ������ʹ�����ѧϰ�㷨����ͼ������������ȣ���̽�����������˹����������Ǳ����<br>���Ĳ����ҽ������������ߺ��û������ҵľ���ͳɹ�����������ǵķ����ͽ��飬�Բ��ϸĽ��������ҵ���Ŀ��<br>������˵���ҵ�Ŀ����ͨ������ѧϰ��ʵ������󻯵ط���<span class="hljs-variable">RV1126</span> <span class="hljs-variable">AI</span> <span class="hljs-variable">Linux</span>�������Ǳ����������Ӧ����ʵ����Ŀ�<span class="hljs-variable">С</span>�<br></code></pre></td></tr></table></figure><h1 id="����ԭ��RV1126�������"><a href="#����ԭ��RV1126�������" class="headerlink" title="����ԭ��RV1126�������"></a>����ԭ��RV1126�������</h1><h2 id="����"><a href="#����" class="headerlink" title="����"></a>����</h2><p>����ԭ����о΢RV1126��������һ�������о΢RV1126оƬ�Ŀ����壬��оƬ�������Ƚ����˹����ܴ����������߱�ǿ��ļ����ͼ�����������ÿ����������������˹����ܡ������Ӿ���������й㷺��Ӧ��ǰ����<br>��������ԭ��RV1126�İ�װ�����Ż���ʮ�ֵĸߴ��ϡ�<br><img src="/data/attachment/forum/202306/12/172747o2h6xf26xm5b6jje.jpg.thumb.jpg?rand=8336.726023137233" alt="704652"><br>������и���һ����Դ��һ��WIFI���ߡ����������ߺͶŰ��ߡ�û�д���Ļ���������Ļ����˵�ͱȽϵ������ˡ�<br>�������ⲻ�󣬿�����MobaXterm���н�����</p><h2 id="�ϵ磡"><a href="#�ϵ磡" class="headerlink" title="�ϵ磡"></a>�ϵ磡</h2><p>���ӳ���ʱ�����Ѿ���¼��ϵͳ�ģ��õ�������󼴿��ϵ�������飬����û����Ļ������ͷ����ֻ���ȿ����ϵ���Ϣ�ˡ�<img src="/data/attachment/forum/202306/12/181212sevrbhhp6o6x8x9q.png.thumb.jpg?rand=2711.333334841757" alt="704674"><br>���ǱȽ����ε��ǣ�֮ǰ����İ��ӵ�console�����ʶ���115200�����������Ӳ�̫һ����������ѯ��֪��console�Ĳ�����Ϊ1500000������MobaXterm����֧�֣����Ի�����Դ���н����޸ģ��������У�����������ȿ�һ�����������Ϣ��</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br></pre></td><td class="code"><pre><code class="hljs c">   Verifying Hash Integrity ... sha256+ OK<br>## Loading fdt from FIT Image at <span class="hljs-number">7b</span>3c5880 ...<br>   Using <span class="hljs-string">&#x27;conf&#x27;</span> configuration<br>   Trying <span class="hljs-string">&#x27;fdt&#x27;</span> fdt subimage<br>     Description:  unavailable<br>     Type:         Flat Device Tree<br>     Compression:  uncompressed<br>     Data Start:   <span class="hljs-number">0x7b3c6080</span><br>     Data Size:    <span class="hljs-number">100606</span> Bytes = <span class="hljs-number">98.2</span> KiB<br>     Architecture: ARM<br>     Load Address: <span class="hljs-number">0x08300000</span><br>     Hash algo:    sha256<br>     Hash value:   <span class="hljs-number">443</span>cd3b493f6adb68b5f232acf35165e37c0691e0e491396dd64faa14865a8c0<br>   Verifying Hash Integrity ... sha256+ OK<br>   Loading fdt from <span class="hljs-number">0x08300000</span> to <span class="hljs-number">0x08300000</span><br>   Booting using the fdt blob at <span class="hljs-number">0x08300000</span><br>   Loading Kernel Image from <span class="hljs-number">0x7b3dea80</span> to <span class="hljs-number">0x02008000</span> ... OK<br>  <span class="hljs-string">&#x27;reserved-memory&#x27;</span> ramoops@<span class="hljs-number">8000000</span>: addr=<span class="hljs-number">8000000</span> size=<span class="hljs-number">100000</span><br>   Using Device Tree in place at <span class="hljs-number">08300000</span>, end <span class="hljs-number">0831b</span>8f9<br>failed to reserve drm-cubic-lut memory<br>Adding bank: <span class="hljs-number">0x00000000</span> - <span class="hljs-number">0x08400000</span> (size: <span class="hljs-number">0x08400000</span>)<br>Adding bank: <span class="hljs-number">0x08648000</span> - <span class="hljs-number">0x80000000</span> (size: <span class="hljs-number">0x779b8000</span>)<br>Total: <span class="hljs-number">905.160</span> ms<br><br>Starting kernel ...<br><br>[    <span class="hljs-number">0.000000</span>] Booting Linux on physical CPU <span class="hljs-number">0xf00</span><br>[    <span class="hljs-number">0.000000</span>] Linux version <span class="hljs-number">4.19</span><span class="hljs-number">.111</span> (alientek@alientek-virtual-machine) (gcc version <span class="hljs-number">6.3</span><span class="hljs-number">.1</span> <span class="hljs-number">20170404</span> (Linaro GCC <span class="hljs-number">6.3</span><span class="hljs-number">-2017.05</span>)) #<span class="hljs-number">1</span> SMP PREEMPT Tue Feb <span class="hljs-number">7</span> <span class="hljs-number">10</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19</span> CST <span class="hljs-number">2023</span><br>[    <span class="hljs-number">0.000000</span>] CPU: ARMv7 Processor [<span class="hljs-number">410f</span>c075] revision <span class="hljs-number">5</span> (ARMv7), cr=<span class="hljs-number">10</span>c5387d<br>[    <span class="hljs-number">0.000000</span>] CPU: div instructions available: patching division code<br>[    <span class="hljs-number">0.000000</span>] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache<br>[    <span class="hljs-number">0.000000</span>] OF: fdt: Machine model: Rockchip RV1126 EVB DDR3 V13 Board<br>[    <span class="hljs-number">0.000000</span>] earlycon: uart8250 at MMIO32 <span class="hljs-number">0xff570000</span> (options <span class="hljs-string">&#x27;&#x27;)</span><br><span class="hljs-string">[    0.000000] bootconsole [uart8250] enabled</span><br><span class="hljs-string">[    0.000000] Memory policy: Data cache writealloc</span><br><span class="hljs-string">[    0.000000] Reserved memory: created CMA memory pool at 0x7f800000, size 8 MiB</span><br><span class="hljs-string">[    0.000000] OF: reserved mem: initialized node linux,cma, compatible id shared-dma-pool</span><br><span class="hljs-string">[    0.000000] Reserved memory: created CMA memory pool at 0x5dc00000, size 512 MiB</span><br><span class="hljs-string">[    0.000000] OF: reserved mem: initialized node isp, compatible id shared-dma-pool</span><br><span class="hljs-string">[    0.000000] psci: probing for conduit method from DT.</span><br><span class="hljs-string">[    0.000000] psci: PSCIv1.0 detected in firmware.</span><br><span class="hljs-string">[    0.000000] psci: Using standard PSCI v0.2 function IDs</span><br><span class="hljs-string">[    0.000000] psci: MIGRATE_INFO_TYPE not supported.</span><br><span class="hljs-string">[    0.000000] psci: SMC Calling Convention v1.0</span><br><span class="hljs-string">[    0.000000] percpu: Embedded 15 pages/cpu s32204 r8192 d21044 u61440</span><br><span class="hljs-string">[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 522376</span><br><span class="hljs-string">[    0.000000] Kernel command line: user_debug=31 storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  rootwait earlycon=uart8250,mmio32,0xff570000 console=ttyFIQ0 root=PARTUUID=614e0000-0000 rootfstype=ext4 snd_aloop.index=7</span><br><span class="hljs-string">[    0.000000] Dentry cache hash table entries: 131072 (order: 7, 524288 bytes)</span><br><span class="hljs-string">[    0.000000] Inode-cache hash table entries: 65536 (order: 6, 262144 bytes)</span><br><span class="hljs-string">[    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off</span><br><span class="hljs-string">[    0.000000] Memory: 1529532K/2094816K available (8192K kernel code, 397K rwdata, 2020K rodata, 1024K init, 278K bss, 32804K reserved, 532480K cma-reserved, 883688K highmem)</span><br><span class="hljs-string">[    0.000000] Virtual kernel memory layout:</span><br><span class="hljs-string">[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)</span><br><span class="hljs-string">[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)</span><br><span class="hljs-string">[    0.000000]     vmalloc : 0xda000000 - 0xff800000   ( 600 MB)</span><br><span class="hljs-string">[    0.000000]     lowmem  : 0xb0000000 - 0xd9800000   ( 664 MB)</span><br><span class="hljs-string">[    0.000000]     pkmap   : 0xafe00000 - 0xb0000000   (   2 MB)</span><br><span class="hljs-string">[    0.000000]     modules : 0xaf000000 - 0xafe00000   (  14 MB)</span><br><span class="hljs-string">[    0.000000]       .text : 0x(ptrval) - 0x(ptrval)   (9184 kB)</span><br><span class="hljs-string">[    0.000000]       .init : 0x(ptrval) - 0x(ptrval)   (1024 kB)</span><br><span class="hljs-string">[    0.000000]       .data : 0x(ptrval) - 0x(ptrval)   ( 398 kB)</span><br><span class="hljs-string">[    0.000000]        .bss : 0x(ptrval) - 0x(ptrval)   ( 279 kB)</span><br><span class="hljs-string">[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1</span><br><span class="hljs-string">[    0.000000] rcu: Preemptible hierarchical RCU implementation.</span><br><span class="hljs-string">[    0.000000] Tasks RCU enabled.</span><br><span class="hljs-string">[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16</span><br><span class="hljs-string">[    0.000000] random: random: get_random_bytes called from start_kernel+0x328/0x4ac with crng_init=0</span><br><span class="hljs-string">[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (virt).</span><br><span class="hljs-string">[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns</span><br><span class="hljs-string">[    0.000009] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns</span><br><span class="hljs-string">[    0.000758] Switching to timer-based delay loop, resolution 41ns</span><br><span class="hljs-string">[    0.002699] Console: colour dummy device 80x30</span><br><span class="hljs-string">[    0.003168] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=80000)</span><br><span class="hljs-string">[    0.004127] pid_max: default: 4096 minimum: 301</span><br><span class="hljs-string">[    0.004726] Mount-cache hash table entries: 2048 (order: 1, 8192 bytes)</span><br><span class="hljs-string">[    0.005356] Mountpoint-cache hash table entries: 2048 (order: 1, 8192 bytes)</span><br><span class="hljs-string">[    0.006745] CPU: Testing write buffer coherency: ok</span><br><span class="hljs-string">[    0.007571] /cpus/cpu@f00 missing clock-frequency property</span><br><span class="hljs-string">[    0.008101] /cpus/cpu@f01 missing clock-frequency property</span><br><span class="hljs-string">[    0.008626] /cpus/cpu@f02 missing clock-frequency property</span><br><span class="hljs-string">[    0.009150] /cpus/cpu@f03 missing clock-frequency property</span><br><span class="hljs-string">[    0.009712] CPU0: thread -1, cpu 0, socket 15, mpidr 80000f00</span><br><span class="hljs-string">[    0.010979] Setting up static identity map for 0x100000 - 0x100060</span><br><span class="hljs-string">[    0.011735] rcu: Hierarchical SRCU implementation.</span><br><span class="hljs-string">[    0.012830] smp: Bringing up secondary CPUs ...</span><br><span class="hljs-string">I/TC: Secondary CPU 1 initializing</span><br><span class="hljs-string">I/TC: Secondary CPU 1 switching to normal world boot</span><br><span class="hljs-string">I/TC: Secondary CPU 2 initializing</span><br><span class="hljs-string">I/TC: Secondary CPU 2 switching to normal world boot</span><br><span class="hljs-string">I/TC: Secondary CPU 3 initializing</span><br><span class="hljs-string">I/TC: Secondary CPU 3 switching to normal world boot</span><br><span class="hljs-string">[    0.014859] CPU1: thread -1, cpu 1, socket 15, mpidr 80000f01</span><br><span class="hljs-string">[    0.016549] CPU2: thread -1, cpu 2, socket 15, mpidr 80000f02</span><br><span class="hljs-string">[    0.018196] CPU3: thread -1, cpu 3, socket 15, mpidr 80000f03</span><br><span class="hljs-string">[    0.018335] smp: Brought up 1 node, 4 CPUs</span><br><span class="hljs-string">[    0.020347] SMP: Total of 4 processors activated (192.00 BogoMIPS).</span><br><span class="hljs-string">[    0.020932] CPU: All CPU(s) started in SVC mode.</span><br><span class="hljs-string">[    0.022380] devtmpfs: initialized</span><br><span class="hljs-string">[    0.049091] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5</span><br><span class="hljs-string">[    0.050431] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6370867519511994 ns</span><br><span class="hljs-string">[    0.051414] futex hash table entries: 16 (order: -2, 1024 bytes)</span><br><span class="hljs-string">[    0.052220] pinctrl core: initialized pinctrl subsystem</span><br><span class="hljs-string">[    0.053902] NET: Registered protocol family 16</span><br><span class="hljs-string">[    0.055071] DMA: preallocated 256 KiB pool for atomic coherent allocations</span><br><span class="hljs-string">[    0.057821] cpuidle: using governor menu</span><br><span class="hljs-string">[    0.058221] Registered FIQ tty driver</span><br><span class="hljs-string">[    0.059166] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.</span><br><span class="hljs-string">[    0.059913] hw-breakpoint: maximum watchpoint size is 8 bytes.</span><br><span class="hljs-string">[    0.062116] persistent_ram: found existing invalid buffer, size 49156, start 49172</span><br><span class="hljs-string">[    0.063397] console [pstore-1] enabled</span><br><span class="hljs-string">[    0.063995] pstore: Registered ramoops as persistent store backend</span><br><span class="hljs-string">[    0.064580] ramoops: attached 0x100000@0x8000000, ecc: 0/0</span><br><span class="hljs-string">[    0.112062] cryptd: max_cpu_qlen set to 1000</span><br><span class="hljs-string">[    0.113353] fiq debugger fiq mode enabled</span><br><span class="hljs-string">[[    0.114151] console [ttyFIQ0] enabled</span><br><span class="hljs-string">    0.114151] console [ttyFIQ0] enabled</span><br><span class="hljs-string">[    0.114835] bootconsole [uart8250] disabled</span><br><span class="hljs-string">[    0.114835] bootconsole [uart8250] disabled</span><br><span class="hljs-string">[    0.115494] Registered fiq debugger ttyFIQ0</span><br><span class="hljs-string">[    0.116118] rockchip-pm rockchip-suspend: not set pwm-regulator-config</span><br><span class="hljs-string">[    0.119191] rk_iommu ffb00f00.iommu: version = 1</span><br><span class="hljs-string">[    0.119871] rk_iommu ffb20800.iommu: version = 1</span><br><span class="hljs-string">[    0.120322] rk_iommu ffb60e00.iommu: version = 1</span><br><span class="hljs-string">[    0.120960] rk_iommu ffb80480.iommu: version = 1</span><br><span class="hljs-string">[    0.121520] rk_iommu ffb90800.iommu: version = 1</span><br><span class="hljs-string">[    0.121982] rk_iommu ffbb0f00.iommu: version = 1</span><br><span class="hljs-string">[    0.123047] SCSI subsystem initialized</span><br><span class="hljs-string">[    0.123372] usbcore: registered new interface driver usbfs</span><br><span class="hljs-string">[    0.123466] usbcore: registered new interface driver hub</span><br><span class="hljs-string">[    0.123615] usbcore: registered new device driver usb</span><br><span class="hljs-string">[    0.123727] media: Linux media interface: v0.10</span><br><span class="hljs-string">[    0.123808] videodev: Linux video capture interface: v2.00</span><br><span class="hljs-string">[    0.123884] pps_core: LinuxPPS API ver. 1 registered</span><br><span class="hljs-string">[    0.123907] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;</span><br><span class="hljs-string">[    0.123951] PTP clock support registered</span><br><span class="hljs-string">[    0.125306] Advanced Linux Sound Architecture Driver Initialized.</span><br><span class="hljs-string">[    0.125978] Bluetooth: Core ver 2.22</span><br><span class="hljs-string">[    0.126061] NET: Registered protocol family 31</span><br><span class="hljs-string">[    0.126086] Bluetooth: HCI device and connection manager initialized</span><br><span class="hljs-string">[    0.126116] Bluetooth: HCI socket layer initialized</span><br><span class="hljs-string">[    0.126143] Bluetooth: L2CAP socket layer initialized</span><br><span class="hljs-string">[    0.126200] Bluetooth: SCO socket layer initialized</span><br><span class="hljs-string">[    0.126728] rockchip-cpuinfo cpuinfo: SoC: 11260000</span><br><span class="hljs-string">[    0.126763] rockchip-cpuinfo cpuinfo: Serial: 29bec71dc95bc298</span><br><span class="hljs-string">[    0.127744] clocksource: Switched to clocksource arch_sys_counter</span><br><span class="hljs-string">[    0.141886] NET: Registered protocol family 2</span><br><span class="hljs-string">[    0.142853] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 6144 bytes)</span><br><span class="hljs-string">[    0.142915] TCP established hash table entries: 8192 (order: 3, 32768 bytes)</span><br><span class="hljs-string">[    0.143077] TCP bind hash table entries: 8192 (order: 4, 65536 bytes)</span><br><span class="hljs-string">[    0.143284] TCP: Hash tables configured (established 8192 bind 8192)</span><br><span class="hljs-string">[    0.143457] UDP hash table entries: 512 (order: 2, 16384 bytes)</span><br><span class="hljs-string">[    0.143531] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes)</span><br><span class="hljs-string">[    0.143769] NET: Registered protocol family 1</span><br><span class="hljs-string">[    0.145669] hw perfevents: enabled with armv7_cortex_a7 PMU driver, 5 counters available</span><br><span class="hljs-string">[    0.148536] Initialise system trusted keyrings</span><br><span class="hljs-string">[    0.148782] workingset: timestamp_bits=29 max_order=19 bucket_order=0</span><br><span class="hljs-string">[    0.156193] squashfs: version 4.0 (2009/01/31) Phillip Lougher</span><br><span class="hljs-string">[    0.159027] Key type asymmetric registered</span><br><span class="hljs-string">[    0.159060] Asymmetric key parser &#x27;</span>x509<span class="hljs-number">&#x27;</span> registered<br>[    <span class="hljs-number">0.159135</span>] bounce: pool size: <span class="hljs-number">64</span> pages<br>[    <span class="hljs-number">0.159201</span>] Block layer SCSI generic (bsg) driver version <span class="hljs-number">0.4</span> loaded (major <span class="hljs-number">244</span>)<br>[    <span class="hljs-number">0.159228</span>] io scheduler noop registered<br>[    <span class="hljs-number">0.159250</span>] io scheduler deadline registered<br>[    <span class="hljs-number">0.159416</span>] io scheduler cfq registered (<span class="hljs-keyword">default</span>)<br>[    <span class="hljs-number">0.159443</span>] io scheduler mq-deadline registered<br>[    <span class="hljs-number">0.159464</span>] io scheduler kyber registered<br>[    <span class="hljs-number">0.159635</span>] io scheduler bfq registered<br>[    <span class="hljs-number">0.163828</span>] phy phy-ff4c0000.usb2-phy<span class="hljs-number">.1</span>: Failed to get VBUS supply regulator<br>[    <span class="hljs-number">0.165762</span>] rockchip-usb2phy-naneng ff4c8000.usb2-phy: failed to create phy<br>[    <span class="hljs-number">0.167357</span>] pwm-backlight backlight: backlight supply power not found, using dummy regulator<br>[    <span class="hljs-number">0.167484</span>] pwm-backlight backlight: Linked as a consumer to regulator<span class="hljs-number">.0</span><br>[    <span class="hljs-number">0.167921</span>] mpp_service mpp-srv: <span class="hljs-number">515520f</span>32 author: 梁文�?<span class="hljs-number">2022</span><span class="hljs-number">-08</span><span class="hljs-number">-19</span> ATK1126: RV1126源码<br>[    <span class="hljs-number">0.167954</span>] mpp_service mpp-srv: probe start<br>[    <span class="hljs-number">0.168939</span>] iommu: Adding device ffb80000.rkvdec to group <span class="hljs-number">3</span><br>[    <span class="hljs-number">0.168995</span>] mpp_rkvdec ffb80000.rkvdec: Linked as a consumer to ffb80480.iommu<br>[    <span class="hljs-number">0.169187</span>] mpp_rkvdec ffb80000.rkvdec: probing start<br>[    <span class="hljs-number">0.169851</span>] mpp_rkvdec ffb80000.rkvdec: shared_niu_a is not found!<br>[    <span class="hljs-number">0.169875</span>] rkvdec_init:<span class="hljs-number">1190</span>: No niu aclk reset resource define<br>[    <span class="hljs-number">0.169899</span>] mpp_rkvdec ffb80000.rkvdec: shared_niu_h is not found!<br>[    <span class="hljs-number">0.169925</span>] rkvdec_init:<span class="hljs-number">1193</span>: No niu hclk reset resource define<br>[    <span class="hljs-number">0.170257</span>] mpp_rkvdec ffb80000.rkvdec: probing finish<br>[    <span class="hljs-number">0.171038</span>] iommu: Adding device ffbb0000.rkvenc to group <span class="hljs-number">5</span><br>[    <span class="hljs-number">0.171137</span>] mpp_rkvenc ffbb0000.rkvenc: Linked as a consumer to ffbb0f00.iommu<br>[    <span class="hljs-number">0.171436</span>] mpp_rkvenc ffbb0000.rkvenc: probing start<br>[    <span class="hljs-number">0.172043</span>] mpp_rkvenc ffbb0000.rkvenc: venc regulator not ready, retry<br>[    <span class="hljs-number">0.172078</span>] rkvenc_init:<span class="hljs-number">1202</span>: failed to add venc devfreq<br>[    <span class="hljs-number">0.173182</span>] iommu: Adding device ffb90400.vdpu to group <span class="hljs-number">4</span><br>[    <span class="hljs-number">0.173244</span>] mpp_vdpu2 ffb90400.vdpu: Linked as a consumer to ffb90800.iommu<br>[    <span class="hljs-number">0.173349</span>] mpp_vdpu2 ffb90400.vdpu: probe device<br>[    <span class="hljs-number">0.173848</span>] mpp_vdpu2 ffb90400.vdpu: reset_group-&gt;rw_sem_on=<span class="hljs-number">0</span><br>[    <span class="hljs-number">0.173896</span>] mpp_vdpu2 ffb90400.vdpu: reset_group-&gt;rw_sem_on=<span class="hljs-number">0</span><br>[    <span class="hljs-number">0.174124</span>] mpp_vdpu2 ffb90400.vdpu: probing finish<br>[    <span class="hljs-number">0.174804</span>] iommu: Adding device ffb90000.vepu to group <span class="hljs-number">4</span><br>[    <span class="hljs-number">0.174862</span>] mpp_vepu2 ffb90000.vepu: Linked as a consumer to ffb90800.iommu<br>[    <span class="hljs-number">0.174987</span>] mpp_vepu2 ffb90000.vepu: probe device<br>[    <span class="hljs-number">0.175469</span>] mpp_vepu2 ffb90000.vepu: reset_group-&gt;rw_sem_on=<span class="hljs-number">0</span><br>[    <span class="hljs-number">0.175508</span>] mpp_vepu2 ffb90000.vepu: reset_group-&gt;rw_sem_on=<span class="hljs-number">0</span><br>[    <span class="hljs-number">0.175727</span>] mpp_vepu2 ffb90000.vepu: probing finish<br>[    <span class="hljs-number">0.176234</span>] iommu: Adding device ffb20000.iep to group <span class="hljs-number">1</span><br>[    <span class="hljs-number">0.176279</span>] mpp-iep2 ffb20000.iep: Linked as a consumer to ffb20800.iommu<br>[    <span class="hljs-number">0.176409</span>] mpp-iep2 ffb20000.iep: probe device<br>[    <span class="hljs-number">0.177074</span>] mpp-iep2 ffb20000.iep: allocate roi buffer failed<br>[    <span class="hljs-number">0.177279</span>] mpp-iep2 ffb20000.iep: probing finish<br>[    <span class="hljs-number">0.177545</span>] mpp_service mpp-srv: probe success<br>[    <span class="hljs-number">0.182856</span>] dma-pl330 ff4e0000.dma-controller: Loaded driver <span class="hljs-keyword">for</span> PL330 DMAC<span class="hljs-number">-241330</span><br>[    <span class="hljs-number">0.182902</span>] dma-pl330 ff4e0000.dma-controller: DBUFF<span class="hljs-number">-128</span>x8bytes Num_Chans<span class="hljs-number">-8</span> Num_Peri<span class="hljs-number">-32</span> Num_Events<span class="hljs-number">-16</span><br>[    <span class="hljs-number">0.184944</span>] rockchip-system-monitor rockchip-system-monitor: system monitor probe<br>[    <span class="hljs-number">0.185815</span>] Serial: <span class="hljs-number">8250</span>/<span class="hljs-number">16550</span> driver, <span class="hljs-number">6</span> ports, IRQ sharing disabled<br>[    <span class="hljs-number">0.186703</span>] ff560000.serial: ttyS0 at MMIO <span class="hljs-number">0xff560000</span> (irq = <span class="hljs-number">33</span>, base_baud = <span class="hljs-number">1500000</span>) is a <span class="hljs-number">16550</span>A<br>[    <span class="hljs-number">0.188818</span>] random: fast init done<br>[    <span class="hljs-number">0.189195</span>] random: crng init done<br>[    <span class="hljs-number">0.189656</span>] iommu: Adding device ffb00000.vop to group <span class="hljs-number">0</span><br>[    <span class="hljs-number">0.189715</span>] rockchip-vop ffb00000.vop: Linked as a consumer to ffb00f00.iommu<br>[    <span class="hljs-number">0.193786</span>] rockchip-drm display-subsystem: Linked as a consumer to ffb00000.vop<br>[    <span class="hljs-number">0.194905</span>] rockchip-drm display-subsystem: Linked as a consumer to ffb30000.dsi<br>[    <span class="hljs-number">0.196230</span>] rockchip-drm display-subsystem: devfreq is not <span class="hljs-built_in">set</span><br>[    <span class="hljs-number">0.196706</span>] rockchip-drm display-subsystem: bound ffb00000.vop (ops <span class="hljs-number">0xb093eac0</span>)<br>[    <span class="hljs-number">0.196778</span>] dw-mipi-dsi ffb30000.dsi: [drm:dw_mipi_dsi_bind] *ERROR* Failed to find panel or bridge: <span class="hljs-number">-517</span><br>[    <span class="hljs-number">0.196815</span>] rockchip-drm display-subsystem: failed to bind ffb30000.dsi (ops <span class="hljs-number">0xb09451f4</span>): <span class="hljs-number">-517</span><br>[    <span class="hljs-number">0.197077</span>] rockchip-drm display-subsystem: master bind failed: <span class="hljs-number">-517</span><br>[    <span class="hljs-number">0.202139</span>] panel-simple-dsi ffb30000.dsi<span class="hljs-number">.0</span>: Linked as a consumer to regulator<span class="hljs-number">.1</span><br>[    <span class="hljs-number">0.202202</span>] panel-simple-dsi ffb30000.dsi<span class="hljs-number">.0</span>: ffb30000.dsi<span class="hljs-number">.0</span> supply vsp not found, using dummy regulator<br>[    <span class="hljs-number">0.202287</span>] panel-simple-dsi ffb30000.dsi<span class="hljs-number">.0</span>: Linked as a consumer to regulator<span class="hljs-number">.0</span><br>[    <span class="hljs-number">0.202332</span>] panel-simple-dsi ffb30000.dsi<span class="hljs-number">.0</span>: ffb30000.dsi<span class="hljs-number">.0</span> supply vsn not found, using dummy regulator<br>[    <span class="hljs-number">0.203583</span>] zram: Added device: zram0<br>[    <span class="hljs-number">0.207069</span>] libphy: Fixed MDIO Bus: probed<br>[    <span class="hljs-number">0.209033</span>] rk_gmac-dwmac ffc40000.ethernet: no regulator found<br>[    <span class="hljs-number">0.209076</span>] rk_gmac-dwmac ffc40000.ethernet: clock input or output? (input).<br>[    <span class="hljs-number">0.209099</span>] rk_gmac-dwmac ffc40000.ethernet: TX delay(<span class="hljs-number">0x2a</span>).<br>[    <span class="hljs-number">0.209127</span>] rk_gmac-dwmac ffc40000.ethernet: RX delay(<span class="hljs-number">0x1a</span>).<br>[    <span class="hljs-number">0.209155</span>] rk_gmac-dwmac ffc40000.ethernet: integrated PHY? (no).<br>[    <span class="hljs-number">0.209254</span>] rk_gmac-dwmac ffc40000.ethernet: clock input from PHY<br>[    <span class="hljs-number">0.214300</span>] rk_gmac-dwmac ffc40000.ethernet: init <span class="hljs-keyword">for</span> RGMII<br>[    <span class="hljs-number">0.214621</span>] rk_gmac-dwmac ffc40000.ethernet: User ID: <span class="hljs-number">0x30</span>, Synopsys ID: <span class="hljs-number">0x51</span><br>[    <span class="hljs-number">0.214654</span>] rk_gmac-dwmac ffc40000.ethernet: DWMAC4/<span class="hljs-number">5</span><br>[    <span class="hljs-number">0.214679</span>] rk_gmac-dwmac ffc40000.ethernet: DMA HW capability <span class="hljs-keyword">register</span> supported<br>[    <span class="hljs-number">0.214704</span>] rk_gmac-dwmac ffc40000.ethernet: RX Checksum Offload Engine supported<br>[    <span class="hljs-number">0.214726</span>] rk_gmac-dwmac ffc40000.ethernet: TX Checksum insertion supported<br>[    <span class="hljs-number">0.214748</span>] rk_gmac-dwmac ffc40000.ethernet: Wake-Up On Lan supported<br>[    <span class="hljs-number">0.214816</span>] rk_gmac-dwmac ffc40000.ethernet: TSO supported<br>[    <span class="hljs-number">0.214836</span>] rk_gmac-dwmac ffc40000.ethernet: Enable RX Mitigation via HW Watchdog Timer<br>[    <span class="hljs-number">0.214856</span>] rk_gmac-dwmac ffc40000.ethernet: TSO feature enabled<br>[    <span class="hljs-number">0.347792</span>] libphy: stmmac: probed<br>[    <span class="hljs-number">0.349641</span>] PPP generic driver version <span class="hljs-number">2.4</span><span class="hljs-number">.2</span><br>[    <span class="hljs-number">0.349928</span>] PPP BSD Compression module registered<br>[    <span class="hljs-number">0.349955</span>] PPP Deflate Compression module registered<br>[    <span class="hljs-number">0.350002</span>] PPP MPPE Compression module registered<br>[    <span class="hljs-number">0.350025</span>] NET: Registered protocol family <span class="hljs-number">24</span><br>[    <span class="hljs-number">0.350144</span>] usbcore: registered new interface driver asix<br>[    <span class="hljs-number">0.350219</span>] usbcore: registered new interface driver ax88179_178a<br>[    <span class="hljs-number">0.350293</span>] usbcore: registered new interface driver cdc_ether<br>[    <span class="hljs-number">0.350365</span>] usbcore: registered new interface driver net1080<br>[    <span class="hljs-number">0.350445</span>] usbcore: registered new interface driver cdc_subset<br>[    <span class="hljs-number">0.350518</span>] usbcore: registered new interface driver zaurus<br>[    <span class="hljs-number">0.350613</span>] usbcore: registered new interface driver cdc_ncm<br>[    <span class="hljs-number">0.352355</span>] dwc3 ffd00000.dwc3: Failed to get clk <span class="hljs-string">&#x27;ref&#x27;</span>: <span class="hljs-number">-2</span><br>[    <span class="hljs-number">0.357909</span>] ehci_hcd: USB <span class="hljs-number">2.0</span> <span class="hljs-string">&#x27;Enhanced&#x27;</span> Host Controller (EHCI) Driver<br>[    <span class="hljs-number">0.357950</span>] ehci-platform: EHCI generic platform driver<br>[    <span class="hljs-number">0.358583</span>] ohci_hcd: USB <span class="hljs-number">1.1</span> <span class="hljs-string">&#x27;Open&#x27;</span> Host Controller (OHCI) Driver<br>[    <span class="hljs-number">0.358658</span>] ohci-platform: OHCI generic platform driver<br>[    <span class="hljs-number">0.360076</span>] usbcore: registered new interface driver cdc_acm<br>[    <span class="hljs-number">0.360096</span>] cdc_acm: USB Abstract Control Model driver <span class="hljs-keyword">for</span> USB modems and ISDN adapters<br>[    <span class="hljs-number">0.360189</span>] usbcore: registered new interface driver usb-storage<br>[    <span class="hljs-number">0.360340</span>] usbcore: registered new interface driver option<br>[    <span class="hljs-number">0.360393</span>] usbserial: USB Serial support registered <span class="hljs-keyword">for</span> GSM modem (<span class="hljs-number">1</span>-port)<br>[    <span class="hljs-number">0.361356</span>] i2c /dev entries driver<br>[    <span class="hljs-number">0.363232</span>] rk808 <span class="hljs-number">0</span><span class="hljs-number">-0020</span>: chip id: <span class="hljs-number">0x8090</span><br>[    <span class="hljs-number">0.363330</span>] rk808 <span class="hljs-number">0</span><span class="hljs-number">-0020</span>: No cache defaults, reading back from HW<br>[    <span class="hljs-number">0.369731</span>] rk808 <span class="hljs-number">0</span><span class="hljs-number">-0020</span>: source: on=<span class="hljs-number">0x14</span>, off=<span class="hljs-number">0x00</span><br>[    <span class="hljs-number">0.369775</span>] rk808 <span class="hljs-number">0</span><span class="hljs-number">-0020</span>: support dcdc3 fb mode:<span class="hljs-number">-22</span>, <span class="hljs-number">-1331284000</span><br>[    <span class="hljs-number">0.369798</span>] rk808 <span class="hljs-number">0</span><span class="hljs-number">-0020</span>: support pmic reset mode:<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>[    <span class="hljs-number">0.373907</span>] rk808-regulator rk808-regulator: there is no dvs0 gpio<br>[    <span class="hljs-number">0.374032</span>] rk808-regulator rk808-regulator: there is no dvs1 gpio<br>[    <span class="hljs-number">0.374135</span>] DCDC_REG1: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.374876</span>] DCDC_REG2: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.375515</span>] DCDC_REG3: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.376007</span>] DCDC_REG4: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.376511</span>] DCDC_REG5: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.377115</span>] LDO_REG1: supplied by vcc_buck5<br>[    <span class="hljs-number">0.377707</span>] LDO_REG2: supplied by vcc_buck5<br>[    <span class="hljs-number">0.378259</span>] LDO_REG3: supplied by vcc_buck5<br>[    <span class="hljs-number">0.378710</span>] LDO_REG4: supplied by vcc_buck5<br>[    <span class="hljs-number">0.379201</span>] LDO_REG5: supplied by vcc_buck5<br>[    <span class="hljs-number">0.379680</span>] LDO_REG6: supplied by vcc_buck5<br>[    <span class="hljs-number">0.379768</span>] vcc_dvdd: Bringing <span class="hljs-number">1100000u</span>V into <span class="hljs-number">1200000</span><span class="hljs-number">-1200000u</span>V<br>[    <span class="hljs-number">0.380318</span>] LDO_REG7: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.380808</span>] LDO_REG8: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.381465</span>] LDO_REG9: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.382057</span>] SWITCH_REG1: supplied by vcc5v0_sys<br>[    <span class="hljs-number">0.382506</span>] SWITCH_REG2: supplied by vcc3v3_sys<br>[    <span class="hljs-number">0.384701</span>] input: rk805 pwrkey as /devices/platform/ff3f0000.i2c/i2c<span class="hljs-number">-0</span>/<span class="hljs-number">0</span><span class="hljs-number">-0020</span>/rk805-pwrkey/input/input0<br>[    <span class="hljs-number">0.387177</span>] i2c i2c<span class="hljs-number">-1</span>: <span class="hljs-number">1</span> i2c clients have been registered at <span class="hljs-number">0x1a</span><br>[    <span class="hljs-number">0.388352</span>] goodix_ts_probe() start<br>[    <span class="hljs-number">0.388422</span>] Goodix-TS <span class="hljs-number">5</span><span class="hljs-number">-0014</span>: <span class="hljs-number">5</span><span class="hljs-number">-0014</span> supply tp not found, using dummy regulator<br>[    <span class="hljs-number">0.388521</span>] Goodix-TS <span class="hljs-number">5</span><span class="hljs-number">-0014</span>: Linked as a consumer to regulator<span class="hljs-number">.0</span><br>[    <span class="hljs-number">0.538129</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">0.634802</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">0.731462</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">0.828132</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">0.924794</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.021460</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.117790</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C read <span class="hljs-number">0x8000</span>, <span class="hljs-number">10</span> bytes, <span class="hljs-type">double</span> check failed!<br>[    <span class="hljs-number">1.117818</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; Failed to get chip-type, <span class="hljs-built_in">set</span> chip type <span class="hljs-keyword">default</span>: GOODIX_GT9<br>[    <span class="hljs-number">1.118177</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8047</span>, <span class="hljs-number">1</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.214455</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; GTP i2c test failed time <span class="hljs-number">1.</span><br>[    <span class="hljs-number">1.231450</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8047</span>, <span class="hljs-number">1</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.327789</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; GTP i2c test failed time <span class="hljs-number">2.</span><br>[    <span class="hljs-number">1.344786</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8047</span>, <span class="hljs-number">1</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.441123</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; GTP i2c test failed time <span class="hljs-number">3.</span><br>[    <span class="hljs-number">1.458125</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8047</span>, <span class="hljs-number">1</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.554455</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; GTP i2c test failed time <span class="hljs-number">4.</span><br>[    <span class="hljs-number">1.571455</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; I2C Read: <span class="hljs-number">0x8047</span>, <span class="hljs-number">1</span> bytes failed, errcode: <span class="hljs-number">-6</span>! Process reset.<br>[    <span class="hljs-number">1.667789</span>] &lt;&lt;-GTP-ERROR-&gt;&gt; GTP i2c test failed time <span class="hljs-number">5.</span><br>[    <span class="hljs-number">1.684462</span>] phy phy-ff4c0000.usb2-phy<span class="hljs-number">.1</span>: charger = USB_CDP_CHARGER<br>[    <span class="hljs-number">1.684505</span>] &lt;goodix_ts_probe&gt;_2749    I2C communication ERROR!<br>[    <span class="hljs-number">1.684521</span>]    &lt;goodix_ts_probe&gt;_2817  prob error !!!!!!!!!!!!!!!<br>[    <span class="hljs-number">1.684647</span>] Goodix-TS <span class="hljs-number">5</span><span class="hljs-number">-0014</span>: Dropping the link to regulator<span class="hljs-number">.0</span><br>[    <span class="hljs-number">1.687107</span>] rtc-pcf8563 <span class="hljs-number">5</span><span class="hljs-number">-0051</span>: rtc core: registered rtc-pcf8563 as rtc0<br>[    <span class="hljs-number">1.688010</span>] i2c i2c<span class="hljs-number">-5</span>: <span class="hljs-number">1</span> i2c clients have been registered at <span class="hljs-number">0x1a</span><br>[    <span class="hljs-number">1.689726</span>] rockchip-mipi-csi2: probe success, v4l2_dev:(null)!<br>[    <span class="hljs-number">1.691161</span>] rkcifhw ffae0000.rkcif: no iommu attached, using non-iommu buffers<br>[    <span class="hljs-number">1.691212</span>] rkcifhw ffae0000.rkcif: assigned reserved memory node isp<br>[    <span class="hljs-number">1.691356</span>] rkcif rkcif_mipi_lvds: rkcif driver version: v00<span class="hljs-number">.01</span><span class="hljs-number">.0</span>a<br>[    <span class="hljs-number">1.691456</span>] rkcif rkcif_mipi_lvds: attach to cif hw node<br>[    <span class="hljs-number">1.691478</span>] rkcif rkcif_mipi_lvds: rkcif wait line <span class="hljs-number">0</span><br>[    <span class="hljs-number">1.692601</span>] rkcif rkcif_mipi_lvds: Entity type <span class="hljs-keyword">for</span> entity rockchip-mipi-csi2 was not initialized!<br>[    <span class="hljs-number">1.692636</span>] rockchip-mipi-csi2: Async registered subdev<br>[    <span class="hljs-number">1.695005</span>] rkisp_hw ffb50000.rkisp: is_thunderboot: <span class="hljs-number">0</span><br>[    <span class="hljs-number">1.695046</span>] rkisp_hw ffb50000.rkisp: Missing rockchip,grf property<br>[    <span class="hljs-number">1.695372</span>] rkisp_hw ffb50000.rkisp: iommu is disabled, using non-iommu buffers<br>[    <span class="hljs-number">1.695410</span>] rkisp_hw ffb50000.rkisp: assigned reserved memory node isp<br>[    <span class="hljs-number">1.695722</span>] rkisp rkisp-vir0: rkisp driver version: v01<span class="hljs-number">.06</span><span class="hljs-number">.02</span><br>[    <span class="hljs-number">1.695962</span>] rkisp rkisp-vir0: No memory-region-thunderboot specified<br>[    <span class="hljs-number">1.696212</span>] rkisp rkisp-vir0: Entity type <span class="hljs-keyword">for</span> entity rkisp-isp-subdev was not initialized!<br>[    <span class="hljs-number">1.696255</span>] rkisp rkisp-vir0: Entity type <span class="hljs-keyword">for</span> entity rkisp-csi-subdev was not initialized!<br>[    <span class="hljs-number">1.696285</span>] rkisp rkisp-vir0: Entity type <span class="hljs-keyword">for</span> entity rkisp-bridge-ispp was not initialized!<br>[    <span class="hljs-number">1.699269</span>] rkisp rkisp-vir1: rkisp driver version: v01<span class="hljs-number">.06</span><span class="hljs-number">.02</span><br>[    <span class="hljs-number">1.699526</span>] rkisp rkisp-vir1: No memory-region-thunderboot specified<br>[    <span class="hljs-number">1.699753</span>] rkisp rkisp-vir1: Entity type <span class="hljs-keyword">for</span> entity rkisp-isp-subdev was not initialized!<br>[    <span class="hljs-number">1.699793</span>] rkisp rkisp-vir1: Entity type <span class="hljs-keyword">for</span> entity rkisp-csi-subdev was not initialized!<br>[    <span class="hljs-number">1.699819</span>] rkisp rkisp-vir1: Entity type <span class="hljs-keyword">for</span> entity rkisp-bridge-ispp was not initialized!<br>[    <span class="hljs-number">1.703494</span>] iommu: Adding device ffb60000.rkispp to group <span class="hljs-number">2</span><br>[    <span class="hljs-number">1.703557</span>] rkispp_hw ffb60000.rkispp: Linked as a consumer to ffb60e00.iommu<br>[    <span class="hljs-number">1.704001</span>] rkispp_hw ffb60000.rkispp: max input:<span class="hljs-number">3840</span>x2160@<span class="hljs-number">30f</span>ps<br>[    <span class="hljs-number">1.704049</span>] rkispp_hw ffb60000.rkispp: can<span class="hljs-number">&#x27;</span>t request region <span class="hljs-keyword">for</span> resource [mem <span class="hljs-number">0xffb60000</span><span class="hljs-number">-0xffb7ffff</span>]<br>[    <span class="hljs-number">1.704297</span>] rkispp_hw ffb60000.rkispp: failed to get cru reset<br>[    <span class="hljs-number">1.704651</span>] rkispp rkispp-vir0: rkispp driver version: v01<span class="hljs-number">.06</span><span class="hljs-number">.02</span><br>[    <span class="hljs-number">1.706931</span>] rkispp rkispp-vir1: rkispp driver version: v01<span class="hljs-number">.06</span><span class="hljs-number">.02</span><br>[    <span class="hljs-number">1.709668</span>] usbcore: registered new interface driver uvcvideo<br>[    <span class="hljs-number">1.709702</span>] USB Video Class driver (<span class="hljs-number">1.1</span><span class="hljs-number">.1</span>)<br>[    <span class="hljs-number">1.710184</span>] rockchip-iodomain fe020000.syscon:io-domains: Linked as a consumer to regulator<span class="hljs-number">.16</span><br>[    <span class="hljs-number">1.710249</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio2(<span class="hljs-number">3300000</span> uV) supplied by vccio_sd<br>[    <span class="hljs-number">1.710405</span>] rockchip-iodomain fe020000.syscon:io-domains: Linked as a consumer to regulator<span class="hljs-number">.12</span><br>[    <span class="hljs-number">1.710460</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio3(<span class="hljs-number">1800000</span> uV) supplied by vcc_1v8<br>[    <span class="hljs-number">1.710588</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio4(<span class="hljs-number">1800000</span> uV) supplied by vcc_1v8<br>[    <span class="hljs-number">1.710711</span>] rockchip-iodomain fe020000.syscon:io-domains: Linked as a consumer to regulator<span class="hljs-number">.19</span><br>[    <span class="hljs-number">1.710760</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio5(<span class="hljs-number">3300000</span> uV) supplied by vcc_3v3<br>[    <span class="hljs-number">1.710917</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio6(<span class="hljs-number">1800000</span> uV) supplied by vcc_1v8<br>[    <span class="hljs-number">1.711053</span>] rockchip-iodomain fe020000.syscon:io-domains: vccio7(<span class="hljs-number">1800000</span> uV) supplied by vcc_1v8<br>[    <span class="hljs-number">1.711262</span>] rockchip-iodomain fe020000.syscon:io-domains: Linked as a consumer to regulator<span class="hljs-number">.10</span><br>[    <span class="hljs-number">1.711315</span>] rockchip-iodomain fe020000.syscon:io-domains: pmuio0(<span class="hljs-number">1800000</span> uV) supplied by vcc1v8_pmu<br>[    <span class="hljs-number">1.711432</span>] rockchip-iodomain fe020000.syscon:io-domains: Linked as a consumer to regulator<span class="hljs-number">.7</span><br>[    <span class="hljs-number">1.711473</span>] rockchip-iodomain fe020000.syscon:io-domains: pmuio1(<span class="hljs-number">3300000</span> uV) supplied by vcc3v3_sys<br>[    <span class="hljs-number">1.714198</span>] rockchip-thermal ff5f0000.tsadc: tsadc trimmed value = <span class="hljs-number">-12</span><br>[    <span class="hljs-number">1.714622</span>] rockchip-thermal ff5f0000.tsadc: tsadc is probed successfully!<br>[    <span class="hljs-number">1.715101</span>] rockchip-thermal ff5f8000.tsadc: tsadc trimmed value = <span class="hljs-number">-8</span><br>[    <span class="hljs-number">1.715357</span>] rockchip-thermal ff5f8000.tsadc: tsadc is probed successfully!<br>[    <span class="hljs-number">1.716297</span>] Bluetooth: HCI UART driver ver <span class="hljs-number">2.3</span><br>[    <span class="hljs-number">1.716330</span>] Bluetooth: HCI UART protocol H4 registered<br>[    <span class="hljs-number">1.716673</span>] cpu cpu0: bin=<span class="hljs-number">0</span><br>[    <span class="hljs-number">1.716731</span>] cpu cpu0: leakage=<span class="hljs-number">2.125</span><br>[    <span class="hljs-number">1.716893</span>] cpu cpu0: Linked as a consumer to regulator<span class="hljs-number">.5</span><br>[    <span class="hljs-number">1.728564</span>] cpu cpu0: temp=<span class="hljs-number">45700</span>, pvtm=<span class="hljs-number">108794</span> (<span class="hljs-number">108690</span> + <span class="hljs-number">104</span>)<br>[    <span class="hljs-number">1.728680</span>] cpu cpu0: pvtm-volt-sel=<span class="hljs-number">2</span><br>[    <span class="hljs-number">1.728779</span>] cpu cpu0: Dropping the link to regulator<span class="hljs-number">.5</span><br>[    <span class="hljs-number">1.728845</span>] cpu cpu0: bin-scale=<span class="hljs-number">5</span><br>[    <span class="hljs-number">1.729214</span>] cpu cpu0: Linked as a consumer to regulator<span class="hljs-number">.5</span><br>[    <span class="hljs-number">1.729298</span>] cpu cpu0: Dropping the link to regulator<span class="hljs-number">.5</span><br>[    <span class="hljs-number">1.729517</span>] cpu cpu0: Linked as a consumer to regulator<span class="hljs-number">.5</span><br>[    <span class="hljs-number">1.730711</span>] cpu cpu0: avs=<span class="hljs-number">0</span><br>[    <span class="hljs-number">1.731271</span>] cpu cpu0: l=<span class="hljs-number">-2147483648</span> h=<span class="hljs-number">2147483647</span> hyst=<span class="hljs-number">0</span> l_limit=<span class="hljs-number">0</span> h_limit=<span class="hljs-number">0</span> h_table=<span class="hljs-number">0</span><br>[    <span class="hljs-number">1.731318</span>] cpu cpu0: failed to read out thermal zone (<span class="hljs-number">-22</span>)<br>[    <span class="hljs-number">1.732169</span>] cpu cpu0: failed to find power_model node<br>[    <span class="hljs-number">1.732231</span>] cpuidle: enable-method property <span class="hljs-string">&#x27;psci&#x27;</span> found operations<br>[    <span class="hljs-number">1.732331</span>] cpuidle: enable-method property <span class="hljs-string">&#x27;psci&#x27;</span> found operations<br>[    <span class="hljs-number">1.732404</span>] cpuidle: enable-method property <span class="hljs-string">&#x27;psci&#x27;</span> found operations<br>[    <span class="hljs-number">1.732469</span>] cpuidle: enable-method property <span class="hljs-string">&#x27;psci&#x27;</span> found operations<br>[    <span class="hljs-number">1.733044</span>] Synopsys Designware Multimedia Card Interface Driver<br>[    <span class="hljs-number">1.733519</span>] dwmmc_rockchip ffc50000.dwmmc: IDMAC supports <span class="hljs-number">32</span>-bit address mode.<br>[    <span class="hljs-number">1.733565</span>] dwmmc_rockchip ffc50000.dwmmc: Using internal DMA controller.<br>[    <span class="hljs-number">1.733579</span>] dwmmc_rockchip ffc50000.dwmmc: Version ID is <span class="hljs-number">270</span>a<br>[    <span class="hljs-number">1.733629</span>] dwmmc_rockchip ffc50000.dwmmc: DW MMC controller at irq <span class="hljs-number">63</span>,<span class="hljs-number">32</span> bit host data width,<span class="hljs-number">256</span> deep fifo<br>[    <span class="hljs-number">1.733741</span>] mmc_host mmc0: card is non-removable.<br>[    <span class="hljs-number">1.744882</span>] mmc_host mmc0: Bus speed (slot <span class="hljs-number">0</span>) = <span class="hljs-number">400000</span>Hz (slot req <span class="hljs-number">400000</span>Hz, actual <span class="hljs-number">400000</span>HZ div = <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.759479</span>] dwmmc_rockchip ffc60000.dwmmc: IDMAC supports <span class="hljs-number">32</span>-bit address mode.<br>[    <span class="hljs-number">1.759716</span>] dwmmc_rockchip ffc60000.dwmmc: Using internal DMA controller.<br>[    <span class="hljs-number">1.759770</span>] dwmmc_rockchip ffc60000.dwmmc: Version ID is <span class="hljs-number">270</span>a<br>[    <span class="hljs-number">1.759925</span>] dwmmc_rockchip ffc60000.dwmmc: DW MMC controller at irq <span class="hljs-number">64</span>,<span class="hljs-number">32</span> bit host data width,<span class="hljs-number">256</span> deep fifo<br>[    <span class="hljs-number">1.760306</span>] dwmmc_rockchip ffc60000.dwmmc: Linked as a consumer to regulator<span class="hljs-number">.16</span><br>[    <span class="hljs-number">1.773915</span>] mmc_host mmc2: Bus speed (slot <span class="hljs-number">0</span>) = <span class="hljs-number">400000</span>Hz (slot req <span class="hljs-number">400000</span>Hz, actual <span class="hljs-number">400000</span>HZ div = <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.785856</span>] dwmmc_rockchip ffc70000.dwmmc: IDMAC supports <span class="hljs-number">32</span>-bit address mode.<br>[    <span class="hljs-number">1.785978</span>] dwmmc_rockchip ffc70000.dwmmc: Using internal DMA controller.<br>[    <span class="hljs-number">1.786019</span>] dwmmc_rockchip ffc70000.dwmmc: Version ID is <span class="hljs-number">270</span>a<br>[    <span class="hljs-number">1.786194</span>] dwmmc_rockchip ffc70000.dwmmc: DW MMC controller at irq <span class="hljs-number">65</span>,<span class="hljs-number">32</span> bit host data width,<span class="hljs-number">256</span> deep fifo<br>[    <span class="hljs-number">1.786540</span>] dwmmc_rockchip ffc70000.dwmmc: allocated mmc-pwrseq<br>[    <span class="hljs-number">1.786583</span>] mmc_host mmc1: card is non-removable.<br>[    <span class="hljs-number">1.796938</span>] mmc_host mmc0: Bus speed (slot <span class="hljs-number">0</span>) = <span class="hljs-number">198000000</span>Hz (slot req <span class="hljs-number">200000000</span>Hz, actual <span class="hljs-number">198000000</span>HZ div = <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.797007</span>] dwmmc_rockchip ffc50000.dwmmc: Successfully tuned phase to <span class="hljs-number">90</span><br>[    <span class="hljs-number">1.798471</span>] mmc0: new HS200 MMC card at address <span class="hljs-number">0001</span><br>[    <span class="hljs-number">1.799570</span>] mmc_host mmc1: Bus speed (slot <span class="hljs-number">0</span>) = <span class="hljs-number">400000</span>Hz (slot req <span class="hljs-number">400000</span>Hz, actual <span class="hljs-number">400000</span>HZ div = <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.800462</span>] mmcblk0: mmc0:<span class="hljs-number">0001</span> <span class="hljs-number">58</span>A398 <span class="hljs-number">7.28</span> GiB <br>[    <span class="hljs-number">1.801554</span>] mmcblk0boot0: mmc0:<span class="hljs-number">0001</span> <span class="hljs-number">58</span>A398 partition <span class="hljs-number">1</span> <span class="hljs-number">4.00</span> MiB<br>[    <span class="hljs-number">1.802651</span>] mmcblk0boot1: mmc0:<span class="hljs-number">0001</span> <span class="hljs-number">58</span>A398 partition <span class="hljs-number">2</span> <span class="hljs-number">4.00</span> MiB<br>[    <span class="hljs-number">1.803577</span>] mmcblk0rpmb: mmc0:<span class="hljs-number">0001</span> <span class="hljs-number">58</span>A398 partition <span class="hljs-number">3</span> <span class="hljs-number">4.00</span> MiB, chardev (<span class="hljs-number">242</span>:<span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.806195</span>] dwmmc_rockchip ffc50000.dwmmc: Successfully tuned phase to <span class="hljs-number">180</span><br>[    <span class="hljs-number">1.812842</span>]  mmcblk0: p1 p2 p3 p4 p5 p6 p7 p8 p9 p10<br>[    <span class="hljs-number">1.813311</span>] usbcore: registered new interface driver usbhid<br>[    <span class="hljs-number">1.813333</span>] usbhid: USB HID core driver<br>[    <span class="hljs-number">1.815719</span>] rockchip-saradc ff5e0000.saradc: Linked as a consumer to regulator<span class="hljs-number">.12</span><br>[    <span class="hljs-number">1.817129</span>] rksfc_base v1<span class="hljs-number">.1</span> <span class="hljs-number">2016</span><span class="hljs-number">-01</span><span class="hljs-number">-08</span><br>[    <span class="hljs-number">1.817698</span>] rksfc ffc90000.sfc: rksfc_probe clk rate = <span class="hljs-number">79200000</span><br>[    <span class="hljs-number">1.817841</span>] rkflash_dev_init enter<br>[    <span class="hljs-number">1.817874</span>] sfc nor id: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>[    <span class="hljs-number">1.817890</span>] rkflash[<span class="hljs-number">1</span>] is invalid<br>[    <span class="hljs-number">1.817894</span>] rkflash_dev_init enter<br>[    <span class="hljs-number">1.817928</span>] sfc_nand id: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>[    <span class="hljs-number">1.817946</span>] rkflash[<span class="hljs-number">2</span>] is invalid<br>[    <span class="hljs-number">1.826344</span>] rk817-codec rk817-codec: DMA mask not <span class="hljs-built_in">set</span><br>[    <span class="hljs-number">1.829584</span>] NET: Registered protocol family <span class="hljs-number">17</span><br>[    <span class="hljs-number">1.829636</span>] NET: Registered protocol family <span class="hljs-number">15</span><br>[    <span class="hljs-number">1.829982</span>] Bluetooth: RFCOMM TTY layer initialized<br>[    <span class="hljs-number">1.830024</span>] Bluetooth: RFCOMM socket layer initialized<br>[    <span class="hljs-number">1.830060</span>] Bluetooth: RFCOMM ver <span class="hljs-number">1.11</span><br>[    <span class="hljs-number">1.830079</span>] Bluetooth: HIDP (Human Interface Emulation) ver <span class="hljs-number">1.2</span><br>[    <span class="hljs-number">1.830095</span>] Bluetooth: HIDP socket layer initialized<br>[    <span class="hljs-number">1.830103</span>] [BT_RFKILL]: Enter rfkill_rk_init<br>[    <span class="hljs-number">1.830110</span>] [WLAN_RFKILL]: Enter rfkill_wlan_init<br>[    <span class="hljs-number">1.830491</span>] [WLAN_RFKILL]: Enter rfkill_wlan_probe<br>[    <span class="hljs-number">1.830539</span>] [WLAN_RFKILL]: wlan_platdata_parse_dt: wifi_chip_type = ap6212<br>[    <span class="hljs-number">1.830552</span>] [WLAN_RFKILL]: wlan_platdata_parse_dt: enable wifi power control.<br>[    <span class="hljs-number">1.830564</span>] [WLAN_RFKILL]: wlan_platdata_parse_dt: wifi power controled by gpio.<br>[    <span class="hljs-number">1.830624</span>] [WLAN_RFKILL]: wlan_platdata_parse_dt: WIFI,host_wake_irq = <span class="hljs-number">8</span>, flags = <span class="hljs-number">0.</span><br>[    <span class="hljs-number">1.830656</span>] [WLAN_RFKILL]: rfkill_wlan_probe: init gpio<br>[    <span class="hljs-number">1.830671</span>] [WLAN_RFKILL]: Exit rfkill_wlan_probe<br>[    <span class="hljs-number">1.830967</span>] [BT_RFKILL]: bluetooth_platdata_parse_dt: get property: uart_rts_gpios = <span class="hljs-number">48.</span><br>[    <span class="hljs-number">1.830999</span>] [BT_RFKILL]: bluetooth_platdata_parse_dt: get property: BT,power_gpio = <span class="hljs-number">7.</span><br>[    <span class="hljs-number">1.831046</span>] [BT_RFKILL]: bluetooth_platdata_parse_dt: get property: BT,wake_host_irq = <span class="hljs-number">5.</span><br>[    <span class="hljs-number">1.831090</span>] [BT_RFKILL]: bluetooth_platdata_parse_dt: clk_get failed!!!.<br>[    <span class="hljs-number">1.831157</span>] [BT_RFKILL]: Request irq <span class="hljs-keyword">for</span> bt wakeup host<br>[    <span class="hljs-number">1.831336</span>] [BT_RFKILL]: ** disable irq<br>[    <span class="hljs-number">1.831577</span>] [BT_RFKILL]: bt_default device registered.<br>[    <span class="hljs-number">1.831592</span>] mmc1: queuing unknown CIS tuple <span class="hljs-number">0x80</span> (<span class="hljs-number">2</span> bytes)<br>[    <span class="hljs-number">1.832685</span>] flash vendor_init_thread!<br>[    <span class="hljs-number">1.832713</span>] flash vendor storage:<span class="hljs-number">20170308</span> ret = <span class="hljs-number">-1</span><br>[    <span class="hljs-number">1.833227</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: driver version: <span class="hljs-number">00.01</span><span class="hljs-number">.06</span><br>[    <span class="hljs-number">1.833247</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>:  Get hdr mode failed! no hdr <span class="hljs-keyword">default</span><br>[    <span class="hljs-number">1.833365</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: could not get sleep pinstate<br>[    <span class="hljs-number">1.833469</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.833519</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.833572</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.833974</span>] mmc1: queuing unknown CIS tuple <span class="hljs-number">0x80</span> (<span class="hljs-number">3</span> bytes)<br>[    <span class="hljs-number">1.835680</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Unexpected sensor id(<span class="hljs-number">000000</span>), ret(<span class="hljs-number">-5</span>)<br>[    <span class="hljs-number">1.835757</span>] mmc1: queuing unknown CIS tuple <span class="hljs-number">0x80</span> (<span class="hljs-number">3</span> bytes)<br>[    <span class="hljs-number">1.837190</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.837271</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.837321</span>] imx335 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.837545</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: driver version: <span class="hljs-number">00.01</span><span class="hljs-number">.06</span><br>[    <span class="hljs-number">1.837569</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>:  Get hdr mode failed! no hdr <span class="hljs-keyword">default</span><br>[    <span class="hljs-number">1.837682</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: could not get sleep pinstate<br>[    <span class="hljs-number">1.837792</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.837866</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.837918</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Linked as a consumer to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.838720</span>] mmc1: queuing unknown CIS tuple <span class="hljs-number">0x80</span> (<span class="hljs-number">7</span> bytes)<br>[    <span class="hljs-number">1.839713</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Unexpected sensor id(<span class="hljs-number">000000</span>), ret(<span class="hljs-number">-5</span>)<br>[    <span class="hljs-number">1.840225</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.840287</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.840336</span>] imx335 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a<span class="hljs-number">-1</span>: Dropping the link to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.840598</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: driver version: <span class="hljs-number">00.01</span><span class="hljs-number">.06</span><br>[    <span class="hljs-number">1.840622</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a:  Get hdr mode failed! no hdr <span class="hljs-keyword">default</span><br>[    <span class="hljs-number">1.840739</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Failed to get power-gpios<br>[    <span class="hljs-number">1.840782</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: could not get sleep pinstate<br>[    <span class="hljs-number">1.840869</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.840925</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.840992</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.842668</span>] mmc1: queuing unknown CIS tuple <span class="hljs-number">0x81</span> (<span class="hljs-number">9</span> bytes)<br>[    <span class="hljs-number">1.852071</span>] vendor storage:<span class="hljs-number">20190527</span> ret = <span class="hljs-number">0</span><br>[    <span class="hljs-number">1.911758</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Unexpected sensor id(<span class="hljs-number">000000</span>), ret(<span class="hljs-number">-5</span>)<br>[    <span class="hljs-number">1.914199</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.914487</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.914582</span>] imx415 <span class="hljs-number">1</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.915023</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: driver version: <span class="hljs-number">00.01</span><span class="hljs-number">.06</span><br>[    <span class="hljs-number">1.915059</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a:  Get hdr mode failed! no hdr <span class="hljs-keyword">default</span><br>[    <span class="hljs-number">1.915324</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Failed to get power-gpios<br>[    <span class="hljs-number">1.915413</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: could not get sleep pinstate<br>[    <span class="hljs-number">1.915575</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.915738</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.915832</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Linked as a consumer to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.937889</span>] mmc_host mmc1: Bus speed (slot <span class="hljs-number">0</span>) = <span class="hljs-number">50000000</span>Hz (slot req <span class="hljs-number">50000000</span>Hz, actual <span class="hljs-number">50000000</span>HZ div = <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">1.940906</span>] mmc1: new high speed SDIO card at address <span class="hljs-number">0001</span><br>[    <span class="hljs-number">1.989577</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Unexpected sensor id(<span class="hljs-number">000000</span>), ret(<span class="hljs-number">-5</span>)<br>[    <span class="hljs-number">1.992907</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.14</span><br>[    <span class="hljs-number">1.993144</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.13</span><br>[    <span class="hljs-number">1.993288</span>] imx415 <span class="hljs-number">5</span><span class="hljs-number">-001</span>a: Dropping the link to regulator<span class="hljs-number">.15</span><br>[    <span class="hljs-number">1.994050</span>] Registering SWP/SWPB emulation handler<br>[    <span class="hljs-number">1.999726</span>] Loading compiled-in X<span class="hljs-number">.509</span> certificates<br>[    <span class="hljs-number">2.001802</span>] rga2: Driver loaded successfully ver:<span class="hljs-number">3.2</span><span class="hljs-number">.56726</span><br>[    <span class="hljs-number">2.002164</span>] rga2: Module initialized.<br>[    <span class="hljs-number">2.026237</span>] phy phy-ff4c8000.usb2-phy<span class="hljs-number">.2</span>: Linked as a consumer to regulator<span class="hljs-number">.18</span><br>[    <span class="hljs-number">2.028809</span>] mpp_rkvenc ffbb0000.rkvenc: probing start<br>[    <span class="hljs-number">2.029863</span>] mpp_rkvenc ffbb0000.rkvenc: Linked as a consumer to regulator<span class="hljs-number">.4</span><br>[    <span class="hljs-number">2.029940</span>] mpp_rkvenc ffbb0000.rkvenc: bin=<span class="hljs-number">0</span><br>[    <span class="hljs-number">2.029961</span>] mpp_rkvenc ffbb0000.rkvenc: leakage=<span class="hljs-number">2.0</span><br>[    <span class="hljs-number">2.030017</span>] mpp_rkvenc ffbb0000.rkvenc: Failed to get pvtm<br>[    <span class="hljs-number">2.030043</span>] mpp_rkvenc ffbb0000.rkvenc: bin-scale=<span class="hljs-number">37</span><br>[    <span class="hljs-number">2.030321</span>] mpp_rkvenc ffbb0000.rkvenc: avs=<span class="hljs-number">0</span><br>[    <span class="hljs-number">2.030544</span>] mpp_rkvenc ffbb0000.rkvenc: failed to find power_model node<br>[    <span class="hljs-number">2.030557</span>] mpp_rkvenc ffbb0000.rkvenc: failed to initialize power model<br>[    <span class="hljs-number">2.030675</span>] mpp_rkvenc ffbb0000.rkvenc: l=<span class="hljs-number">-2147483648</span> h=<span class="hljs-number">2147483647</span> hyst=<span class="hljs-number">0</span> l_limit=<span class="hljs-number">0</span> h_limit=<span class="hljs-number">0</span> h_table=<span class="hljs-number">0</span><br>[    <span class="hljs-number">2.030695</span>] mpp_rkvenc ffbb0000.rkvenc: failed to read out thermal zone (<span class="hljs-number">-22</span>)<br>[    <span class="hljs-number">2.031966</span>] mpp_rkvenc ffbb0000.rkvenc: probing finish<br>[    <span class="hljs-number">2.033725</span>] rockchip-drm display-subsystem: devfreq is not <span class="hljs-built_in">set</span><br>[    <span class="hljs-number">2.033981</span>] rockchip-drm display-subsystem: bound ffb00000.vop (ops <span class="hljs-number">0xb093eac0</span>)<br>[    <span class="hljs-number">2.034029</span>] rockchip-drm display-subsystem: bound ffb30000.dsi (ops <span class="hljs-number">0xb09451f4</span>)<br>[    <span class="hljs-number">2.034044</span>] [drm] Supports vblank timestamp caching Rev <span class="hljs-number">2</span> (<span class="hljs-number">21.10</span><span class="hljs-number">.2013</span>).<br>[    <span class="hljs-number">2.034053</span>] [drm] No driver support <span class="hljs-keyword">for</span> vblank timestamp query.<br>[    <span class="hljs-number">2.078690</span>] rockchip-drm display-subsystem: fb0:  frame buffer device<br>[    <span class="hljs-number">2.080738</span>] [drm] Initialized rockchip <span class="hljs-number">2.0</span><span class="hljs-number">.0</span> <span class="hljs-number">20140818</span> <span class="hljs-keyword">for</span> display-subsystem on minor <span class="hljs-number">0</span><br>[    <span class="hljs-number">2.084535</span>] ehci-platform ffe00000.usb: EHCI Host Controller<br>[    <span class="hljs-number">2.084612</span>] ehci-platform ffe00000.usb: new USB bus registered, assigned bus number <span class="hljs-number">1</span><br>[    <span class="hljs-number">2.084786</span>] ehci-platform ffe00000.usb: irq <span class="hljs-number">68</span>, io mem <span class="hljs-number">0xffe00000</span><br>[    <span class="hljs-number">2.097881</span>] ehci-platform ffe00000.usb: USB <span class="hljs-number">2.0</span> started, EHCI <span class="hljs-number">1.00</span><br>[    <span class="hljs-number">2.098214</span>] usb usb1: New USB device found, idVendor=<span class="hljs-number">1</span>d6b, idProduct=<span class="hljs-number">0002</span>, bcdDevice= <span class="hljs-number">4.19</span><br>[    <span class="hljs-number">2.098244</span>] usb usb1: New USB device strings: Mfr=<span class="hljs-number">3</span>, Product=<span class="hljs-number">2</span>, SerialNumber=<span class="hljs-number">1</span><br>[    <span class="hljs-number">2.098263</span>] usb usb1: Product: EHCI Host Controller<br>[    <span class="hljs-number">2.098289</span>] usb usb1: Manufacturer: Linux <span class="hljs-number">4.19</span><span class="hljs-number">.111</span> ehci_hcd<br>[    <span class="hljs-number">2.098312</span>] usb usb1: SerialNumber: ffe00000.usb<br>[    <span class="hljs-number">2.099834</span>] hub <span class="hljs-number">1</span><span class="hljs-number">-0</span>:<span class="hljs-number">1.0</span>: USB hub found<br>[    <span class="hljs-number">2.099920</span>] hub <span class="hljs-number">1</span><span class="hljs-number">-0</span>:<span class="hljs-number">1.0</span>: <span class="hljs-number">1</span> port detected<br>[    <span class="hljs-number">2.101105</span>] ohci-platform ffe10000.usb: Generic Platform OHCI controller<br>[    <span class="hljs-number">2.101170</span>] ohci-platform ffe10000.usb: new USB bus registered, assigned bus number <span class="hljs-number">2</span><br>[    <span class="hljs-number">2.101453</span>] ohci-platform ffe10000.usb: irq <span class="hljs-number">69</span>, io mem <span class="hljs-number">0xffe10000</span><br>[    <span class="hljs-number">2.162397</span>] usb usb2: New USB device found, idVendor=<span class="hljs-number">1</span>d6b, idProduct=<span class="hljs-number">0001</span>, bcdDevice= <span class="hljs-number">4.19</span><br>[    <span class="hljs-number">2.162466</span>] usb usb2: New USB device strings: Mfr=<span class="hljs-number">3</span>, Product=<span class="hljs-number">2</span>, SerialNumber=<span class="hljs-number">1</span><br>[    <span class="hljs-number">2.162494</span>] usb usb2: Product: Generic Platform OHCI controller<br>[    <span class="hljs-number">2.162520</span>] usb usb2: Manufacturer: Linux <span class="hljs-number">4.19</span><span class="hljs-number">.111</span> ohci_hcd<br>[    <span class="hljs-number">2.162546</span>] usb usb2: SerialNumber: ffe10000.usb<br>[    <span class="hljs-number">2.164103</span>] hub <span class="hljs-number">2</span><span class="hljs-number">-0</span>:<span class="hljs-number">1.0</span>: USB hub found<br>[    <span class="hljs-number">2.164177</span>] hub <span class="hljs-number">2</span><span class="hljs-number">-0</span>:<span class="hljs-number">1.0</span>: <span class="hljs-number">1</span> port detected<br>[    <span class="hljs-number">2.165265</span>] input: adc-keys as /devices/platform/adc-keys/input/input1<br>[    <span class="hljs-number">2.172169</span>] asoc-simple-card rk809-sound: rk817-hifi &lt;-&gt; ff800000.i2s mapping ok<br>[    <span class="hljs-number">2.172236</span>] asoc-simple-card rk809-sound: ASoC: no source widget found <span class="hljs-keyword">for</span> MICBIAS1<br>[    <span class="hljs-number">2.172251</span>] asoc-simple-card rk809-sound: ASoC: Failed to add route MICBIAS1 -&gt; direct -&gt; Mic Jack<br>[    <span class="hljs-number">2.172265</span>] asoc-simple-card rk809-sound: ASoC: no sink widget found <span class="hljs-keyword">for</span> IN1P<br>[    <span class="hljs-number">2.172284</span>] asoc-simple-card rk809-sound: ASoC: Failed to add route Mic Jack -&gt; direct -&gt; IN1P<br>[    <span class="hljs-number">2.172297</span>] asoc-simple-card rk809-sound: ASoC: no source widget found <span class="hljs-keyword">for</span> HPOL<br>[    <span class="hljs-number">2.172312</span>] asoc-simple-card rk809-sound: ASoC: Failed to add route HPOL -&gt; direct -&gt; Headphone Jack<br>[    <span class="hljs-number">2.172327</span>] asoc-simple-card rk809-sound: ASoC: no source widget found <span class="hljs-keyword">for</span> HPOR<br>[    <span class="hljs-number">2.172342</span>] asoc-simple-card rk809-sound: ASoC: Failed to add route HPOR -&gt; direct -&gt; Headphone Jack<br>[    <span class="hljs-number">2.175674</span>] rkcif rkcif_mipi_lvds: clear unready subdev num: <span class="hljs-number">2</span><br>[    <span class="hljs-number">2.175724</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.176739</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.176785</span>] rkcif_mipi_lvds: Async subdev notifier completed<br>[    <span class="hljs-number">2.177342</span>] cfg80211: Loading compiled-in X<span class="hljs-number">.509</span> certificates <span class="hljs-keyword">for</span> regulatory database<br>[    <span class="hljs-number">2.182108</span>] cfg80211: Loaded X<span class="hljs-number">.509</span> cert <span class="hljs-string">&#x27;sforshee: 00b28ddf47aef9cea7&#x27;</span><br>[    <span class="hljs-number">2.182673</span>] platform regulatory<span class="hljs-number">.0</span>: Direct firmware load <span class="hljs-keyword">for</span> regulatory.db failed with error <span class="hljs-number">-2</span><br>[    <span class="hljs-number">2.182725</span>] cfg80211: failed to load regulatory.db<br>[    <span class="hljs-number">2.182858</span>] rkisp rkisp-vir0: clear unready subdev num: <span class="hljs-number">1</span><br>[    <span class="hljs-number">2.183425</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.183442</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.183464</span>] rkisp0: Invalid mipi data type<br>[    <span class="hljs-number">2.183481</span>] rkisp0: update sensor failed<br>[    <span class="hljs-number">2.183500</span>] rkisp rkisp-vir1: clear unready subdev num: <span class="hljs-number">3</span><br>[    <span class="hljs-number">2.183516</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.183955</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.183972</span>] rkisp1: update sensor failed<br>[    <span class="hljs-number">2.184074</span>] ALSA device <span class="hljs-built_in">list</span>:<br>[    <span class="hljs-number">2.184088</span>]   #<span class="hljs-number">0</span>: rockchip,rk809-codec<br>[    <span class="hljs-number">2.184102</span>]   #<span class="hljs-number">7</span>: Loopback <span class="hljs-number">1</span><br>[    <span class="hljs-number">2.187586</span>] EXT4-fs (mmcblk0p6): INFO: recovery required on readonly filesystem<br>[    <span class="hljs-number">2.187622</span>] EXT4-fs (mmcblk0p6): write access will be enabled during recovery<br>[    <span class="hljs-number">2.230755</span>] EXT4-fs (mmcblk0p6): recovery complete<br>[    <span class="hljs-number">2.233189</span>] EXT4-fs (mmcblk0p6): mounted filesystem with ordered data mode. Opts: (null)<br>[    <span class="hljs-number">2.233294</span>] VFS: Mounted root (ext4 filesystem) readonly on device <span class="hljs-number">179</span>:<span class="hljs-number">6.</span><br>[    <span class="hljs-number">2.237298</span>] devtmpfs: mounted<br>[    <span class="hljs-number">2.239300</span>] Freeing unused kernel memory: <span class="hljs-number">1024</span>K<br>[    <span class="hljs-number">2.239722</span>] Run /sbin/init as init process<br>[    <span class="hljs-number">2.318392</span>] EXT4-fs (mmcblk0p6): re-mounted. Opts: (null)<br>[    <span class="hljs-number">2.434486</span>] usb <span class="hljs-number">1</span><span class="hljs-number">-1</span>: new high-speed USB device number <span class="hljs-number">2</span> using ehci-platform<br>NAME=Buildroot<br>VERSION=<span class="hljs-number">2018.02</span>-rc3-gbce284f14-dirty<br>ID=buildroot<br>VERSION_ID=<span class="hljs-number">2018.02</span>-rc3<br>PRETTY_NAME=<span class="hljs-string">&quot;Buildroot 2018.02-rc3&quot;</span><br>Starting logging: OK<br>/usr/bin/modetest<br>[    <span class="hljs-number">2.589351</span>] usb <span class="hljs-number">1</span><span class="hljs-number">-1</span>: New USB device found, idVendor=<span class="hljs-number">1</span>a40, idProduct=<span class="hljs-number">0101</span>, bcdDevice= <span class="hljs-number">1.00</span><br>[    <span class="hljs-number">2.589391</span>] usb <span class="hljs-number">1</span><span class="hljs-number">-1</span>: New USB device strings: Mfr=<span class="hljs-number">0</span>, Product=<span class="hljs-number">1</span>, SerialNumber=<span class="hljs-number">0</span><br>[    <span class="hljs-number">2.589403</span>] usb <span class="hljs-number">1</span><span class="hljs-number">-1</span>: Product: USB2<span class="hljs-number">.0</span> HUB<br>[    <span class="hljs-number">2.590089</span>] hub <span class="hljs-number">1</span><span class="hljs-number">-1</span>:<span class="hljs-number">1.0</span>: USB hub found<br>[    <span class="hljs-number">2.590210</span>] hub <span class="hljs-number">1</span><span class="hljs-number">-1</span>:<span class="hljs-number">1.0</span>: <span class="hljs-number">4</span> ports detected<br>Populating /dev using udev: [    <span class="hljs-number">2.656551</span>] udevd[<span class="hljs-number">126</span>]: starting version <span class="hljs-number">3.2</span><span class="hljs-number">.7</span><br>[    <span class="hljs-number">2.665132</span>] udevd[<span class="hljs-number">126</span>]: specified group <span class="hljs-string">&#x27;kvm&#x27;</span> unknown<br>[    <span class="hljs-number">2.683657</span>] udevd[<span class="hljs-number">127</span>]: starting eudev<span class="hljs-number">-3.2</span><span class="hljs-number">.7</span><br>[    <span class="hljs-number">2.825209</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.831856</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.836481</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.840719</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>[    <span class="hljs-number">2.855573</span>] rockchip-mipi-dphy-rx: No link between dphy and sensor<br>done<br>Initializing random number generator... done.<br>Will now mount all partitions in /etc/fstab<br>Note: Will <span class="hljs-keyword">auto</span> format partitons, remove /.auto_mkfs to disable<br>Note: Create /.skip_fsck to skip fsck<br> - The check might take a <span class="hljs-keyword">while</span> <span class="hljs-keyword">if</span> didn<span class="hljs-number">&#x27;</span>t shutdown properly!<br>Handling rootfs: /dev/mmcblk0p6 / ext2 rw,noauto <span class="hljs-number">1</span><br>Checking /dev/mmcblk0p6(ext2)<br>[    <span class="hljs-number">3.414384</span>] EXT4-fs (mmcblk0p6): re-mounted. Opts: (null)<br>e2fsck <span class="hljs-number">1.43</span><span class="hljs-number">.9</span> (<span class="hljs-number">8</span>-Feb<span class="hljs-number">-2018</span>)<br>rootfs: clean, <span class="hljs-number">6940</span>/<span class="hljs-number">65536</span> files, <span class="hljs-number">150417</span>/<span class="hljs-number">262144</span> blocks<br>[    <span class="hljs-number">3.463967</span>] EXT4-fs (mmcblk0p6): re-mounted. Opts: (null)<br>Handling misc: /dev/mmcblk0p2 /misc emmc defaults <span class="hljs-number">0</span><br>Unsupported file system emmc <span class="hljs-keyword">for</span> /dev/mmcblk0p2<br>Handling oem: /dev/mmcblk0p7 /oem ext2 defaults <span class="hljs-number">2</span><br>Checking /dev/mmcblk0p7(ext2)<br>e2fsck <span class="hljs-number">1.43</span><span class="hljs-number">.9</span> (<span class="hljs-number">8</span>-Feb<span class="hljs-number">-2018</span>)<br>oem: recovering journal<br>oem: clean, <span class="hljs-number">378</span>/<span class="hljs-number">48960</span> files, <span class="hljs-number">153196</span>/<span class="hljs-number">196608</span> blocks<br>Mounting /dev/mmcblk0p7(ext2) on /oem <br>[    <span class="hljs-number">3.931771</span>] EXT4-fs (mmcblk0p7): mounted filesystem with ordered data mode. Opts: (null)<br>Handling userdata: /dev/mmcblk0p8 /userdata ext2 defaults <span class="hljs-number">2</span><br>Checking /dev/mmcblk0p8(ext2)<br>e2fsck <span class="hljs-number">1.43</span><span class="hljs-number">.9</span> (<span class="hljs-number">8</span>-Feb<span class="hljs-number">-2018</span>)<br>userdata was not cleanly unmounted, check forced.<br>Pass <span class="hljs-number">1</span>: Checking inodes, blocks, and sizes<br>Pass <span class="hljs-number">2</span>: Checking directory structure<br>Pass <span class="hljs-number">3</span>: Checking directory connectivity<br>Pass <span class="hljs-number">4</span>: Checking reference counts<br>Pass <span class="hljs-number">5</span>: Checking group summary information<br>userdata: <span class="hljs-number">25</span>/<span class="hljs-number">65536</span> files (<span class="hljs-number">0.0</span>% non-contiguous), <span class="hljs-number">19547</span>/<span class="hljs-number">1048576</span> blocks<br>Mounting /dev/mmcblk0p8(ext2) on /userdata <br>[    <span class="hljs-number">4.962842</span>] EXT4-fs (mmcblk0p8): mounting ext2 file system using the ext4 subsystem<br>[    <span class="hljs-number">4.968265</span>] EXT4-fs (mmcblk0p8): mounted filesystem without journal. Opts: (null)<br>Handling demo: /dev/mmcblk0p10 /demo ext4 defaults <span class="hljs-number">0</span><br>Mounting /dev/mmcblk0p10(ext4) on /demo <br>[    <span class="hljs-number">5.168752</span>] EXT4-fs (mmcblk0p10): recovery complete<br>[    <span class="hljs-number">5.169296</span>] EXT4-fs (mmcblk0p10): mounted filesystem with ordered data mode. Opts: (null)<br>Log saved to /tmp/mountall.<span class="hljs-built_in">log</span><br>Starting system message bus: done<br>/etc/init.d/S36load_rv1109_wifi_modules: line <span class="hljs-number">45</span>: can<span class="hljs-number">&#x27;</span>t create /sys/class/rfkill/rfkill1/state: nonexistent directory<br>load wifi modules: [    <span class="hljs-number">5.345126</span>] dhd_module_init: in Dongle Host Driver, version <span class="hljs-number">1.579</span><span class="hljs-number">.77</span><span class="hljs-number">.41</span><span class="hljs-number">.22</span> (r<span class="hljs-number">-20191105</span><span class="hljs-number">-2</span>)(<span class="hljs-number">20191120</span><span class="hljs-number">-1</span>)<br>[    <span class="hljs-number">5.345168</span>] ======== dhd_wlan_init_plat_data ========<br>[    <span class="hljs-number">5.345177</span>] [WLAN_RFKILL]: rockchip_wifi_get_oob_irq: Enter<br>[    <span class="hljs-number">5.345254</span>] dhd_wlan_init_gpio: WL_HOST_WAKE=<span class="hljs-number">-1</span>, oob_irq=<span class="hljs-number">108</span>, oob_irq_flags=<span class="hljs-number">0x414</span><br>[    <span class="hljs-number">5.345302</span>] dhd_wlan_init_gpio: WL_REG_ON=<span class="hljs-number">-1</span><br>[    <span class="hljs-number">5.345309</span>] dhd_wifi_platform_load: Enter<br>[    <span class="hljs-number">5.345322</span>] Power-up adapter <span class="hljs-string">&#x27;DHD generic adapter&#x27;</span><br>[    <span class="hljs-number">5.346652</span>] wifi_platform_set_power = <span class="hljs-number">1</span><br>[    <span class="hljs-number">5.346678</span>] ======== PULL WL_REG_ON(<span class="hljs-number">-1</span>) HIGH! ========<br>[    <span class="hljs-number">5.346688</span>] [WLAN_RFKILL]: rockchip_wifi_power: <span class="hljs-number">1</span><br>[    <span class="hljs-number">5.346697</span>] [WLAN_RFKILL]: wifi turn on power [GPIO<span class="hljs-number">-1</span><span class="hljs-number">-0</span>]<br>[    <span class="hljs-number">5.651451</span>] wifi_platform_bus_enumerate device present <span class="hljs-number">1</span><br>[    <span class="hljs-number">5.651509</span>] ======== Card detection to detect SDIO card! ========<br>[    <span class="hljs-number">5.651533</span>] mmc1:mmc host rescan start!<br>[    <span class="hljs-number">5.668053</span>] bcmsdh_register: <span class="hljs-keyword">register</span> client driver<br>[    <span class="hljs-number">5.669717</span>] bcmsdh_sdmmc_probe: Enter num=<span class="hljs-number">1</span><br>[    <span class="hljs-number">5.670261</span>] bcmsdh_sdmmc_probe: Enter num=<span class="hljs-number">2</span><br>[    <span class="hljs-number">5.670283</span>] bus num (host idx)=<span class="hljs-number">1</span>, slot num (rca)=<span class="hljs-number">1</span><br>[    <span class="hljs-number">5.670299</span>] found adapter info <span class="hljs-string">&#x27;DHD generic adapter&#x27;</span><br>[    <span class="hljs-number">5.670404</span>] sdioh_attach: <span class="hljs-built_in">set</span> sd_f2_blocksize <span class="hljs-number">256</span><br>[    <span class="hljs-number">5.670484</span>] sdioh_attach: sd clock rate = <span class="hljs-number">0</span><br>[    <span class="hljs-number">5.670888</span>] dhdsdio_probe : no mutex held. <span class="hljs-built_in">set</span> lock<br>[    <span class="hljs-number">5.671144</span>] F1 signature read @<span class="hljs-number">0x18000000</span>=<span class="hljs-number">0x1541a9a6</span><br>[    <span class="hljs-number">5.675047</span>] F1 signature OK, socitype:<span class="hljs-number">0x1</span> chip:<span class="hljs-number">0xa9a6</span> rev:<span class="hljs-number">0x1</span> pkg:<span class="hljs-number">0x4</span><br>[    <span class="hljs-number">5.676268</span>] DHD: dongle ram size is <span class="hljs-built_in">set</span> to <span class="hljs-number">524288</span>(orig <span class="hljs-number">524288</span>) at <span class="hljs-number">0x0</span><br>[    <span class="hljs-number">5.676462</span>] [dhd] dhd_conf_set_chiprev : chip=<span class="hljs-number">0xa9a6</span>, chiprev=<span class="hljs-number">1</span><br>[    <span class="hljs-number">5.676698</span>] [dhd] CFG80211-ERROR) wl_setup_wiphy : Registering Vendor80211<br>[    <span class="hljs-number">5.677159</span>] [dhd] CFG80211-ERROR) wl_setup_wiphy : SAE support<br>[    <span class="hljs-number">5.677382</span>] [dhd] CFG80211-ERROR) wl_init_prof : wl_init_prof: No profile<br>[    <span class="hljs-number">5.678502</span>] dhd_attach(): thread:dhd_watchdog_thread:<span class="hljs-number">266</span> started<br>[    <span class="hljs-number">5.679293</span>] dhd_attach(): thread:dhd_dpc:<span class="hljs-number">267</span> started<br>[    <span class="hljs-number">5.679478</span>] dhd_attach(): thread:dhd_rxf:<span class="hljs-number">268</span> started<br>[    <span class="hljs-number">5.679515</span>] dhd_deferred_work_init: work <span class="hljs-built_in">queue</span> initialized<br>[    <span class="hljs-number">5.679530</span>] dhd_tcpack_suppress_set: TCP ACK Suppress mode <span class="hljs-number">0</span> -&gt; mode <span class="hljs-number">2</span><br>[    <span class="hljs-number">5.679579</span>] dhd_bus_set_default_min_res_mask: Unhandled chip id<br>[    <span class="hljs-number">5.679906</span>] sdioh_cis_read: func_cis_ptr[<span class="hljs-number">0</span>]=<span class="hljs-number">0x1070</span><br>[    <span class="hljs-number">5.690786</span>] Dongle Host Driver, version <span class="hljs-number">1.579</span><span class="hljs-number">.77</span><span class="hljs-number">.41</span><span class="hljs-number">.22</span> (r<span class="hljs-number">-20191105</span><span class="hljs-number">-2</span>)(<span class="hljs-number">20191120</span><span class="hljs-number">-1</span>)<br>[    <span class="hljs-number">5.691431</span>] Register interface [wlan0]  MAC: <span class="hljs-number">08</span>:e9:f6:eb:<span class="hljs-number">38</span>:<span class="hljs-number">26</span><br>[    <span class="hljs-number">5.691431</span>] <br>[    <span class="hljs-number">5.691538</span>] dhd_tcpack_suppress_set: TCP ACK Suppress mode <span class="hljs-number">2</span> -&gt; mode <span class="hljs-number">0</span><br>[    <span class="hljs-number">5.691578</span>] dhd_wl_ioctl: returnOK<br>ing as busstate=<span class="hljs-number">0</span><br>[    <span class="hljs-number">5.691596</span>] dhd_dbg_detach_pkt_monitor, <span class="hljs-number">2204</span><br>[    <span class="hljs-number">5.691610</span>] dhd_bus_devreset: == Power OFF ==<br>[    <span class="hljs-number">5.691956</span>] bcmsdh_oob_intr_unregister: Enter<br>[    <span class="hljs-number">5.691984</span>] bcmsdh_oob_intr_unregister: irq is not registered<br>[    <span class="hljs-number">5.692006</span>] dhd_txglom_enable: enable <span class="hljs-number">0</span><br>[    <span class="hljs-number">5.692020</span>] dhd_bus_devreset:  WLAN OFF DONE<br>[    <span class="hljs-number">5.692081</span>] wifi_platform_set_power = <span class="hljs-number">0</span><br>[    <span class="hljs-number">5.692093</span>] ======== PULL WL_REG_ON(<span class="hljs-number">-1</span>) LOW! ========<br>[    <span class="hljs-number">5.692103</span>] [WLAN_RFKILL]: rockchip_wifi_power: <span class="hljs-number">0</span><br>[    <span class="hljs-number">5.692126</span>] [WLAN_RFKILL]: wifi shut off power [GPIO<span class="hljs-number">-1</span><span class="hljs-number">-1</span>]<br>[    <span class="hljs-number">5.692141</span>] dhdsdio_probe : the lock is released.<br>[    <span class="hljs-number">5.692482</span>] dhd_module_init: Exit err=<span class="hljs-number">0</span><br>Starting network: OK<br>Starting connman ... done.<br>No state is present <span class="hljs-keyword">for</span> card Loopback<br>alsactl: parse:<span class="hljs-number">1669</span>: Unable to open file <span class="hljs-string">&#x27;/usr/share/alsa/init/00main&#x27;</span>: No such file or directory<br>No state is present <span class="hljs-keyword">for</span> card Loopback<br>Starting ntpd: [    <span class="hljs-number">5.831824</span>] Generic PHY stmmac<span class="hljs-number">-0</span>:<span class="hljs-number">00</span>: attached PHY driver [Generic PHY] (mii_bus:phy_addr=stmmac<span class="hljs-number">-0</span>:<span class="hljs-number">00</span>, irq=POLL)<br>[    <span class="hljs-number">5.832558</span>] rk_gmac-dwmac ffc40000.ethernet: rk_get_eth_addr: mac address: <span class="hljs-number">0</span>a:<span class="hljs-number">0</span>c:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">35</span>:ad<br>[    <span class="hljs-number">5.832576</span>] rk_gmac-dwmac ffc40000.ethernet: device MAC address <span class="hljs-number">0</span>a:<span class="hljs-number">0</span>c:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">35</span>:ad<br>OK<br>[    <span class="hljs-number">5.842604</span>] dwmac4: Master AXI performs any burst length<br>[    <span class="hljs-number">5.842665</span>] rk_gmac-dwmac ffc40000.ethernet eth0: No Safety Features support found<br>[    <span class="hljs-number">5.842693</span>] rk_gmac-dwmac ffc40000.ethernet eth0: IEEE <span class="hljs-number">1588</span><span class="hljs-number">-2008</span> Advanced Timestamp supported<br>[    <span class="hljs-number">5.844192</span>] rk_gmac-dwmac ffc40000.ethernet eth0: registered PTP clock<br>Starting QDesktop...<br>Starting dropbear sshd: OK<br>Starting fcgiwrap daemon: OK<br>Starting nginx...<br>Debug: configfs_init<br>[    <span class="hljs-number">6.129614</span>] file system registered<br>mkdir: cannot create directory <span class="hljs-string">&#x27;/sys/kernel/config/usb_gadget/rockchip/functions/mtp.gs0&#x27;</span>: No such file or directory<br>[    <span class="hljs-number">6.150753</span>] using random self ethernet address<br>[    <span class="hljs-number">6.150804</span>] using random host ethernet address<br>mkdir: cannot create directory <span class="hljs-string">&#x27;/sys/kernel/config/usb_gadget/rockchip/functions/acm.gs6&#x27;</span>: No such file or directory<br>mkdir: cannot create directory <span class="hljs-string">&#x27;/sys/kernel/config/usb_gadget/rockchip/functions/mass_storage.0&#x27;</span>: No such file or directory<br>mkdir: cannot create directory <span class="hljs-string">&#x27;/sys/kernel/config/usb_gadget/rockchip/functions/hid.usb0&#x27;</span>: No such file or directory<br>[    <span class="hljs-number">6.245207</span>] read descriptors<br>[    <span class="hljs-number">6.245256</span>] read strings<br>[    <span class="hljs-number">6.526868</span>] Freeing drm_logo memory: <span class="hljs-number">1044</span>K<br>[    <span class="hljs-number">6.858717</span>] rk_gmac-dwmac ffc40000.ethernet eth0: Link is Up - <span class="hljs-number">100</span>Mbps/Full - flow control rx/tx<br>insmod NPU modules: [    <span class="hljs-number">7.283205</span>] galcore: loading out-of-tree module taints kernel.<br>[    <span class="hljs-number">7.295367</span>] galcore: npu init.<br>[    <span class="hljs-number">7.296369</span>] galcore: start npu probe.<br>[    <span class="hljs-number">7.296534</span>] galcore ffbc0000.npu: Linked as a consumer to regulator<span class="hljs-number">.4</span><br>[    <span class="hljs-number">7.296691</span>] npu: platform_get_irq irq = <span class="hljs-number">67</span><br>[    <span class="hljs-number">7.296703</span>] npu: platform_get_resource registerMemBase = ffbc0000, registerMemSize = <span class="hljs-number">4000</span><br>[    <span class="hljs-number">7.296713</span>] Galcore version <span class="hljs-number">6.4</span><span class="hljs-number">.6</span><span class="hljs-number">.5</span><span class="hljs-number">.351518</span><br>[    <span class="hljs-number">7.296719</span>] Galcore options:<br>[    <span class="hljs-number">7.296727</span>]   irqLine           = <span class="hljs-number">67</span><br>[    <span class="hljs-number">7.296735</span>]   registerMemBase   = <span class="hljs-number">0xFFBC0000</span><br>[    <span class="hljs-number">7.296743</span>]   registerMemSize   = <span class="hljs-number">0x00004000</span><br>[    <span class="hljs-number">7.296751</span>]   contiguousSize    = <span class="hljs-number">0x00400000</span><br>[    <span class="hljs-number">7.296758</span>]   contiguousBase    = <span class="hljs-number">0x0</span><br>[    <span class="hljs-number">7.296766</span>]   externalSize      = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.296773</span>]   externalBase      = <span class="hljs-number">0x0</span><br>[    <span class="hljs-number">7.296780</span>]   exclusiveSize     = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.296787</span>]   exclusiveBase     = <span class="hljs-number">0x0</span><br>[    <span class="hljs-number">7.296794</span>]   bankSize          = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.296801</span>]   fastClear         = <span class="hljs-number">-1</span><br>[    <span class="hljs-number">7.296808</span>]   compression       = <span class="hljs-number">15</span><br>[    <span class="hljs-number">7.296815</span>]   powerManagement   = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.296822</span>]   baseAddress       = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.296829</span>]   physSize          = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.296836</span>]   recovery          = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.296844</span>]   stuckDump         = <span class="hljs-number">0</span><br>[    <span class="hljs-number">7.296850</span>]   GPU smallBatch    = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.296857</span>]   allMapInOne       = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.296864</span>]   enableNN          = <span class="hljs-number">0xff</span><br>[    <span class="hljs-number">7.296871</span>]   userClusterMasks  = <br>[    <span class="hljs-number">7.296873</span>] ff, <br>[    <span class="hljs-number">7.296880</span>] ff, <br>[    <span class="hljs-number">7.296887</span>] ff, <br>[    <span class="hljs-number">7.296894</span>] ff, <br>[    <span class="hljs-number">7.296901</span>] ff, <br>[    <span class="hljs-number">7.296907</span>] ff, <br>[    <span class="hljs-number">7.296914</span>] ff, <br>[    <span class="hljs-number">7.296921</span>] ff, <br>[    <span class="hljs-number">7.296927</span>] <br>[    <span class="hljs-number">7.296938</span>]   irqs              = <br>[    <span class="hljs-number">7.296939</span>] <span class="hljs-number">67</span>, <br>[    <span class="hljs-number">7.296944</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296949</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296953</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296958</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296963</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296970</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296977</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296983</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296990</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.296997</span>] <span class="hljs-number">-1</span>, <br>[    <span class="hljs-number">7.297004</span>] <br>[    <span class="hljs-number">7.297017</span>]   registerBases     = <br>[    <span class="hljs-number">7.297018</span>] <span class="hljs-number">0xFFBC0000</span>, <br>[    <span class="hljs-number">7.297025</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297032</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297039</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297046</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297053</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297061</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297068</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297075</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297082</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297089</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297095</span>] <br>[    <span class="hljs-number">7.297106</span>]   registerSizes     = <br>[    <span class="hljs-number">7.297107</span>] <span class="hljs-number">0x00004000</span>, <br>[    <span class="hljs-number">7.297115</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297122</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297129</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297136</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297143</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297150</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297157</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297164</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297171</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297178</span>] <span class="hljs-number">0x00000000</span>, <br>[    <span class="hljs-number">7.297183</span>] <br>[    <span class="hljs-number">7.297191</span>]   chipIDs           = <br>[    <span class="hljs-number">7.297192</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297199</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297206</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297214</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297221</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297228</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297235</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297242</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297249</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297256</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297263</span>] <span class="hljs-number">0xFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297270</span>] <br>[    <span class="hljs-number">7.297281</span>]   core <span class="hljs-number">0</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297282</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297290</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297296</span>] <br>[    <span class="hljs-number">7.297307</span>]   core <span class="hljs-number">1</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297309</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297316</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297323</span>] <br>[    <span class="hljs-number">7.297336</span>]   core <span class="hljs-number">2</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297337</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297345</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297351</span>] <br>[    <span class="hljs-number">7.297362</span>]   core <span class="hljs-number">3</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297363</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297371</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297378</span>] <br>[    <span class="hljs-number">7.297388</span>]   core <span class="hljs-number">4</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297389</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297397</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297403</span>] <br>[    <span class="hljs-number">7.297412</span>]   core <span class="hljs-number">5</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297413</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297418</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297425</span>] <br>[    <span class="hljs-number">7.297435</span>]   core <span class="hljs-number">6</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297437</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297444</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.29745</span>OK<br><span class="hljs-number">1</span>] <br>[    <span class="hljs-number">7.297462</span>]   core <span class="hljs-number">7</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297463</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297470</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297477</span>] <br>[    <span class="hljs-number">7.297488</span>]   core <span class="hljs-number">8</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297489</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297496</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297503</span>] <br>[    <span class="hljs-number">7.297516</span>]   core <span class="hljs-number">9</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297518</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297525</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297532</span>] <br>[    <span class="hljs-number">7.297542</span>]   core <span class="hljs-number">10</span> internal sRAMBases = <br>[    <span class="hljs-number">7.297544</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297551</span>] <span class="hljs-number">0xFFFFFFFFFFFFFFFF</span>, <br>[    <span class="hljs-number">7.297558</span>] <br>[    <span class="hljs-number">7.297571</span>]   External sRAMBases = <br>[    <span class="hljs-number">7.297572</span>] <span class="hljs-number">0xffffffffffffffff</span>, <br>[    <span class="hljs-number">7.297580</span>] <span class="hljs-number">0xffffffffffffffff</span>, <br>[    <span class="hljs-number">7.297587</span>] <br>[    <span class="hljs-number">7.297597</span>]   mmuPageTablePool  = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.297605</span>]   mmuDynamicMap     = <span class="hljs-number">1</span>Starting vsftpd: <br>[    <span class="hljs-number">7.297612</span>]   isrPoll           = <span class="hljs-number">0x00000000</span><br>[    <span class="hljs-number">7.297619</span>] Build options:<br>[    <span class="hljs-number">7.297626</span>]   gcdGPU_TIMEOUT    = <span class="hljs-number">20000</span><br>[    <span class="hljs-number">7.297633</span>]   gcdGPU_2D_TIMEOUT = <span class="hljs-number">4000</span><br>[    <span class="hljs-number">7.297638</span>]   gcdINTERRUPT_STATISTIC = <span class="hljs-number">1</span><br>[    <span class="hljs-number">7.301683</span>] Galcore Info: ContiguousBase=<span class="hljs-number">0x7f95a000</span> ContiguousSize=<span class="hljs-number">0x400000</span><br>[    <span class="hljs-number">7.306407</span>] Galcore Info: MMU mapped core <span class="hljs-number">0</span> SRAM[<span class="hljs-number">0</span>] hardware virtual address=<span class="hljs-number">0x400000</span> size=<span class="hljs-number">0x40000</span><br>[    <span class="hljs-number">7.306439</span>] Galcore Info: MMU mapped core <span class="hljs-number">0</span> SRAM[<span class="hljs-number">1</span>] hardware virtual address=<span class="hljs-number">0x440000</span> size=<span class="hljs-number">0x40000</span><br>[    <span class="hljs-number">7.308171</span>] galcore ffbc0000.npu: Init npu devfreq<br>[    <span class="hljs-number">7.308235</span>] galcore ffbc0000.npu: bin=<span class="hljs-number">0</span><br>[    <span class="hljs-number">7.308295</span>] galcore ffbc0000.npu: leakage=<span class="hljs-number">1.625</span><br>[    <span class="hljs-number">7.319933</span>] galcore ffbc0000.npu: temp=<span class="hljs-number">45900</span>, pvtm=<span class="hljs-number">109066</span> (<span class="hljs-number">109066</span> + <span class="hljs-number">0</span>)<br>[    <span class="hljs-number">7.320189</span>] galcore ffbc0000.npu: pvtm-volt-sel=<span class="hljs-number">1</span><br>[    <span class="hljs-number">7.320241</span>] galcore ffbc0000.npu: bin-scale=<span class="hljs-number">23</span><br>[    <span class="hljs-number">7.320958</span>] galcore ffbc0000.npu: avs=<span class="hljs-number">0</span><br>[    <span class="hljs-number">7.321676</span>] galcore ffbc0000.npu: l=<span class="hljs-number">-2147483648</span> h=<span class="hljs-number">2147483647</span> hyst=<span class="hljs-number">0</span> l_limit=<span class="hljs-number">0</span> h_limit=<span class="hljs-number">0</span> h_table=<span class="hljs-number">0</span><br>[    <span class="hljs-number">7.321760</span>] galcore ffbc0000.npu: failed to read out thermal zone (<span class="hljs-number">-22</span>)<br>[    <span class="hljs-number">7.321886</span>] galcore ffbc0000.npu: failed to find power_model node<br>[    <span class="hljs-number">7.321905</span>] galcore ffbc0000.npu: failed to initialize power model<br>OK<br>Starting dnsmasq: <br>dnsmasq: failed to create listening socket <span class="hljs-keyword">for</span> port <span class="hljs-number">53</span>: Address already in use<br>FAIL<br>[    <span class="hljs-number">7.381137</span>] dwc3 ffd00000.dwc3: device reset<br>LOG_INFO :*** update_engine: Version V1<span class="hljs-number">.1</span><span class="hljs-number">.4</span> ***.<br> <br>LOG_INFO :Current Mode is recovery.<br> <br>Starting input-event-daemon: input-event-daemon: Start parsing /etc/input-event-daemon.conf...<br>input-event-daemon: Adding device: /dev/input/event0...<br>input-event-daemon: Adding device: /dev/input/event1...<br>input-event-daemon: open(/dev/input/event2): No such file or directory<br>input-event-daemon: Start listening on <span class="hljs-number">2</span> devices...<br>done<br>[root@ATK-DLRV1126:/]# [    <span class="hljs-number">7.442646</span>] android_work: sent uevent USB_STATE=CONNECTED<br>[    <span class="hljs-number">7.445779</span>] configfs-gadget gadget: high-speed config #<span class="hljs-number">1</span>: b<br>[    <span class="hljs-number">7.446048</span>] android_work: sent uevent USB_STATE=CONFIGURED<br>start rknn server, version:<span class="hljs-number">1.7</span><span class="hljs-number">.0</span> (<span class="hljs-number">7880361</span> build: <span class="hljs-number">2021</span><span class="hljs-number">-08</span><span class="hljs-number">-16</span> <span class="hljs-number">14</span>:<span class="hljs-number">05</span>:<span class="hljs-number">08</span>)<br>I NPUTransfer: Starting NPU Transfer Server, Transfer version <span class="hljs-number">2.1</span><span class="hljs-number">.0</span> (b5861e7@<span class="hljs-number">2020</span><span class="hljs-number">-11</span><span class="hljs-number">-23</span>T11:<span class="hljs-number">51</span>:<span class="hljs-number">07</span>)<br></code></pre></td></tr></table></figure><h2 id="��¼"><a href="#��¼" class="headerlink" title="��¼"></a>��¼</h2><p>��������д��ϵͳ���ܱ��ƻ������´��������������ʹ������ԭ�ӵ�ϵͳ�ļ�������¼��</p><h1 id="����-1"><a href="#����-1" class="headerlink" title="����"></a>����</h1><h1 id="��¼-1"><a href="#��¼-1" class="headerlink" title="��¼"></a>��¼</h1><h1 id="console"><a href="#console" class="headerlink" title="console"></a>console</h1><h1 id="����ԭ��RV1126����"><a href="#����ԭ��RV1126����" class="headerlink" title="����ԭ��RV1126����"></a>����ԭ��RV1126����</h1><h2 id="׼����������"><a href="#׼����������" class="headerlink" title="׼����������"></a>׼����������</h2><p>���²������ݸ�������ԭ�ӡ�ATK-DLRV1126 ϵͳ�����ֲ� V1.3��<font color = "ff28ff">P48</font>  </p><h3 id="��Դ"><a href="#��Դ" class="headerlink" title="��Դ"></a>��Դ</h3><p>���նˣ������Ҽ���Ҳ����Ctrl+Alt+T��  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo gedit  /etc/apt/sources.list<br></code></pre></td></tr></table></figure><p>ɾ���ļ������ݣ��滻�����£�</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># Ĭ��ע����Դ�뾵������� apt update �ٶȣ�������Ҫ������ȡ��ע��</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu-ports/</span> jammy main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu-ports/</span> jammy-updates main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu-ports/</span> jammy-backports main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu-ports/</span> jammy-security main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-security main restricted universe multiverse</span><br> <br><span class="hljs-comment"># Ԥ��������Դ������������</span><br><span class="hljs-comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse</span><br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt update &amp;&amp; sudo apt upgrade<br></code></pre></td></tr></table></figure><p>�������������س��Ὺʼ���£����ĵȴ���<br><img src="/data/attachment/forum/202306/14/111143h7br7pokqzkkdqkq.png.thumb.jpg?rand=2984.3217441693405" alt="705118"><br>����ȷ�϶Σ��������y���ٻس���<br><img src="/data/attachment/forum/202306/14/194800occlueszm1lsta1c.png.thumb.jpg?rand=4271.263404845585" alt="705341"><br>����<font color = "ff28ff">done</font>���۾�˵�����³ɹ���<br><img src="/data/attachment/forum/202306/14/194801eflbznoi5qgqoft5.png.thumb.jpg?rand=3751.1260063601903" alt="705342"></p><h3 id="��װ����"><a href="#��װ����" class="headerlink" title="��װ����"></a>��װ����</h3><p>���ƶ�Ӧ���������նˣ�����ʹ���Ҽ�ճ��Ҳ����ʹ��Ctrl+Shift+V�ķ�ʽճ�������� Ctrl+Shift+C��</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install device-tree-compiler git-core u-boot-tools mtools parted libudev-dev libusb-1.0-0-dev autoconf autotools-dev libsigsegv2 m4 intltool libdrm-dev curl sed make binutils build-essential gcc g++ bash patch gzip gawk bzip2 perl tar cpio python unzip rsync file bc wget libncurses5 libglib2.0-dev  libgtk2.0-dev libglade2-dev cvs git mercurial openssh-client subversion  asciidoc w3m dblatex graphviz libc6:i386 libssl-dev expect fakeroot cmake  flex bison liblz4-tool libtool keychain net-tools adb lib32gcc-7-dev g++-7  libstdc++-7-dev libncurses5-dev libncursesw5-dev openssh-server<br></code></pre></td></tr></table></figure><p>��Ҫ����y���س�ȷ�ϼ���<br><img src="/data/attachment/forum/202306/14/194801tyfcya23ca6apqjq.png.thumb.jpg?rand=2829.6497705586708" alt="705343"><br>����done,��װ���<br><img src="/data/attachment/forum/202306/14/194801ji36sz724p2lk662.png.thumb.jpg?rand=4940.579338245155" alt="705344"></p><h3 id="ʹ��ftp"><a href="#ʹ��ftp" class="headerlink" title="ʹ��ftp"></a>ʹ��ftp</h3><p>��������ԭ�ӡ�ATK-DLRV1126 ϵͳ�����ֲ� V1.3��<font color = "ff28ff">P51</font>  ���в���������ʵ��Windows��Ubuntu���ļ�����</p><h3 id="��װ���������"><a href="#��װ���������" class="headerlink" title="��װ���������"></a>��װ���������</h3><h2 id="����SDK"><a href="#����SDK" class="headerlink" title="����SDK"></a>����SDK</h2><h3 id="SDK�����"><a href="#SDK�����" class="headerlink" title="SDK�����"></a>SDK�����</h3><table><thead><tr><th>�ļ���</th><th>����</th></tr></thead><tbody><tr><td>app</td><td>����ϲ�Ӧ�ó����Ŀ¼</td></tr><tr><td>buildroot</td><td>SDK ��ʹ�õ��ļ�ϵͳΪ buildroot</td></tr><tr><td>build.sh</td><td>�����õĽű���ʹ�÷��������̡�</td></tr><tr><td>device&#x2F;rockchip</td><td>���ÿ��ƽ̨��һЩ����ʹ���̼��ĽŲ���Ԥ���ļ���</td></tr><tr><td>docs</td><td>��� RK ����ָ���ļ���ƽ̨֧���б�������ʹ���ĵ���Linux ����ָ�ϵȡ�</td></tr><tr><td>envsetup.sh</td><td>Ҫ�޸��ļ�ϵͳʱ��Ҫ���õĻ����ű���</td></tr><tr><td>external</td><td>�����صĿ⣬������Ƶ����Ƶ�ȡ�</td></tr><tr><td>kernel</td><td>kernel Դ�롣</td></tr><tr><td>makefile</td><td>���� SDK ������� Makefile��</td></tr><tr><td>mkfirmware.sh</td><td>�̼����ʹ�õĽű���Ĭ���ڵ�ǰ·���µ� rockdev Ŀ¼��</td></tr><tr><td>prebuilts</td><td>��Ž�����빤������</td></tr><tr><td>rkbin</td><td>��Ź̼��͹��ߡ�</td></tr><tr><td>rkflash.sh</td><td>linux �µ�ϵͳ��¼�ű���</td></tr><tr><td>tools</td><td>��Ź̼��͹��ߵ�Ŀ¼��</td></tr><tr><td>u-boot</td><td>U-boot Դ��Ŀ¼��</td></tr><tr><td>rockdev</td><td>��ű�������̼���Ŀ¼(���� SDK ��������ɺ�ͻᴴ��)��</td></tr></tbody></table><h3 id="SDK�弶�l�"><a href="#SDK�弶�l�" class="headerlink" title="SDK�弶�ļ�"></a>SDK�弶�ļ�</h3><p>������ԭ���ṩ��SDK�ļ�ͨ��FTP���͵���Ӧ�ļ����У����н�ѹ��<br>�������sdk�ļ���ѹ��<br><img src="/"><br>�����˸ĸ����ְ�</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mv 0(tab��ȫ) sdk<br></code></pre></td></tr></table></figure><p>����sdkĿ¼���н�ѹ���ļ��кܴ���5��G�࣬�����ڲ��������� -v ��ʾ���½��ȡ�</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd sdk <br>tar -axvf a(tab��ȫ)<br></code></pre></td></tr></table></figure><p><img src="/"><br>�ڽ�ѹ�����г�����һЩ���õ����������������ˡ���������CPUռ��100%��<br><img src="/"><br>�ڴ�ռ��Ҳͦ��<br><img src="/"><br>��ʱ����Թ�����������ٴ򿪡�<br><img src="/"></p><h3 id="��o�l�"><a href="#��o�l�" class="headerlink" title="��ȫ�ļ�"></a>��ȫ�ļ�</h3><p>�����ļ���</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir buildroot<span class="hljs-regexp">/dl/</span> -p<br></code></pre></td></tr></table></figure><p>�ڸ�Ŀ¼�ҵ���Ӧ�ļ����Ƶ�dl�ļ�����</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">��������� <span class="hljs-selector-tag">A</span>-�������ϡ�<span class="hljs-number">01</span>������Դ���<span class="hljs-number">02</span>��buildroot ����Դ�����bl<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span><br></code></pre></td></tr></table></figure><h2 id="�޸������l�-�DZ�Ҫ"><a href="#�޸������l�-�DZ�Ҫ" class="headerlink" title="�޸������ļ�(�Ǳ�Ҫ)"></a>�޸������ļ�(�Ǳ�Ҫ)</h2><p>Ϊ�����ϲ�����Ϊ115200��������в������޸�<br>�漰�������ļ� <font color = "ff28ff">device&#x2F;rockchip&#x2F;rv1126_rv1109&#x2F;BoardConfig-alientek-rv1126.mk</font><br><font color = "ff28ff">rkbin&#x2F;RKBOOT&#x2F;RV1126MINIALL.ini</font><br>��Ҫ�޸ĵ��ļ���</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">.<span class="hljs-regexp">/rkbin/</span>bin<span class="hljs-regexp">/rv11/</span>rv1126_ddr_924MHz_v1.<span class="hljs-number">08</span>.bin <br>.<span class="hljs-regexp">/rkbin/</span>tools/ddrbin_tool_user_guide.txt<br>.<span class="hljs-regexp">/rkbin/</span>tools/ddrbin_param.txt<br>.<span class="hljs-regexp">/kernel/</span>arch<span class="hljs-regexp">/arm/</span>boot<span class="hljs-regexp">/dts/</span>rv1126.dtsi<br>.<span class="hljs-regexp">/boot/</span>configs/alientek_rv1126_defconfig<br>.<span class="hljs-regexp">/u-boot/</span>arch<span class="hljs-regexp">/arm/</span>dts/rv1126.dtsi<br>.<span class="hljs-regexp">/buildroot/</span>configs<span class="hljs-regexp">/rockchip/</span>rv1126_rv1109_arm.config<br></code></pre></td></tr></table></figure><h3 id="�޸�DDR��ʼ����SPL��ʼ��������"><a href="#�޸�DDR��ʼ����SPL��ʼ��������" class="headerlink" title="�޸�DDR��ʼ����SPL��ʼ��������"></a>�޸�DDR��ʼ����SPL��ʼ��������</h3><p>��Ҫ�޸�&#x2F;rkbin&#x2F;tools&#x2F;ddrbin_param.txt�н��·�����λ�ò����޸�Ϊ115200<br><img src="/"><br>��<font color = "ff28ff">rkbin&#x2F;RKBOOT&#x2F;RV1126MINIALL.ini</font>�ļ��е�֪�õ�����rv1126_ddr_924MHz_v1.08.bin����ļ���������Ҫ��������bin�ļ���������Ŀ¼ִ�����²�����$��Ϊִ�������</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">huerli<span class="hljs-variable">@ubuntu</span><span class="hljs-symbol">:~/RV1126/sdk_1_3/rkbin/tools</span><span class="hljs-variable">$ </span>./ddrbin_tool ddrbin_param.txt ../bin/rv11/rv1126_ddr_924MHz_v1.<span class="hljs-number">08</span>.bin<br></code></pre></td></tr></table></figure><p>ִ�к�����޸ĳɹ���<br><img src="/"></p><h3 id="�޸�buildroot����"><a href="#�޸�buildroot����" class="headerlink" title="�޸�buildroot����"></a>�޸�buildroot����</h3><p>buildroot&#x2F;configs&#x2F;rockchip&#x2F;rv1126_rv1109_arm.config���ҵ�1500000��������Ϊ115200.<br><img src="/"></p><h3 id="�޸�uboot���ֲ���"><a href="#�޸�uboot���ֲ���" class="headerlink" title="�޸�uboot���ֲ���"></a>�޸�uboot���ֲ���</h3><p>��u-boot&#x2F;configs&#x2F;rv1126_defconfig�е�CONFIG_BAUDRATE����1500000��Ϊ115200<br><img src="/"><br>��u-boot&#x2F;arch&#x2F;arm&#x2F;dts&#x2F;rv1126.dtsi�е�fiq_debugger�����ڲ������ֵ�1500000��Ϊ115200<br><img src="/"></p><h3 id="�޸�linux����"><a href="#�޸�linux����" class="headerlink" title="�޸�linux����"></a>�޸�linux����</h3><p>�ҵ�linux&#x2F;arch&#x2F;arm&#x2F;boot&#x2F;dts&#x2F;rv1126.dtsi�ļ��е� fiq_debugger ���ڲ������޸�1500000Ϊ115200<br><img src="/"></p><h2 id="����-2"><a href="#����-2" class="headerlink" title="����"></a>����</h2><p>���б���ǰ�ȸ���һ�»�����</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">huerli<span class="hljs-variable">@ubuntu</span><span class="hljs-symbol">:~/RV1126/sdk_1_3</span><span class="hljs-variable">$ </span>source envsetup.sh<br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">build.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p><img src="/"><br>ѡ��1���س�<br><img src="/"><br>����ʱ������ܳ��������������<br><img src="/"></p><h2 id="�����l�"><a href="#�����l�" class="headerlink" title="�����ļ�"></a>�����ļ�</h2><p><img src="/"><br>������Ĳ�������windows�½�����¼<br>��ʵֻ��Ҫ��loader��uboot��kernel�ļ������滻����<br><img src="/"></p><h2 id="�ٴ��ϵ磡"><a href="#�ٴ��ϵ磡" class="headerlink" title="�ٴ��ϵ磡"></a>�ٴ��ϵ磡</h2><p>����MobaXterm<br><img src="/"><br>�򿪵�Դ<br>�������ն˿�����ӡ��Ϣ�Լ�����<br><img src="/"><br>lsҲ���������鿴����<br><img src="/"></p><h2 id="���"><a href="#���" class="headerlink" title="���"></a>���</h2><p>��֪����ʲôԭ���Ҹ����������ģ�8��+16G+400GB��Ҳ���ڿ�����ʱ���������ǻ�������ˡ��������Ϳ������������Ӿ�����ı����ˡ��һ������������ͷ�Լ�����鿴ͼ��ķ�ʽ���У�<del>�Ҳ���˵����Ϊ����ԭ������ͷ����Ļ̫����</del>����</p><h1 id="ʹ����������ͷ"><a href="#ʹ����������ͷ" class="headerlink" title="ʹ����������ͷ"></a>ʹ����������ͷ</h1><h2 id="��װzlib"><a href="#��װzlib" class="headerlink" title="��װzlib"></a>��װzlib</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> www.zlib.net/fossils/zlib-<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">13</span>.tar.gz<br></code></pre></td></tr></table></figure><h1 id="111"><a href="#111" class="headerlink" title="111"></a>111</h1><p>docker�ܻ�֮ǰһֱ������˵������볢��һ�£���docker�н��б������Ծ�������ƪ��</p><h1 id="�����ն�"><a href="#�����ն�" class="headerlink" title="�����ն�"></a>�����ն�</h1><p>��΢���̵������ն�����<br><img src="/data/attachment/forum/202306/30/151115loqbf4777j337ef3.png.thumb.jpg?rand=1058.459525895228" alt="710149"></p><h1 id="��docker�д����"><a href="#��docker�д����" class="headerlink" title="��docker�д����"></a>��docker�д����</h1><h2 id="��ȡ����"><a href="#��ȡ����" class="headerlink" title="��ȡ����"></a>��ȡ����</h2><blockquote><p>docker pull ubuntu:20.04</p></blockquote><h2 id="��������"><a href="#��������" class="headerlink" title="��������"></a>��������</h2><blockquote><p>docker run -it ubuntu:20.04 &#x2F;bin&#x2F;bash</p></blockquote><h2 id="����������"><a href="#����������" class="headerlink" title="����������"></a>����������</h2><blockquote><p>docker rename ����ԭ����   Ҫ��Ϊ������<br>docker rename zealous_hypatia RV1126</p></blockquote><h2 id="��������-1"><a href="#��������-1" class="headerlink" title="��������"></a>��������</h2><p>��������</p><blockquote><p>docker start RV1126</p></blockquote><p>���ն��д�</p><blockquote><p>docker exec -it RV1126 &#x2F;bin&#x2F;bash </p></blockquote><p><img src="/data/attachment/forum/202306/30/145349lz88euevn8noagot.png.thumb.jpg?rand=5989.454482087808" alt="710126"></p><h1 id="��Դ-1"><a href="#��Դ-1" class="headerlink" title="��Դ"></a>��Դ</h1><p>����ֱ����docker�в������ҵ�����ļ������滻��<br><img src="/data/attachment/forum/202306/30/150131p51as71v8y017vaa.png.thumb.jpg?rand=1305.3378004408778" alt="710148"></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs clean"># Ĭ��ע����Դ�뾵������� apt update �ٶȣ�������Ҫ������ȡ��ע��<br>deb http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br># deb-src http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br>deb http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br># deb-src http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br>deb http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br># deb-src http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><br># deb http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br># # deb-src http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><br>deb http:<span class="hljs-comment">//security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse</span><br># deb-src http:<span class="hljs-comment">//security.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse</span><br><br># Ԥ��������Դ������������<br># deb http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br># # deb-src http:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br></code></pre></td></tr></table></figure><p>docker��Ĭ����root�û������Բ���Ҫ��root</p><blockquote><p>apt update &amp;&amp; apt upgrade</p></blockquote><h1 id="��װ����-1"><a href="#��װ����-1" class="headerlink" title="��װ����"></a>��װ����</h1><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">apt-get <span class="hljs-keyword">install </span>device-tree-compiler git-core u-<span class="hljs-keyword">boot-tools </span>mtools parted libudev-dev  libusb<span class="hljs-number">-1</span>.<span class="hljs-number">0</span><span class="hljs-number">-0</span>-dev autoconf autotools-dev libsigsegv2 m4 intltool libdrm-dev curl sed make <span class="hljs-keyword">binutils </span><span class="hljs-keyword">build-essential </span>gcc g++ <span class="hljs-keyword">bash </span>patch gzip gawk <span class="hljs-keyword">bzip2 </span> perl tar cpio python unzip rsync file <span class="hljs-keyword">bc </span>wget libncurses5 libglib2.<span class="hljs-number">0</span>-dev libgtk2.<span class="hljs-number">0</span>-dev libglade2-dev cvs git mercurial openssh-client <span class="hljs-keyword">subversion </span>asciidoc w3m dblatex graphviz  libssl-dev expect fakeroot cmake flex <span class="hljs-keyword">bison </span>liblz4-tool libtool keychain net-tools adb lib32gcc<span class="hljs-number">-7</span>-dev g++-<span class="hljs-number">7</span> libstdc++-<span class="hljs-number">7</span>-dev libncurses5-dev libncursesw5-dev openssh-server -y<br></code></pre></td></tr></table></figure><p>�ڰ�װʱ���������Ҫ������������<br><img src="/data/attachment/forum/202306/30/154727tvddg011kvzpjl0p.png.thumb.jpg?rand=3761.2227826958056" alt="710174"><br>�������뼴��<br><img src="/data/attachment/forum/202306/30/154727iumi8qqxbqqf7ubt.png.thumb.jpg?rand=5490.795335525753" alt="710175"><br>��װ�ٷ�����������ʱ����<font color = ff02fd> E: Unable to locate package libc6:i386</font><br>�鿴�ܹ�</p><blockquote><p>dpkg –print-architecture</p></blockquote><p>����i386�ܹ�</p><blockquote><p>dpkg –add-architecture i386</p></blockquote><p>����Դ</p><blockquote><p>apt update &amp;&amp; apt upgrade</p></blockquote><p>���°�װ</p><blockquote><p>apt-get install libc6:i386</p></blockquote><h1 id="׼��sdk"><a href="#׼��sdk" class="headerlink" title="׼��sdk"></a>׼��sdk</h1><p>�������µ�sdk�������У�ֱ�ӽ����϶����ɣ����Ƶ��ٶȻ��Ǻܿ�ģ����ص��ٶ�Ҳ�ܿ졣<br><img src="/data/attachment/forum/202306/30/145349ggbz5gurp1g2xx2r.png.thumb.jpg?rand=550.324998042857" alt="710127"><br>���ն��н���sdkĿ¼��ѹ�ļ�</p><blockquote><p>tar -axvf a(tab��ȫ)</p></blockquote><h2 id="׼��dl�l�"><a href="#׼��dl�l�" class="headerlink" title="׼��dl�ļ�"></a>׼��dl�ļ�</h2><blockquote><p>mkdir buildroot&#x2F;dl&#x2F; -p<br>cd buildroot&#x2F;dl&#x2F; &amp;&amp; tar -axvf dl.tar.gz</p></blockquote><h1 id="����-3"><a href="#����-3" class="headerlink" title="����"></a>����</h1><h2 id="����rkmedia"><a href="#����rkmedia" class="headerlink" title="����rkmedia"></a>����rkmedia</h2><p><font color=ff0000>���б���֮ǰ��Ҫ����kernel</font><br>����ֱ��ʹ��</p><blockquote><p>.&#x2F;build.sh</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">source envsetup.sh alientek_rv1126 <span class="hljs-regexp">//</span>ѡ�񻷾����� alientek_rv1126<br>make rkmedia-dirclean <span class="hljs-regexp">//</span>����ոձ���� rkmedia<br>make rkmedia -j6 <span class="hljs-regexp">//</span>���±��� rkmedia<br>.<span class="hljs-regexp">/build.sh rootfs /</span><span class="hljs-regexp">/������ļ�ϵͳ����</span><br></code></pre></td></tr></table></figure><p>����ʮ������<br>����������������Ƶ�ռ���ڴ��cpu�Ҳ����ͷţ�������ɺ�ر��������沢������<br><img src="/data/attachment/forum/202306/30/173957di44l5k3k65sk7i4.png.thumb.jpg?rand=7577.774219481233" alt="710252"><br>������ɺ�</p><h1 id="ʹ��"><a href="#ʹ��" class="headerlink" title="ʹ��"></a>ʹ��</h1><h2 id="¼������"><a href="#¼������" class="headerlink" title="¼������"></a>¼������</h2><blockquote><p>rkmedia_ai_test</p></blockquote><table><thead><tr><th>ѡ��</th><th>����</th><th>Ĭ��ֵ</th></tr></thead><tbody><tr><td>-d</td><td>��Ƶ����ڵ���</td><td>default</td></tr><tr><td>-r</td><td>����ļ��Ĳ�����</td><td>16000</td></tr><tr><td>-c</td><td>����ļ�������</td><td>2</td></tr><tr><td>-o</td><td>����ļ�·��</td><td>&#x2F;tmp&#x2F;ai.pcm</td></tr><tr><td>-s</td><td>����ļ���֡��</td><td>1024</td></tr><tr><td>-h</td><td>�鿴����</td><td>��</td></tr><tr><td>�Ὺ��¼������Ҫ�ж�¼����סCTRL+c�˳���</td><td></td><td></td></tr></tbody></table><h2 id="����PCM��ʽ��Z"><a href="#����PCM��ʽ��Z" class="headerlink" title="����PCM��ʽ��Ƶ"></a>����PCM��ʽ��Ƶ</h2><blockquote><p>rkmedia_ao_test -i &#x2F;tmp&#x2F;ai.pcm</p></blockquote><table><thead><tr><th>ѡ��</th><th>����</th><th>Ĭ��ֵ</th></tr></thead><tbody><tr><td>-d</td><td>��Ƶ����ڵ���</td><td>default</td></tr><tr><td>-r</td><td>�����ļ��Ĳ�����</td><td>16000</td></tr><tr><td>-c</td><td>���������</td><td>2</td></tr><tr><td>-i</td><td>�����ļ�·��</td><td>��</td></tr><tr><td>-s</td><td>�����ļ���֡��</td><td>1024</td></tr><tr><td>-h</td><td>�鿴����</td><td>��</td></tr></tbody></table><h2 id="��ȡ����ͷ�����ݲ�����"><a href="#��ȡ����ͷ�����ݲ�����" class="headerlink" title="��ȡ����ͷ�����ݲ�����"></a>��ȡ����ͷ�����ݲ�����</h2><p>ʹ�ô�����ǰҪ���˳� QT ����(������á��˳�)����ȡ����ͷ������(VI ��ʾ����ͷ������)������Ϊ NV12 ��ʽ����Ƶ��ʽ���±��Ǵ�����Ĳ�����</p><blockquote><p>rkmedia_vi_get_frame_test -a &#x2F;etc&#x2F;iqfiles&#x2F; -o 1080.nv12</p><table><thead><tr><th>ѡ��</th><th>����</th><th>Ĭ��ֵ</th><th>��ע</th></tr></thead><tbody><tr><td>-a&#x2F;–aiq����</td><td>ISP ���ܣ�������Ե�����ͷΪMIPI ����ͷ��������Ҫ���� ISP ���ܣ�����Ϊ aiq �ļ������ļ���·����</td><td>&#x2F;oem&#x2F;etc&#x2F;iqfiles&#x2F;</td><td>��</td></tr><tr><td>-M</td><td>ISP �µ� multictx ����</td><td>0</td><td>0���ر�<br>1������</br></td></tr><tr><td>-I</td><td>ISP �µ�����ͷ�л�</td><td>0</td><td>0��MIPI CSI0  <br>1: MIPI CSI1</br></td></tr><tr><td>-h&#x2F;- -height</td><td>�ֱ��ʸ�</td><td>1080</td><td>��</td></tr><tr><td>-w&#x2F;- -width</td><td>�ֱ��ʿ�</td><td>1920</td><td>��</td></tr><tr><td>-d&#x2F;- -device_name</td><td>�豸�ڵ�</td><td>rkispp_scale0</td><td>��</td></tr><tr><td>-o&#x2F;- -output</td><td>����ļ�·����δ���������</td><td>��</td><td>��</td></tr><tr><td>-c&#x2F;- -frame_cnt</td><td>���֡��������-1 �����ơ�δ�������·������Ч��</td><td>-1</td><td>��</td></tr><tr><td>-?&#x2F;- -help</td><td>��ʾ������Ϣ</td><td>��</td><td>��</td></tr></tbody></table></blockquote><h1 id="���뱨��"><a href="#���뱨��" class="headerlink" title="���뱨��"></a>���뱨��</h1><p>1��configure: error: you should not run configure as root (set FORCE_UNSAFE_CONFIGURE-1 n environment to bypass this check��<br><img src="/data/attachment/forum/202306/30/154727kswsz5dssq5aqedo.png.thumb.jpg?rand=4859.1954295393825" alt="710176"><br>�ڱ���ʱ����</p><blockquote><p>FORCE_UNSAFE_CONFIGURE&#x3D;1<br>��� make rkmedia FORCE_UNSAFE_CONFIGURE&#x3D;1 &#x2F;&#x2F;���±��� rkmedia<br>���Խ��</p></blockquote><p>2�����������������⣬������pythonʱ���ӳ�ʱ<br>һ�㲻����������⣬������֣�����Ƿ���dl�ļ����Լ��Ƿ��ѹ<br><img src="/data/attachment/forum/202306/30/155141n9he3aoo5pcivks9.png.thumb.jpg?rand=153.46521090629616" alt="710178"><br>3�� &#x2F;usr&#x2F;bin&#x2F;time: No such file or directory</p><blockquote><p>apt install time</p></blockquote><h1 id="�ο�"><a href="#�ο�" class="headerlink" title="�ο�"></a>�ο�</h1><p><a href="https://blog.csdn.net/weixin_45392674/article/details/127510170?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168810952416800188571270%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=168810952416800188571270&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-127510170-null-null.142%5Ev88%5Einsert_down38v5,239%5Ev2%5Einsert_chatgpt&utm_term=E:%20Unable%20to%20locate%20package%20libc6:i386&spm=1018.2226.3001.4187">��װ�ٷ�������libc6:i386����</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>STM32_HAL_DEMO</title>
    <link href="/2023/04/21/STM32-HAL-DEMO/"/>
    <url>/2023/04/21/STM32-HAL-DEMO/</url>
    
    <content type="html"><![CDATA[<h1 id="GPIO"><a href="#GPIO" class="headerlink" title="GPIO"></a>GPIO</h1><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><h3 id="按键"><a href="#按键" class="headerlink" title="按键"></a>按键</h3><h2 id="外部中断"><a href="#外部中断" class="headerlink" title="外部中断"></a>外部中断</h2><h1 id="UART"><a href="#UART" class="headerlink" title="UART"></a>UART</h1><h2 id="串口发送"><a href="#串口发送" class="headerlink" title="串口发送"></a>串口发送</h2><h3 id="正常发送"><a href="#正常发送" class="headerlink" title="正常发送"></a>正常发送</h3><h3 id="中断发送"><a href="#中断发送" class="headerlink" title="中断发送"></a>中断发送</h3><h3 id="DMA发送"><a href="#DMA发送" class="headerlink" title="DMA发送"></a>DMA发送</h3><h3 id="串口重定向"><a href="#串口重定向" class="headerlink" title="串口重定向"></a>串口重定向</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Ctrl+c">#include&lt;stdio.h&gt;<br> <br>#ifdef __GNUC__<br>#define PUTCHAR_PROTOTYPE int __io_putchar(int ch)<br>#else<br>#define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)<br>#endif<br>PUTCHAR_PROTOTYPE<br>&#123;<br>HAL_UART_Transmit(&amp;huart1, (uint8_t *)&amp;ch, 1, 0xFFFF);<br>return ch;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="串口接收"><a href="#串口接收" class="headerlink" title="串口接收"></a>串口接收</h2><h3 id="正常接收"><a href="#正常接收" class="headerlink" title="正常接收"></a>正常接收</h3><h3 id="中断接收"><a href="#中断接收" class="headerlink" title="中断接收"></a>中断接收</h3><h3 id="DMA接收"><a href="#DMA接收" class="headerlink" title="DMA接收"></a>DMA接收</h3><h2 id="与ESP01S通讯"><a href="#与ESP01S通讯" class="headerlink" title="与ESP01S通讯"></a>与ESP01S通讯</h2><h3 id="发送"><a href="#发送" class="headerlink" title="发送"></a>发送</h3><h3 id="接收"><a href="#接收" class="headerlink" title="接收"></a>接收</h3><h2 id="与K210通讯"><a href="#与K210通讯" class="headerlink" title="与K210通讯"></a>与K210通讯</h2><h3 id="发送-1"><a href="#发送-1" class="headerlink" title="发送"></a>发送</h3><h3 id="接收-1"><a href="#接收-1" class="headerlink" title="接收"></a>接收</h3><h1 id="TIM"><a href="#TIM" class="headerlink" title="TIM"></a>TIM</h1><h2 id="定时中断"><a href="#定时中断" class="headerlink" title="定时中断"></a>定时中断</h2><h2 id="微秒级延时"><a href="#微秒级延时" class="headerlink" title="微秒级延时"></a>微秒级延时</h2><h2 id="驱动舵机"><a href="#驱动舵机" class="headerlink" title="驱动舵机"></a>驱动舵机</h2><h1 id="RTC"><a href="#RTC" class="headerlink" title="RTC"></a>RTC</h1><h2 id="读取时间"><a href="#读取时间" class="headerlink" title="读取时间"></a>读取时间</h2><h1 id="IIC"><a href="#IIC" class="headerlink" title="IIC"></a>IIC</h1><h2 id="驱动OLED"><a href="#驱动OLED" class="headerlink" title="驱动OLED"></a>驱动OLED</h2><h2 id="驱动PCF8591"><a href="#驱动PCF8591" class="headerlink" title="驱动PCF8591"></a>驱动PCF8591</h2><h2 id="驱动EEPROM"><a href="#驱动EEPROM" class="headerlink" title="驱动EEPROM"></a>驱动EEPROM</h2><h1 id="SPI"><a href="#SPI" class="headerlink" title="SPI"></a>SPI</h1><h2 id="WS2812"><a href="#WS2812" class="headerlink" title="WS2812"></a>WS2812</h2><h2 id="LCD7735"><a href="#LCD7735" class="headerlink" title="LCD7735"></a>LCD7735</h2><h2 id="flash"><a href="#flash" class="headerlink" title="flash"></a>flash</h2><h1 id="USB"><a href="#USB" class="headerlink" title="USB"></a>USB</h1><h2 id="虚拟串口"><a href="#虚拟串口" class="headerlink" title="虚拟串口"></a>虚拟串口</h2><h1 id="FMSC"><a href="#FMSC" class="headerlink" title="FMSC"></a>FMSC</h1><h2 id="驱动正点原子LCD"><a href="#驱动正点原子LCD" class="headerlink" title="驱动正点原子LCD"></a>驱动正点原子LCD</h2><h1 id="使用CLION开发"><a href="#使用CLION开发" class="headerlink" title="使用CLION开发"></a>使用CLION开发</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">include_directories</span><span class="hljs-params">($&#123;includes&#125; HW)</span></span><br><span class="hljs-function"><span class="hljs-title">file</span><span class="hljs-params">(GLOB_RECURSE SOURCES $&#123;sources&#125; <span class="hljs-string">&quot;HW/*.*&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><h2 id="陀螺仪"><a href="#陀螺仪" class="headerlink" title="陀螺仪"></a>陀螺仪</h2><p>Clion 在编译MPU9250时cmake 并不会直接添加外部库的链接，也没有添加定义、会导致以下的问题。  </p><h3 id="未定义"><a href="#未定义" class="headerlink" title="未定义"></a>未定义</h3><p>添加下方在CmakeList.txt，目标文件-DEMPL_TARGET_STM32F4更具芯片型号来。<br><img src="/img/cubemx+keil/clion_mpu9250_1.png"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add_definitions</span><span class="hljs-params">(-DEMPL_TARGET_STM32F4 -DMPU9250 -DEMPL -DMPL_LOG_NDEBUG=<span class="hljs-number">1</span>)</span></span><br></code></pre></td></tr></table></figure><h3 id="未包含库"><a href="#未包含库" class="headerlink" title="未包含库"></a>未包含库</h3><p>出现以下问题则这样解决即可<br><img src="/img/cubemx+keil/clion_mpu9250.png"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">link_directories</span><span class="hljs-params">(HW/DMP/mpl/)</span></span>#括号的内容是库所在的路径<br><span class="hljs-function"><span class="hljs-title">link_libraries</span><span class="hljs-params">(liblibmplmpu.a)</span></span>#库名，需要注意的是gcc并不能使用lib库，需要在官方包中找到gcc使用的 *<span class="hljs-selector-class">.a</span> 库<br></code></pre></td></tr></table></figure><h1 id="KEIL-问题"><a href="#KEIL-问题" class="headerlink" title="KEIL 问题"></a>KEIL 问题</h1><h2 id="芯片包版本过高的情况下使用国产芯片"><a href="#芯片包版本过高的情况下使用国产芯片" class="headerlink" title="芯片包版本过高的情况下使用国产芯片"></a>芯片包版本过高的情况下使用国产芯片</h2><p>![](&#x2F;img&#x2F;cubemx+keil&#x2F;not a genuine.png)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">S</span>:\Keil_v5\ARM\Packs\Keil\STM32F1xx_DFP\<span class="hljs-number">2</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>打开Keil.STM32F1xx_DFP.pdsc，可用记事本保存为txt，等下编辑完后改后缀替换这个文件，可以先备份。<br>Ctrl+F搜not a genuine<br>在block块内把相关两句前加上&#x2F;&#x2F;注释掉即可。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">control</span> <span class="hljs-attr">if</span>=<span class="hljs-string">&quot;jep106id != 0x20&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">block</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Query(0, &quot;Not a genuine ST Device! Abort connection&quot;, 1);</span><br><span class="hljs-comment">    Message(2, &quot;Not a genuine ST Device! Abort connection.&quot;);--&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">control</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>STM32</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STM32</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>复刻</title>
    <link href="/2023/04/12/%E5%A4%8D%E5%88%BB/"/>
    <url>/2023/04/12/%E5%A4%8D%E5%88%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="加热台"><a href="#加热台" class="headerlink" title="加热台"></a>加热台</h1><h1 id="莱洛"><a href="#莱洛" class="headerlink" title="莱洛"></a>莱洛</h1><h1 id="esp小电视"><a href="#esp小电视" class="headerlink" title="esp小电视"></a>esp小电视</h1>]]></content>
    
    
    
    <tags>
      
      <tag>主要用于记录复刻的项目</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>蓝桥杯</title>
    <link href="/2023/03/20/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    <url>/2023/03/20/%E8%93%9D%E6%A1%A5%E6%9D%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="按键部分"><a href="#按键部分" class="headerlink" title="按键部分"></a>按键部分</h1><p><img src="/img/lqb/0.png"></p><h2 id="独立按键"><a href="#独立按键" class="headerlink" title="独立按键"></a>独立按键</h2><p>代码  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void btn()//<br>&#123;<br>    unsigned char dat=P3^0xff;<br>    Trg=dat&amp;(dat^Cont);<br>    Cont=dat;<br>&#125;<br></code></pre></td></tr></table></figure><p><font color = "ff28ff">核心思想是使用定时器加状态机进行按键的检测。</font><br>具体的步骤如下：<br>因为初始状态 P3&#x3D;0xff，所以dat &#x3D;0x00，Trg&#x3D;0x00 ，因为0与上任何数都是0，Cont&#x3D;0<br>假设S4按下P3的状态是0xf7，此时 dat &#x3D;0x08 ，Trg&#x3D;0x08，Cont&#x3D;0x08<br>如果长按，则 dat &#x3D;0x08 ，Trg&#x3D;0x00，Cont&#x3D;0x08<br>所以我们可以每10ms就去读一次是否触发，相当于是消抖了。<br>整体使用工程(参考)：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">#include &quot;stc15.h&quot;<br>#include &quot;intrins.h&quot;<br>///////////////////////////////////////////////<br>#define uchar unsigned char<br>#define  uint unsigned int<br>uchar Trg,Cont,num;<br>///////////////////////////////////////////////<br>void init();<br>void Timer2_Init(void);//1毫秒@12.000MHz<br>void btn();<br>///////////////////////////////////////////////<br>void main()<br>&#123;<br>init();<br>Timer2_Init();<br>while(1)<br>&#123;<br>&#125;<br>&#125;<br><br>void Timer2_Isr(void) interrupt 12<br>&#123;<br>static uchar cnt,btn_cnt;<br>btn_cnt++;<br>if(btn_cnt==10)<br>&#123;<br>btn_cnt=0;<br>btn();<br>if(Trg == 0x11)//s13<br>&#123;<br>            num++;<br>if(num%2==0)<br>&#123;<br>P2=0X80;<br>P01=0;<br>&#125;<br>else if(num%2==1)<br>&#123;<br>P2=0X80;<br>P01=1;<br>&#125;<br>&#125;<br>if(Trg == 0x12)//s17<br>&#123;<br><br>&#125;<br>if(Trg == 0x21)//s12<br>&#123;<br><br>&#125;<br>if(Trg == 0x22)//s16<br>&#123;<br><br>&#125;<br>&#125;<br>&#125;<br><br>void btn()//<br>&#123;<br>    unsigned char dat=P3^0xff;<br>    Trg=dat&amp;(dat^Cont);<br>    Cont=dat;<br>&#125;<br>void init()<br>&#123;<br>P2=0XA0;<br>P0=0;<br>P2=0X80;<br>P0=0XFF;<br>&#125;<br><br>void Timer2_Init(void)//1毫秒@12.000MHz<br>&#123;<br>AUXR |= 0x04;//定时器时钟1T模式<br>T2L  = 0x20;//设置定时初始值<br>T2H  = 0xD1;//设置定时初始值<br>AUXR |= 0x10;//定时器2开始计时<br>IE2  |= 0x04;//使能定时器2中断<br>EA   =1;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="矩阵键盘部分"><a href="#矩阵键盘部分" class="headerlink" title="矩阵键盘部分"></a>矩阵键盘部分</h2><p>若是蓝桥杯相关的矩阵键盘，可以看下一小节。<br>在开头定义按键值定义成4*4的矩阵。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">uchar code keymap[4][4]=&#123;&#123;7,11,15,19&#125;,&#123;6,10,14,18&#125;,&#123;5,9,13,17&#125;,&#123;4,8,12,16&#125;&#125;;<br>uchar Trg=0,Cont=0,flag=0,dat=0,keyvalue=0,key=0;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void KBD()<br>&#123;<br>uchar row=0,cloumn=0,i,j;<br>P3=0x0f;P44=0;P42=0;<br>row=P3&amp;0x0f;<br>P3=0xf0;P44=1;P42=1;<br>if(P44 == 0)cloumn = 0x70;<br>else if(P42 == 0)cloumn = 0xb0;<br>elsecloumn = P3 &amp; 0xf0;<br>dat=~(cloumn|row);<br>Trg=dat&amp;(dat^Cont);<br>Cont=dat;<br><br>if(Trg)<br>&#123;<br>for(i = 0; i &lt; 4; i++)<br>for(j = 0; j &lt; 4; j++)<br>if(Trg == (0x80 &gt;&gt; j | 0x01 &lt;&lt; i))<br>&#123;<br>keyvalue = keymap[i][j];<br>key=keyvalue;<br>break;<br>&#125;<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/img/lqb/1.png"><br>分析：当紫色位置按键被按下时，进入检测的代码时会有以下步骤：<br>1.列赋0，行都赋1 即P44、P42、P36、P35为低电平 ，P30-P33都是高电平<br>2.将P3和0X0F进行“与” 操作，得到具体哪一行被按下<br>3.列赋1，行都赋0 ，即P44、P42、P36、P35为高电平 ，P30-P33都是低电平<br>4.判断是哪列被按下， 将值赋给cloumn  </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">三行判断式分析：</span><br><span class="hljs-string">第一次：</span><br>        <span class="hljs-string">row</span> <span class="hljs-string">=(0000</span> <span class="hljs-number">1101</span><span class="hljs-string">)</span> <span class="hljs-string">&amp;(0000</span> <span class="hljs-number">1111</span><span class="hljs-string">)</span> <span class="hljs-string">=0000</span> <span class="hljs-number">1101</span><br>        <span class="hljs-string">cloumn</span> <span class="hljs-string">=</span> <span class="hljs-number">0xb0</span><br>        <span class="hljs-string">dat</span> <span class="hljs-string">=</span> <span class="hljs-string">~(row|cloumn)=~(</span> <span class="hljs-string">(1011</span> <span class="hljs-number">0000</span><span class="hljs-string">)|</span> <span class="hljs-number">0000 </span><span class="hljs-number">1101</span><span class="hljs-string">)</span> <span class="hljs-string">=</span> <span class="hljs-number">0100 </span><span class="hljs-number">0010</span> <span class="hljs-string">=</span> <span class="hljs-number">0x72</span><br>        <span class="hljs-string">Trg</span> <span class="hljs-string">=</span> <span class="hljs-string">(0x72)</span> <span class="hljs-string">&amp;</span> <span class="hljs-string">(0x72^0x00)</span> <span class="hljs-string">=</span> <span class="hljs-number">0x72</span>   <span class="hljs-string">(异或符号^)</span><br>        <span class="hljs-string">Cont</span> <span class="hljs-string">=</span> <span class="hljs-string">dat</span> <span class="hljs-string">=0x72</span> <br><span class="hljs-string">第二次（紫色按钮还处于按下状态）：</span><br>        <span class="hljs-string">row</span> <span class="hljs-string">=(0000</span> <span class="hljs-number">1101</span><span class="hljs-string">)</span> <span class="hljs-string">&amp;(0000</span> <span class="hljs-number">1111</span><span class="hljs-string">)</span> <span class="hljs-string">=0000</span> <span class="hljs-number">1101</span><br>        <span class="hljs-string">cloumn</span> <span class="hljs-string">=</span> <span class="hljs-number">0xb0</span><br>        <span class="hljs-string">dat</span> <span class="hljs-string">=</span> <span class="hljs-string">~(row|cloumn)=~(</span> <span class="hljs-string">(1011</span> <span class="hljs-number">0000</span><span class="hljs-string">)|</span> <span class="hljs-number">0000 </span><span class="hljs-number">1101</span><span class="hljs-string">)</span> <span class="hljs-string">=</span> <span class="hljs-number">0100 </span><span class="hljs-number">0010</span> <span class="hljs-string">=</span> <span class="hljs-number">0x72</span><br>        <span class="hljs-string">Trg</span> <span class="hljs-string">=</span> <span class="hljs-string">(0x72)</span> <span class="hljs-string">&amp;</span> <span class="hljs-string">(0x72^0x72)</span> <span class="hljs-string">=0x00</span><br>        <span class="hljs-string">Cont</span> <span class="hljs-string">=</span> <span class="hljs-string">dat</span> <span class="hljs-string">=0x72</span><br></code></pre></td></tr></table></figure><p>所以这个三行判断式可以检测长按和短按，通过十毫秒的检测 “延时” ，可以达到检测准确的效果。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void Timer0_Init(void)//1毫秒@11.0592MHz<br>&#123;<br>AUXR |= 0x80;//定时器时钟1T模式<br>TMOD &amp;= 0xF0;//设置定时器模式<br>TL0 = 0xCD;//设置定时初始值<br>TH0 = 0xD4;//设置定时初始值<br>    EA=1;<br>    ET0=1;<br>TR0 = 1;//定时器0开始计时<br>&#125;<br>void Timer0() interrupt 1<br>&#123;<br>    static unsigned char flag_cnt;<br>    flag_cnt++;<br>    if(flag_cnt==10)<br>    &#123;        <br>        flag=1;<br>        flag_cnt=0;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用模板如下  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">if(flag)<br>&#123;<br>KBD();<br>flag=0;<br>if(key==4) //S4<br>&#123;<br>key=0;<br>&#125;<br>else if(key==5) //S5<br>&#123;<br>key=0;<br>&#125;<br>else if(key==9) //S9<br>&#123;<br>key=0;<br>&#125;<br>else if(key==8) //S8<br>&#123;<br>key=0;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="矩阵键盘化简写法"><a href="#矩阵键盘化简写法" class="headerlink" title="矩阵键盘化简写法"></a>矩阵键盘化简写法</h2><p>蓝桥杯的矩阵键盘考法一般为四个相邻的键，只有四根线控制，那么是不是可以不用把所有的情况都写出来呢。<br>假设使用S4、S5、S8、S9四个按键，涉及到的IO分别为P42、P43、P32、P33。通过这四个IO的组合，再由状态机去检测按下和长按。<br>前六行就是对一个状态的赋值，和常规的矩阵键盘的检测方式没啥区别。<br>实际部分就是下两行对状态的判断。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">void BTN()<br>&#123;<br>uchar dat;<br>P32 = 0;P33 = 0;P42 = 1;P44 = 1;<br><span class="hljs-keyword">if</span>(P42 == 0)<span class="hljs-attribute">dat</span>=0x40;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(P44 == 0) <span class="hljs-attribute">dat</span>=0x80;<br>P32 = 1;P33 = 1;P42 = 0;P44 = 0;<br><span class="hljs-keyword">if</span>(P32 == 0)<span class="hljs-attribute">dat</span>=dat|0x01 ;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(P33 == 0) <span class="hljs-attribute">dat</span>=dat|0x02;<br>Trg = dat&amp;(dat^Cont);<br>Cont = dat;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="DS18B20"><a href="#DS18B20" class="headerlink" title="DS18B20"></a>DS18B20</h1><p>DS18B20作为单总线协议的器件，只需要一根数据线就能进行通讯<br>查看底板的原理图可以找到DS18B20，这是单总线的接法，数据通过P1.4进行传输。</p><h2 id="修改官方驱动文件"><a href="#修改官方驱动文件" class="headerlink" title="修改官方驱动文件"></a>修改官方驱动文件</h2><p><img src="/img/lqb/2.png"><br>赛点数据包给了最底层的代码，所以我们只需要编写驱动就行了。<br><font color ="ff00ff">因为赛点资源包给的底层已经可以直接使用所有这里不需要再改些什么。</font>  </p><h2 id="DS18B20数据手册部分"><a href="#DS18B20数据手册部分" class="headerlink" title="DS18B20数据手册部分"></a>DS18B20数据手册部分</h2><p>以下是温度寄存器的格式最低的四位是小数部分，最高五位是符号位，针对此，可以对读出的数据进行处理来得到所需要的精度的数据。<br><img src="/img/lqb/3.png"><br>以下是输出数据和和对应温度的转换。<br><img src="/img/lqb/4.png"><br><font color ="dddd00">默认出厂时12位精度的。</font>对应的转换就是将读出的数据拼接<em>0.0625，但是为了更加方便的显示，更具精度要求进行倍数扩大。例如：<br>需求精度是小数点后两位，就在读出数据后</em>6.25。<br>需求精度是小数点后三位，就在读出数据后*62.5。<br>以下是从数据手册截取的，只用于读取温度数据的指令。  </p><table><thead><tr><th align="center">MASTER MODE</th><th align="center">DATA (LSB FIRST)</th><th align="center">COMMENTS</th></tr></thead><tbody><tr><td align="center">Tx</td><td align="center">CCh</td><td align="center">Master issues Skip ROM command.（主机发送跳过ROM指令）</td></tr><tr><td align="center">Tx</td><td align="center">44h</td><td align="center">Master issues Convert T command.（主机发送 只转换一次温度而无其他数据指令）</td></tr><tr><td align="center">Tx</td><td align="center">BEh</td><td align="center">Master issues Read Scratchpad command.（主机发送 读取暂存器的内容指令）</td></tr></tbody></table><h2 id="实际操作部分"><a href="#实际操作部分" class="headerlink" title="实际操作部分"></a>实际操作部分</h2><p><img src="/img/lqb/5.png"><br>根据流程图来说<br>第一步是初始化，确认总线上存在DS18B20设备<br>发送<font color="dd0000">0XCC</font> 跳过内存命令<br>发送<font color ="dd0000">0X44</font>（温度转换命令）<br>等待转换完成用延时完成<br>复位，使用的也是初始化函数<br>发送<font color="dd0000">0XCC</font> 跳过内存命令<br>发送<font color ="dd0000">0XBE</font>（输出温度数据命令）主机开始接收16位数据  </p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">long read_tempf()<br>&#123;<br>uchar low,high;<br>    long temp;<br>init_ds18b20();<br>Write_DS18B20(0xcc);<br>Write_DS18B20(0x44);<br>Delay_OneWire(200);  <br>init_ds18b20();<br>Write_DS18B20(0xcc);<br>Write_DS18B20(0xbe);<br>low =Read_DS18B20();<br>high=Read_DS18B20();<br>temp=high&amp;0x0f;<br>temp=temp&lt;&lt;8;<br>temp=temp|low;<br>temp=temp*6.25; //根据精度要求修改<br>return temp ;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="数码管显示"><a href="#数码管显示" class="headerlink" title="数码管显示"></a>数码管显示</h2><p>只需要在小数点位置添加 异或上0X80即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void display()<br>&#123;<br>uchar dis[8],i;<br>dis[0] = 0x87;<br>dis[1] = LEDchar[0];<br>dis[2] = LEDchar[0];<br>dis[3] = LEDchar[temp/10000%10];<br>dis[4] = LEDchar[temp/1000%10];<br>dis[5] = LEDchar[temp/100%10]^0X80;<br>dis[6] = LEDchar[temp/10%10];<br>dis[7] = LEDchar[temp%10];<br><br>for(i = 1;i&lt;8;i++)<br>&#123;<br>if(dis[i] == LEDchar[0])<br>dis[i] = 0xff;<br>else break;<br>&#125;<br>for(i = 0;i&lt;8;i++)<br>&#123;<br>P2 = 0XC0 ;<br>P0 = 1&lt;&lt;i ;<br>P2 = 0XE0 ;<br>P0 = dis[i];<br>Delay100us(); //移植别漏了<br>P0=0xff;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="DS1302"><a href="#DS1302" class="headerlink" title="DS1302"></a>DS1302</h1><p>DS1302作为时钟芯片，采用SPI通信。  </p><h2 id="数据手册"><a href="#数据手册" class="headerlink" title="数据手册"></a>数据手册</h2><p>需要注意的只有寄存器的地址，底层驱动官方以及提供。<br><img src="/img/lqb/6.png"></p><h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><p>在数据手册第六页有这样一行文字  </p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">The <span class="hljs-built_in">time</span> <span class="hljs-keyword">and</span> calendar information is obtained <span class="hljs-keyword">by</span> reading <span class="hljs-keyword">the</span> appropriate register <span class="hljs-keyword">bytes</span>.Table <span class="hljs-number">3</span> illustrates <span class="hljs-keyword">the</span> RTC registers.The <span class="hljs-built_in">time</span> <span class="hljs-keyword">and</span> calendar are <span class="hljs-built_in">set</span> <span class="hljs-keyword">or</span> initialized <span class="hljs-keyword">by</span> writing <span class="hljs-keyword">the</span> appropriate register <span class="hljs-keyword">bytes</span>.The contents <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">time</span> <span class="hljs-keyword">and</span> calendar registers are <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> binary-coded decimal (BCD) <span class="hljs-built_in">format</span>.<br></code></pre></td></tr></table></figure><p>翻译过来就是: <font color = "ff28ff">通过读取适当的寄存器字节来获得时间和日历信息。表3说明了RTC寄存器。时间和日历通过写入适当的寄存器字节来设置或初始化。时间寄存器和日历寄存器的内容是二进制编码的十进制(BCD)格式。</font><br>什么是BCD码,BCD码与各进制之间的关系<br>BCD码：以四位二进制数为一单位来表示一个数。例如：十进制数10的BCD码为0001 0000；显而易见后四位的0000 表示的是十进制的个位，0001则就是十位了。十六进制转BCD码也是同理。<br>十进制转BCD码：BCD&#x3D;DEC&#x2F;10 * 16+DEC%10; （2位BCD）体现在代码中就是  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void set_Time(unsigned char hor,unsigned char min,unsigned char sec,unsigned char year,unsigned char month,unsigned char date)<br>&#123;<br>Write_Ds1302_Byte(0x8e,0x00);<br>Write_Ds1302_Byte(0x80,(sec/10)*16+sec%10);<br>Write_Ds1302_Byte(0x82,(min/10)*16+min%10);<br>Write_Ds1302_Byte(0x84,(hor/10)*16+hor%10);<br><br>Write_Ds1302_Byte(0x8c,(year/10)*16+year%10);<br>Write_Ds1302_Byte(0x88,(month/10)*16+month%10);<br>Write_Ds1302_Byte(0x86,(date/10)*16+date%10);<br>Write_Ds1302_Byte(0x8e,0x80);<br>&#125;<br></code></pre></td></tr></table></figure><p>BCD码转十进制：DEC&#x3D;BCD&#x2F;16 * 10+BCD%16; （2位BCD）在读取数据后显示  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void read()<br>&#123;<br>//unsigned char year,mon,date,day,hour,min,sec,year1,mon1,date1,day1,hour1,min1,sec1;全局变量<br>year1=Read_Ds1302_Byte(0x8d);<br>mon1=Read_Ds1302_Byte(0x89);<br>date1=Read_Ds1302_Byte(0x87);<br>hour1=Read_Ds1302_Byte(0x85);<br>min1=Read_Ds1302_Byte(0x83);<br>sec1=Read_Ds1302_Byte(0x81);<br>year=(year1/16)*10+ year1%16;<br>mon=(mon1/16)*10  + mon1%16;<br>date=(date1/16)*10+ date1%16;<br>hour=(hour1/16)*10+hour1%16;<br>min=(min1/16)*10+min1%16;<br>sec=(sec1/16)*10+sec1%16;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="EEPROM"><a href="#EEPROM" class="headerlink" title="EEPROM"></a>EEPROM</h1><p>EEPROM作为IIC接口的存储芯片，官方已经提供了IIC驱动的底层代码，需要做的就是根据具体的器件编写对应的驱动。  </p><h2 id="芯片手册"><a href="#芯片手册" class="headerlink" title="芯片手册"></a>芯片手册</h2><h3 id="器件地址"><a href="#器件地址" class="headerlink" title="器件地址"></a>器件地址</h3><p>根据芯片手册可知器件地址是由 固定的四位数值，和可变动的四位组成的。<font color = "ff28ff">其中A2 A1 A0 已经通过板子接地确认，最后一位是读写位（写0，读1）</font><br><img src="/img/lqb/7.png"></p><h3 id="写操作"><a href="#写操作" class="headerlink" title="写操作"></a>写操作</h3><p>芯片手册中提供的写操作时序如下所示：<br><font color = "ff28ff">START</font>下方指的是起始信号，对应蓝桥杯底层驱动的 <font color = "ff28ff">IIC_Start() </font>函数<br><font color = "ff28ff">DEVICE ADDRESS</font> 从MSB(高位)到LSB（低位）共七位再加上读写位共八位，也就是需要向SDA（数据线）发送八位地址，通过官方提供的<font color = "ff28ff">IIC_SendByte()</font>函数中传入地址参数，就会向SDA发送八位地址。<br><font color = "ff28ff">ACK</font>等待应答，对应<font color = "ff28ff">IIC_WaitAck()</font>函数<br><font color = "ff28ff">WORD ADDRESS</font>将数据要存储到的地址发送到SDA数据线上。对应使用<font color = "ff28ff">IIC_SendByte()</font>函数。<br><font color = "ff28ff">ACK</font>等待应答，对应<font color = "ff28ff">IIC_WaitAck()</font>函数<br><font color = "ff28ff">DATA</font>将数据发送到SDA数据线上。对应使用<font color = "ff28ff">IIC_SendByte()</font>函数。<br><font color = "ff28ff">ACK</font>等待应答，对应<font color = "ff28ff">IIC_WaitAck()</font>函数<br><font color = "ff28ff">STOP</font>停止信号，对应使用<font color = "ff28ff">IIC_Stop()</font>函数<br><img src="/img/lqb/8.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void write_e2prom(unsigned char add,unsigned char date)<br>&#123;<br>IIC_Start();<br>IIC_SendByte(0xa0);<br>IIC_WaitAck();<br>IIC_SendByte(add);<br>IIC_WaitAck();<br>IIC_SendByte(date);<br>IIC_WaitAck();<br>IIC_Stop();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="读操作"><a href="#读操作" class="headerlink" title="读操作"></a>读操作</h3><p>读操作的<font color = "ff28ff">DUMMY WRITE</font>部分与写操作一致，这里不再赘述。<br><font color = "ff28ff">START</font>下方指的是起始信号，对应蓝桥杯底层驱动的 <font color = "ff28ff">IIC_Start() </font>函数<br><font color = "ff28ff">DEVICE ADDRESS</font> 从MSB(高位)到LSB（低位）共七位再加上读写位共八位，也就是需要向SDA（数据线）发送八位地址，通过官方提供的<font color = "ff28ff">IIC_SendByte()</font>函数中传入地址参数，就会向SDA发送八位地址。<br><font color = "ff28ff">ACK</font>等待应答，对应<font color = "ff28ff">IIC_WaitAck()</font>函数<br><font color = "ff28ff">DATA</font>EEPROM将数据发送到SDA数据线上。由主机进行采集对应使用<font color = "ff28ff">IIC_RecByte()</font>函数<br><font color = "ff28ff">STOP</font>停止信号，对应使用<font color = "ff28ff">IIC_Stop()</font>函数<br><img src="/img/lqb/9.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">unsigned char read_e2prom(unsigned char add)<br>&#123;<br>unsigned char temp;<br>IIC_Start();<br>IIC_SendByte(0xa0);<br>IIC_WaitAck();<br>IIC_SendByte(add);<br>IIC_WaitAck();<br><br>IIC_Start();<br>IIC_SendByte(0xa1);<br>IIC_WaitAck();<br>temp = IIC_RecByte();<br>IIC_Stop();<br>return temp ;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="读写注意事项"><a href="#读写注意事项" class="headerlink" title="读写注意事项"></a>读写注意事项</h3><p>在写入一个数据之后，需要稳定SDA线后再读取数据，否则会写入失败，自然不能读取成功。<br>这里使用延时10Ms的方式（若是读取还是不正确，可以考虑增加延时时间）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">write_e2prom(0x00,0x01);<br>Delay10ms();<br>read_temp = read_e2prom(0x00);<br></code></pre></td></tr></table></figure><h1 id="PCF8591"><a href="#PCF8591" class="headerlink" title="PCF8591"></a>PCF8591</h1><p>PCF8591作为板载的AD&#x2F;DA芯片，输入通道有四个分别是AIN0、AIN1、AIN2、AIN3，其中AIN1和AIN3分别接到光敏电阻和滑动变阻器上。也是最常用的两个测量功能。DA输出脚在板子右侧引出的排针处。 </p><h2 id="芯片手册-1"><a href="#芯片手册-1" class="headerlink" title="芯片手册"></a>芯片手册</h2><p>PCF8591器件地址由固定的四位和可变的四位组成，A2、A1、A0已经接地，器件地址变成了0x90加上读写位。<br><img src="/img/lqb/10.png"><br>PCF8591的八位控制器控制内容如下（msb-&gt;lsb）：<br>第七位<font color = "ff28ff">ANALOGUE OUTPUT ENABLE FLAG</font>是一个I2C寄存器中的标志位，它表示是否启用模拟输出通道（Analog Output Channel）。PCF8591芯片中的ANALOGUE OUTPUT ENABLE FLAG是一个I2C寄存器中的标志位，它表示是否启用模拟输出通道（Analog Output Channel）。也就是所说的DA功能<br>第六和五位<font color = "ff28ff">ANALOGUE INPUT PROGRAMMING</font>模拟输入编程为单端或差分输入<br>第三位<font color = "ff28ff">AUTO-INCREMENT FLAG</font>是一个I2C寄存器中的标志位，它表示是否启用自动增量模式（Auto-Increment Mode）。<br>第二、一位表示使用哪个通道。<br><img src="/img/lqb/11.png"><br>上电复位后，控制寄存器的所有位都复位为逻辑0。为了省电，D&#x2F;A转换器和振荡器被禁用。模拟输出被切换到高阻抗状态。<br>需要对芯片进行配置，根据题目要求进行配置，若是题目要求A&#x2F;D、D&#x2F;A同时进行，则将第七位置一，再选择对应A&#x2F;D通道，若是需要采集多通道A&#x2F;D数据，可以开启<font color = "ff28ff">AUTO-INCREMENT FLAG</font>自动增加通道，实现自动采集，但多通道数据需要对芯片发出的第一次数据进行检测，如果是0X80则说明通道0的数据马上开始输出了。<br><img src="/img/lqb/12.png"><br>设置完芯片可以开始对输出数据进行读取。  </p><h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><p>配置芯片，这里配置为0X43代表通道三和DA功能。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void write_dac(unsigned char dat)<br>&#123;<br>IIC_Start();<br>IIC_SendByte(0x90);<br>IIC_WaitAck();<br>IIC_SendByte(0x43);<br>IIC_WaitAck();<br>IIC_SendByte(dat);<br>IIC_WaitAck();<br>IIC_Stop();<br>&#125;<br></code></pre></td></tr></table></figure><p>直接读取单通道内容，所以不需要区分通道数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">unsigned char read_ad()<br>&#123;<br>unsigned char temp;<br>IIC_Start();<br>IIC_SendByte(0x91);<br>IIC_WaitAck();<br>temp = IIC_RecByte();<br>return temp;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="超声波"><a href="#超声波" class="headerlink" title="超声波"></a>超声波</h1><h2 id="超声波的原理"><a href="#超声波的原理" class="headerlink" title="超声波的原理"></a>超声波的原理</h2><p>超声波发射器向某一方向发射超声波，在发射时刻的同时开始计时，超声波在空气中传播，途中碰到障碍物就立即返回来，超声波接收器收到反射波就立即停止计时。超声波在空气中的传播速度为340m&#x2F;s，根据计时器记录的时间t，就可以计算出发射点距障碍物的距离(s)，即：s&#x3D;340t&#x2F;2 。这就是所谓的时间差测距法。<br>s &#x3D; 340 * (CH<em>256+CL)&#x2F;12 000 000 &#x2F;2 （m）<br>s &#x3D; 34000 * (CH</em>256+CL)&#x2F;12 000 000 &#x2F;2 （cm）</p><h2 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h2><p>使用PCA不占用过多的定时器资源。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">sbit TX=P1^0;<br>sbit RX=P1^1;<br>//PCA 初始化<br>CMOD = 0x08;<br>CCON = 0x00;<br><br>void Delay13us()//@12.000MHz<br>&#123;<br>unsigned char i;<br><br>_nop_();<br>_nop_();<br>i = 39;<br>while (--i);<br>&#125;<br>void send_wave()<br>&#123;<br>unsigned char i = 8;<br>while(i)<br>&#123;<br>TX = 1;<br>Delay13us();<br>TX = 0;<br>Delay13us();<br>i--;<br>&#125;<br>&#125;<br>void get_distance()<br>&#123;<br>//unsigned int time;<br>send_wave();<br>CH = 0;CL = 0;<br>CR = 1;<br>while( RX &amp;&amp; (CF == 0));<br>CR = 0;<br>if(CF) //代表溢出，超时则不纳入测算<br>&#123;<br>CF = 0;<br>&#125;<br>else <br>&#123;<br>time = CH*256+CL;<br>distance = (unsigned int)(0.017*time/12); //cm<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>推荐单独开一个定时器中断进行距离检测。<br>一共三个定时器，资源还是比较丰富的。</p><h1 id="串口"><a href="#串口" class="headerlink" title="串口"></a>串口</h1><p>51的串口是全双工的，只需要 Tx 和 Rx 两根线。<br>蓝桥杯的串口，主要考察的就是一个发送和接收。  </p><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>初始化串口，可以使用STC-ISP工具自动生成波特率。<br><img src="/img/lqb/16.png"><br>也可以根据需要将波特率发生器修改为其它定时器。<br><img src="/img/lqb/17.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">void UartInit(void)//9600bps@11.0592MHz<br>&#123;<br>SCON = 0x50;//8位数据,可变波特率<br>AUXR |= 0x40;//定时器时钟1T模式<br>AUXR &amp;= 0xFE;//串口1选择定时器1为波特率发生器<br>TMOD &amp;= 0x0F;//设置定时器模式<br>TL1 = 0xE0;//设置定时初始值<br>TH1 = 0xFE;//设置定时初始值<br>ET1 = 0;//禁止定时器中断<br>TR1 = 1;//定时器1开始计时<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="发送"><a href="#发送" class="headerlink" title="发送"></a>发送</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">void <span class="hljs-constructor">SendByte(<span class="hljs-params">unsigned</span> <span class="hljs-params">char</span> <span class="hljs-params">dat</span>)</span><br>&#123;<br><span class="hljs-keyword">while</span> (busy);           <span class="hljs-comment">//Wait for the completion of the previous data is sent</span><br>    ACC = dat;              <span class="hljs-comment">//Calculate the even parity bit P (PSW.0)</span><br>busy = <span class="hljs-number">1</span>;<br>    SBUF = ACC;             <span class="hljs-comment">//Send data to UART buffer</span><br>&#125;<br>void <span class="hljs-constructor">SendString(<span class="hljs-params">char</span> <span class="hljs-operator">*</span><span class="hljs-params">s</span>)</span><br>&#123;<br>    <span class="hljs-keyword">while</span> (*s)              <span class="hljs-comment">//Check the end of the string</span><br>    &#123;<br>        <span class="hljs-constructor">SendByte(<span class="hljs-operator">*</span><span class="hljs-params">s</span><span class="hljs-operator">++</span>)</span>;     <span class="hljs-comment">//Send current char and increment string ptr</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>重定向到串口</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">char <span class="hljs-built_in">putchar</span>(char ch)<br>&#123;<br><span class="hljs-built_in">SendByte</span>(ch);<br>return ch;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="中断接收"><a href="#中断接收" class="headerlink" title="中断接收"></a>中断接收</h2><p>如果说，定时器的定时频率过高会影响串口的接收，就需要提高串口的中断优先级.</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">PS</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk">void ServiceUart() interrupt <span class="hljs-number">4</span><br>&#123;<br><span class="hljs-keyword">if</span>(RI)<br>&#123;<br>RI=<span class="hljs-number">0</span>;<br>Rdat=SBUF;<br><span class="hljs-keyword">if</span>(Rdat != <span class="hljs-string">&#x27;\n&#x27;</span>)<br>&#123;<br>Recv[Rcnt] = Rdat;<br>Rcnt++;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>Recv[Rcnt]=<span class="hljs-string">&#x27;\n&#x27;</span>;<span class="hljs-regexp">//</span>因为判断漏掉了<br>Rcnt=<span class="hljs-number">0</span>;<br>rx_flag=<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (TI)<br>    &#123;<br>        TI = <span class="hljs-number">0</span>;                 <span class="hljs-regexp">//</span>清除TI位<br>        busy = <span class="hljs-number">0</span>;               <span class="hljs-regexp">//</span>清忙标志<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="NE555"><a href="#NE555" class="headerlink" title="NE555"></a>NE555</h1><p>NE555在使用时不需要进行软件配置，只需要进行读取即可。<br><img src="/img/lqb/ne555.png"><br>使用跳线帽连接右侧SIGNAL 和P34，将定时器0配置为计数模式。<br>以下是两种计数方式。<br>方式一：将TH0和TL0初始值设置为0x00，在一定时间内读取TH0和TL0的值，再转换为频率。<br>方式二：将TH0和TL0初始值设置为0xFF，在一定时间内对溢出次数进行计次,再转换为频率。<br>方式一：<br>将定时器0设置为计数模式，并且设置16位不自动重载。即</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">TMOD |= 0x05;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs ctrl+c">#include &quot;stc15.h&quot;<br>#include &quot;intrins.h&quot;<br>///////////////////////////////////////////////<br>#define uchar unsigned char<br>#define  uint unsigned int<br>code uchar LEDchar[]=&#123;<br>0xc0, //0<br>0xf9, //1<br>0xa4, //2<br>0xb0, //3<br>0x99, //4<br>0x92, //5<br>0x82, //6<br>0xf8, //7<br>0x80, //8<br>0x90, //9<br>0x88, //A<br>0x83, //b<br>0xc6, //C<br>0xa1, //d<br>0x86, //E<br>0x8e //F<br>&#125;;<br>uchar Trg,Cont;<br>bit flag;<br>uchar num;<br>uint fre;<br>///////////////////////////////////////////////<br>void init();<br>void Timer2_Init(void);//1毫秒@12.000MHz<br>void display();<br>void btn();<br>///////////////////////////////////////////////<br>void main()<br>&#123;<br>init();<br>Timer2_Init();<br>while(1)<br>&#123;<br><br>&#125;<br>&#125;<br><br>void Timer2_Isr(void) interrupt 12<br>&#123;<br>static uchar cnt,btn_cnt;<br>static uint fre_cnt;<br>cnt++;<br>if(cnt==1)<br>&#123;<br>cnt=0;<br>display();<br>&#125;<br>fre_cnt++;<br>if(fre_cnt==100)<br>&#123;<br>fre_cnt=0;<br>fre =(TH0*256+TL0)*10;<br>TH0 = TL0 = 0x00;               //设置定时器0初始值<br>&#125;<br>&#125;<br><br>void init()<br>&#123;<br>P2=0XA0;<br>P0=0;<br>P2=0X80;<br>P0=0XFF;<br>&#125;<br><br>void Timer2_Init(void)//1毫秒@12.000MHz<br>&#123;<br>//定时器2<br>AUXR |= 0x04;//定时器时钟1T模式<br>T2L  = 0x20;//设置定时初始值<br>T2H  = 0xD1;//设置定时初始值<br>AUXR |= 0x10;//定时器2开始计时<br>IE2  |= 0x04;//使能定时器2中断<br>EA   =1;<br>//定时器0<br>AUXR |= 0x80;                    //定时器0为1T模式<br>TMOD |= 0x05;<br>TH0 = TL0 = 0x00;               //设置定时器0初始值<br>TR0=1;<br>&#125;<br><br>void Delay10us()//@12.000MHz<br>&#123;<br>unsigned char i;<br><br>_nop_();<br>_nop_();<br>i = 27;<br>while (--i);<br>&#125;<br><br>void display()<br>&#123;<br>uchar i,dis[8];<br>dis[0] = LEDchar[fre/10000000%10];<br>dis[1] = LEDchar[fre/1000000%10];<br>dis[2] = LEDchar[fre/100000%10];<br>dis[3] = LEDchar[fre/10000%10];<br>dis[4] = LEDchar[fre/1000%10];<br>dis[5] = LEDchar[fre/100%10];<br>dis[6] = LEDchar[fre/10%10];<br>dis[7] = LEDchar[fre%10];<br>for(i=0;i&lt;8;i++)<br>&#123;<br>if(dis[i]==LEDchar[0])<br>&#123;<br>dis[i]=0xff;<br>&#125;<br>else <br>break;<br>&#125;<br>for(i = 0;i&lt;8;i++)<br>&#123;<br>P2 = 0XC0 ;<br>P0 = 1&lt;&lt;i ;<br>P2 = 0XE0 ;<br>P0 = dis[i];<br>Delay10us(); //移植别漏了<br>P0=0xff;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="快速添加LED的功能函数"><a href="#快速添加LED的功能函数" class="headerlink" title="快速添加LED的功能函数"></a>快速添加LED的功能函数</h1>]]></content>
    
    
    <categories>
      
      <category>蓝桥杯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>蓝桥杯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>fpga_demo</title>
    <link href="/2023/02/12/fpga-demo/"/>
    <url>/2023/02/12/fpga-demo/</url>
    
    <content type="html"><![CDATA[<h1 id="newproject"><a href="#newproject" class="headerlink" title="newproject"></a>newproject</h1><p>下载软件，教育版即可。  </p><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><p>点击左上角，如下顺序操作后，点击ok。</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-function"><span class="hljs-title">file</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">new</span>-&gt;</span>fpga design project<br></code></pre></td></tr></table></figure><p>出现如下界面<br><img src="/img/fpga_demo/project/0.png"><br>我的配置如下<br><img src="/img/fpga_demo/project/1.png"></p><p>点击next<br>选择芯片型号<br><img src="/img/fpga_demo/project/2.png"><br>点击型号选中，点击next-&gt;finish</p><p>点击此图标<br><img src="/img/fpga_demo/project/3.png"><br>选择使用的语言，这里是verilog<br><img src="/img/fpga_demo/project/4.png"><br>输入文件名称，这里存为led<br><img src="/img/fpga_demo/project/5.png"><br>点击ok后工程会添加刚创建的文件  </p><h1 id="led"><a href="#led" class="headerlink" title="led"></a>led</h1><p>实现：led闪烁</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> led(<br>    <span class="hljs-keyword">input</span> sys_clk,<br>    <span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> led = <span class="hljs-number">1</span><br>);<br><br><span class="hljs-keyword">reg</span> [<span class="hljs-number">23</span>:<span class="hljs-number">0</span>] counter = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk) <span class="hljs-keyword">begin</span><br>    counter &lt;= counter + <span class="hljs-number">1&#x27;b1</span>;<br>    <span class="hljs-keyword">if</span>( counter == <span class="hljs-number">24&#x27;d1349_9999</span> ) <span class="hljs-keyword">begin</span><br>        led &lt;= ~led;<br>        counter &lt;= <span class="hljs-number">24&#x27;d0</span>;<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>点击 synthesize<br><img src="/img/fpga_demo/led/b_0.png"><br>绑定管脚<br>点击floorplanner<br>输入的是原理图上对应的管脚<br><img src="/img/fpga_demo/led/b_1.png"><br>点击 place &amp; route 布线</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>点击<br><img src="/img/fpga_demo/led/0.png"><br>点击save<br><img src="/img/fpga_demo/led/1.png"><br>下载到sram mode<br><img src="/img/fpga_demo/led/2.png"><br>效果如下<br><img src="/img/fpga_demo/led/11.gif">  </p><h2 id="在线逻辑分析仪"><a href="#在线逻辑分析仪" class="headerlink" title="在线逻辑分析仪"></a>在线逻辑分析仪</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>添加gao配置文件，一路next<br><img src="/img/fpga_demo/led/3.png"><br><img src="/img/fpga_demo/led/4.png"><br><img src="/img/fpga_demo/led/5.png"><br><img src="/img/fpga_demo/led/6.png"><br>添加触发信号<br><img src="/img/fpga_demo/led/7.png"><br><img src="/img/fpga_demo/led/8.png"><br>配置如下<br><img src="/img/fpga_demo/led/9.png"><br>采样信号<br><img src="/img/fpga_demo/led/10.png"><br>重新编译一下<br>延时太长，这里将延时改小</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> led(<br>    <span class="hljs-keyword">input</span> sys_clk,<br>    <span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> led<br>);<br><br><span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] counter;<br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk) <span class="hljs-keyword">begin</span><br>    counter &lt;= counter + <span class="hljs-number">1&#x27;b1</span>;<br>    <span class="hljs-keyword">if</span>( counter == <span class="hljs-number">4&#x27;d9</span> )<span class="hljs-keyword">begin</span><br>        led &lt;= ~led;<br>        counter &lt;= <span class="hljs-number">4&#x27;d0</span>;<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><p>点击 place &amp; route 重新编译一下</p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p><img src="/img/fpga_demo/led/11.png"><br>点击enable programer<br><img src="/img/fpga_demo/led/12.png"><br>依次点击箭头所指<br><img src="/img/fpga_demo/led/13.png"><br>出现波形<br><img src="/img/fpga_demo/led/14.png"><br>放大可以看到波形是10us反转一次<br><img src="/img/fpga_demo/led/15.png"><br>在板子上无法观察到，板子led恒亮</p><h1 id="key"><a href="#key" class="headerlink" title="key"></a>key</h1><p>实现：按键输入led电平反转</p><h2 id="按键消抖"><a href="#按键消抖" class="headerlink" title="按键消抖"></a>按键消抖</h2><p>按键通过延时进行消抖</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> key(<br><span class="hljs-keyword">input</span> sys_clk,<span class="hljs-comment">//系统时钟</span><br><span class="hljs-keyword">input</span> sys_rst_n,<span class="hljs-comment">//系统复位信号</span><br><span class="hljs-keyword">input</span> key,<span class="hljs-comment">//按键输入信号</span><br><span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> led<span class="hljs-comment">//led状态输出信号</span><br>);<br><br><span class="hljs-keyword">reg</span> [<span class="hljs-number">19</span>:<span class="hljs-number">0</span>] count ;<span class="hljs-comment">//计数寄存器</span><br><span class="hljs-comment">//这个按键消抖的思想是这样的：寻找按下后10ms稳定的按键低电平信号</span><br><span class="hljs-comment">//当按键未按下时，count的值是0 不开始计数，当按键在按下时 0 - 1 抖动的时候不计时 </span><br><span class="hljs-comment">//当检测到按键按下时 也就是key = 0 且 count小于计数最大值时，这时候count开始计数</span><br><span class="hljs-comment">//</span><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n )<span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span>(!sys_rst_n)<span class="hljs-comment">//复位</span><br>count &lt;= <span class="hljs-number">0</span> ;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(key == <span class="hljs-number">1&#x27;b1</span> )<span class="hljs-comment">//按键在未按下或者抖动状态时 计数值都被清空 </span><br>count &lt;= <span class="hljs-number">0</span> ; <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(count == <span class="hljs-number">20&#x27;d49_9999</span> &amp;&amp; key == <span class="hljs-number">1&#x27;b0</span>) <span class="hljs-comment">// 按键被按下处于消抖后稳定的位置 且计时时间恰好等于需要时间 后 count 给自己赋值 </span><br>count &lt;= count ;<span class="hljs-comment">//计时有效时长维持在50 0000</span><br><span class="hljs-keyword">else</span> <span class="hljs-comment">//count &lt; cnt_max  &amp;&amp; key = 0 count &gt; cnt_max</span><br>count &lt;= count + <span class="hljs-number">1</span> ;<span class="hljs-comment">//</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n)<span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span> (!sys_rst_n) <span class="hljs-comment">//</span><br>led  &lt;= <span class="hljs-number">1</span> ;<span class="hljs-comment">//</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(count == <span class="hljs-number">20&#x27;d49_9999</span> -<span class="hljs-number">1&#x27;b1</span> )<span class="hljs-comment">//在判断有效时需要将值减去几个单位</span><br>led &lt;=  ~led ; <span class="hljs-comment">//</span><br><span class="hljs-keyword">else</span>  <span class="hljs-comment">//</span><br>led &lt;=    led;<span class="hljs-comment">//</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h1 id="tube"><a href="#tube" class="headerlink" title="tube"></a>tube</h1><p>实验：实现电子时钟，显示时分秒，在六位数码管上分别显示时分秒</p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>在需要一个计数值来计时，单独出一个模块，根据逻辑写时分秒进位，和数码管的显示 作为一个模块，最后是一个顶层模块一共三个。</p><h3 id="计数模块"><a href="#计数模块" class="headerlink" title="计数模块"></a>计数模块</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> cnt(<br><span class="hljs-keyword">input</span> sys_clk,<span class="hljs-comment">//系统输入</span><br><span class="hljs-keyword">input</span> sys_rst_n,<span class="hljs-comment">//系统复位</span><br><span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> flag,<span class="hljs-comment">//一秒输出高电平维持一个周期作为秒自加信号</span><br><span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> flag_div<span class="hljs-comment">//0.016秒输出一个高电平作为 数码管位选位移信号，至少是1/6的flag时间</span><br>);<br><br><span class="hljs-keyword">parameter</span> cnt_max  = <span class="hljs-number">5000_0000</span> ;<span class="hljs-comment">//自加最大值</span><br><span class="hljs-comment">//parameter cnt_max  = 31&#x27;d50 ;//仿真是自加最大值</span><br><span class="hljs-comment">//parameter cnt_div_max  = 4&#x27;d8;//方针是分配自加最大值</span><br><span class="hljs-keyword">parameter</span> cnt_div_max  = <span class="hljs-number">17&#x27;d80000</span>;<span class="hljs-comment">//分频自加最大值</span><br><span class="hljs-keyword">reg</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] cnt;<span class="hljs-comment">//</span><br><span class="hljs-keyword">reg</span> [<span class="hljs-number">16</span>:<span class="hljs-number">0</span>] cnt_div6;<span class="hljs-comment">//</span><br><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n ) <span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span>(!sys_rst_n)<span class="hljs-comment">//复位</span><br>cnt &lt;= <span class="hljs-number">0</span> ;<span class="hljs-comment">//cnt清零</span><br><span class="hljs-keyword">else</span><span class="hljs-keyword">if</span>(cnt &lt; cnt_max - <span class="hljs-number">1&#x27;b1</span> ) <span class="hljs-keyword">begin</span><br>cnt &lt;= cnt + <span class="hljs-number">1&#x27;b1</span> ;<span class="hljs-comment">//当cnt未计到最大值时 一直自加</span><br>flag &lt;= <span class="hljs-number">1&#x27;b0</span>;<span class="hljs-comment">//秒自加信号一直是0</span><br><span class="hljs-keyword">end</span> <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>cnt  &lt;= <span class="hljs-number">31&#x27;b0</span>;<span class="hljs-comment">//当cnt计到最大值时，cnt清空</span><br>flag &lt;= <span class="hljs-number">1&#x27;b1</span>;<span class="hljs-comment">//自加标志位 置1</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n ) <span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span>(!sys_rst_n)<span class="hljs-comment">//复位</span><br>cnt_div6 &lt;= <span class="hljs-number">0</span> ;<span class="hljs-comment">//cnt清零</span><br><br><span class="hljs-keyword">else</span><span class="hljs-keyword">if</span>(cnt_div6 &lt; cnt_div_max - <span class="hljs-number">1&#x27;b1</span> ) <span class="hljs-keyword">begin</span><br>cnt_div6 &lt;= cnt_div6 + <span class="hljs-number">1&#x27;b1</span> ;<span class="hljs-comment">//当cnt_div未计到最大值时 一直自加</span><br>flag_div &lt;= <span class="hljs-number">1&#x27;b0</span>;<span class="hljs-comment">//位选移位信号一直是0</span><br><span class="hljs-keyword">end</span> <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>cnt_div6 &lt;= <span class="hljs-number">31&#x27;b0</span>;<span class="hljs-comment">//当cnt_div计到最大值时 cnt_div6清空</span><br>flag_div &lt;= <span class="hljs-number">1&#x27;b1</span>;<span class="hljs-comment">//位选移位信号置1</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h3 id="数码管显示模块"><a href="#数码管显示模块" class="headerlink" title="数码管显示模块"></a>数码管显示模块</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> tube(<br><span class="hljs-keyword">input</span> sys_clk   ,<span class="hljs-comment">//系统输入</span><br><span class="hljs-keyword">input</span> sys_rst_n ,<span class="hljs-comment">//复位</span><br><span class="hljs-keyword">input</span>  add_flag  ,<span class="hljs-comment">//秒自加标志位</span><br><span class="hljs-keyword">input</span>  add_div_flag  ,<span class="hljs-comment">//位移标志位</span><br><span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] dig_sel,<span class="hljs-comment">//位选输出</span><br><span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] dig_data<span class="hljs-comment">//数码管段码输出</span><br>);<br><span class="hljs-keyword">reg</span> [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] num   ;<br><span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] num_0 ;<br><span class="hljs-keyword">reg</span> [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] num_1 ;<br><span class="hljs-keyword">reg</span> [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] num_2 ;<br><br><br><span class="hljs-comment">//12 :36 :50</span><br><span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span> <span class="hljs-comment">//初始化时分秒和数码管位选</span><br>dig_sel &lt;= <span class="hljs-number">6&#x27;b011111</span>;<span class="hljs-comment">//数码管位选</span><br>num_0   &lt;= <span class="hljs-number">4&#x27;d12</span>;<span class="hljs-comment">//时</span><br>num_1   &lt;= <span class="hljs-number">6&#x27;d36</span>;<span class="hljs-comment">//分</span><br>num_2   &lt;= <span class="hljs-number">6&#x27;d50</span>;<span class="hljs-comment">//秒</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">always</span>@(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n) <span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span>(!sys_rst_n) <span class="hljs-keyword">begin</span><br>dig_sel  &lt;= <span class="hljs-number">6&#x27;b011111</span>;<br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (add_div_flag == <span class="hljs-number">1&#x27;b1</span>)<span class="hljs-keyword">begin</span><span class="hljs-comment">//移位标志位</span><br>dig_sel[<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] &lt;= &#123;dig_sel[<span class="hljs-number">0</span>],dig_sel[<span class="hljs-number">5</span>:<span class="hljs-number">1</span>]&#125;;<span class="hljs-comment">//移位</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">else</span> <br>dig_sel &lt;= dig_sel ;<span class="hljs-comment">//赋值给自己</span><br><span class="hljs-keyword">end</span><br><span class="hljs-comment">/* </span><br><span class="hljs-comment">*时间显示 </span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">always</span>@(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n)<span class="hljs-keyword">begin</span><br><span class="hljs-keyword">if</span>(!sys_rst_n) <span class="hljs-keyword">begin</span><span class="hljs-comment">//复位，将时间恢复初始设定</span><br>num_0 &lt;= <span class="hljs-number">12</span>;num_1 &lt;= <span class="hljs-number">36</span>;num_2 &lt;= <span class="hljs-number">50</span>;<span class="hljs-comment">// 12.36.50</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(add_flag == <span class="hljs-number">1&#x27;b1</span>) <span class="hljs-keyword">begin</span><span class="hljs-comment">//当自加标志位为 1 时</span><br>num_2 &lt;= num_2+ <span class="hljs-number">1&#x27;b1</span> ;<span class="hljs-comment">//秒上的值加1</span><br><span class="hljs-keyword">if</span>(num_2 == <span class="hljs-number">6&#x27;d60</span> -<span class="hljs-number">1&#x27;b1</span>) <span class="hljs-keyword">begin</span><span class="hljs-comment">//因为这句判断语句和 上面那句是并行关系 秒为59时进位</span><br>num_2 &lt;= <span class="hljs-number">0</span>;<span class="hljs-comment">//进位后num_2 = 0</span><br>num_1 &lt;= num_1+ <span class="hljs-number">1&#x27;b1</span>;<span class="hljs-comment">//num_1 +1 </span><br><br><span class="hljs-keyword">if</span>(num_1 == <span class="hljs-number">6&#x27;d60</span> -<span class="hljs-number">1&#x27;b1</span>) <span class="hljs-keyword">begin</span><span class="hljs-comment">//因为这句判断语句和 上面那句是并行关系 分为59时进位</span><br>num_1 &lt;= <span class="hljs-number">0</span>;<span class="hljs-comment">//进位后num_1 = 0</span><br>num_0 &lt;= num_0+ <span class="hljs-number">1&#x27;b1</span>;<span class="hljs-comment">//num_0 +1 </span><br><br><span class="hljs-keyword">if</span>(num_0 == <span class="hljs-number">4&#x27;d24</span> -<span class="hljs-number">1&#x27;b1</span>) <span class="hljs-keyword">begin</span><span class="hljs-comment">//因为这句判断语句和 上面那句是并行关系 时为23时进位</span><br>num_0 &lt;= <span class="hljs-number">0</span>;<span class="hljs-comment">//进位后num_0 = 0</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">*根据位选来给num赋值，就是对应的位上的值</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">always</span>@(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n) <span class="hljs-keyword">begin</span><br><span class="hljs-keyword">case</span>(dig_sel)<br><span class="hljs-number">6&#x27;b111110</span> :    num &lt;= num_2 % <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-number">6&#x27;b111101</span> :    num &lt;= num_2 / <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-number">6&#x27;b111011</span> :    num &lt;= num_1 % <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-number">6&#x27;b110111</span> :    num &lt;= num_1 / <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-number">6&#x27;b101111</span> :    num &lt;= num_0 % <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-number">6&#x27;b011111</span> :    num &lt;= num_0 / <span class="hljs-number">4&#x27;d10</span>;<br><span class="hljs-keyword">default</span> : num &lt;= <span class="hljs-number">0</span>;<br><span class="hljs-keyword">endcase</span><br><span class="hljs-keyword">end</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">*根据需要显示的值转换为数码管的段码</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">always</span>@(<span class="hljs-keyword">posedge</span> sys_clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> sys_rst_n) <span class="hljs-keyword">begin</span><br><span class="hljs-keyword">case</span>(num)<br><span class="hljs-number">4&#x27;h0</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1100_0000</span>;<br><span class="hljs-number">4&#x27;h1</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1111_1001</span>;<br><span class="hljs-number">4&#x27;h2</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1010_0100</span>;<br><span class="hljs-number">4&#x27;h3</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1011_0000</span>;<br><span class="hljs-number">4&#x27;h4</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1001_1001</span>;<br><span class="hljs-number">4&#x27;h5</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1001_0010</span>;<br><span class="hljs-number">4&#x27;h6</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_0010</span>;<br><span class="hljs-number">4&#x27;h7</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1111_1000</span>;<br><span class="hljs-number">4&#x27;h8</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_0000</span>;<br><span class="hljs-number">4&#x27;h9</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1001_0000</span>;<br><span class="hljs-number">4&#x27;ha</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_1000</span>;<br><span class="hljs-number">4&#x27;hb</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_0011</span>;<br><span class="hljs-number">4&#x27;hc</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1100_0110</span>;<br><span class="hljs-number">4&#x27;hd</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1010_0001</span>;<br><span class="hljs-number">4&#x27;he</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_0110</span>;<br><span class="hljs-number">4&#x27;hf</span> :    dig_data &lt;= <span class="hljs-number">8&#x27;b1000_1110</span>;<br><span class="hljs-keyword">default</span> : dig_data &lt;= <span class="hljs-number">8&#x27;b1100_0000</span>;<br><span class="hljs-keyword">endcase</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">endmodule</span><br><br><br></code></pre></td></tr></table></figure><h3 id="顶层模块"><a href="#顶层模块" class="headerlink" title="顶层模块"></a>顶层模块</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs awk">module tube_top(<br>input sys_clk,<span class="hljs-regexp">//</span>系统输入<br>input sys_rst_n,<span class="hljs-regexp">//</span>复位输入<br><br>output  [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>] dig_sel,<span class="hljs-regexp">//</span>位选数据输出<br>output  [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] dig_data<span class="hljs-regexp">//</span>段选数据输出<br>);<br><br>wire flag ;<br><br>tube tube_inst(<br>.sys_clk     (sys_clk),<span class="hljs-regexp">//</span>系统输入<br>.sys_rst_n   (sys_rst_n),<span class="hljs-regexp">//</span>复位输入<br>.add_flag    (flag),<span class="hljs-regexp">//</span>秒自加标志位输入<br>.add_div_flag(flag_div),<span class="hljs-regexp">//</span>位选位移标志位输入<br>.dig_sel (dig_sel),<span class="hljs-regexp">//</span>位选数据输出<br>.dig_data (dig_data)<span class="hljs-regexp">//</span>段选数据输出<br>);<br><br>cnt cnt_inst(<br>.sys_clk    (sys_clk),<span class="hljs-regexp">//</span>系统输入<br>.sys_rst_n  (sys_rst_n),<span class="hljs-regexp">//</span>复位输入<br>.flag   (flag),<span class="hljs-regexp">//</span>秒自加标志位输出<br>.flag_div   (flag_div)<span class="hljs-regexp">//</span>位选位移标志位输出<br>);<br><br>endmodule<br></code></pre></td></tr></table></figure><h2 id="仿真"><a href="#仿真" class="headerlink" title="仿真"></a>仿真</h2><h3 id="编写测试平台"><a href="#编写测试平台" class="headerlink" title="编写测试平台"></a>编写测试平台</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><br><span class="hljs-meta">`<span class="hljs-keyword">timescale</span> 1ns/1ns</span><br><span class="hljs-keyword">module</span> tb_tube();<br><br><span class="hljs-keyword">reg</span> sys_clk;<span class="hljs-comment">//定义时钟</span><br><span class="hljs-keyword">reg</span> sys_rst_n;<span class="hljs-comment">//定义复位信号</span><br><br><span class="hljs-keyword">wire</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]dig_data;<span class="hljs-comment">//定义输出段选信号</span><br><span class="hljs-keyword">wire</span> [<span class="hljs-number">5</span>:<span class="hljs-number">0</span>]dig_sel;<span class="hljs-comment">//定义输出位选信号</span><br><br><span class="hljs-keyword">always</span> #<span class="hljs-number">10</span> sys_clk = ~ sys_clk;<span class="hljs-comment">//模拟晶振</span><br><br><span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span><br>sys_clk = <span class="hljs-number">1&#x27;b1</span> ;<span class="hljs-comment">//初始高电平</span><br>sys_rst_n &lt;= <span class="hljs-number">1&#x27;b0</span>;<span class="hljs-comment">//复位</span><br>#<span class="hljs-number">20</span> sys_rst_n &lt;= <span class="hljs-number">1&#x27;b1</span>;<span class="hljs-comment">//延时将复位信号拉高</span><br><span class="hljs-keyword">end</span><br><br><br>tube_top tube_top_inst(<br><span class="hljs-variable">.sys_clk</span>    (sys_clk),<span class="hljs-comment">//时钟输入</span><br><span class="hljs-variable">.sys_rst_n</span>  (sys_rst_n),<span class="hljs-comment">//复位信号输入</span><br><br><span class="hljs-variable">.dig_sel</span>(dig_sel),<span class="hljs-comment">//输出位选信号</span><br><span class="hljs-variable">.dig_data</span>(dig_data)<span class="hljs-comment">//输出段选信号</span><br>);<br><br><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><p><img src="/img/fpga_demo/tube/0.png"><br><img src="/img/fpga_demo/tube/1.png"></p><h2 id="下载程序"><a href="#下载程序" class="headerlink" title="下载程序"></a>下载程序</h2><h3 id="下载到fpga"><a href="#下载到fpga" class="headerlink" title="下载到fpga"></a>下载到fpga</h3><p>点击图圈位置<br><img src="/img/fpga_demo/tube/2.png"><br>点击start下载</p><h3 id="下载到配置芯片-EPCS64"><a href="#下载到配置芯片-EPCS64" class="headerlink" title="下载到配置芯片 EPCS64"></a>下载到配置芯片 EPCS64</h3><p> .sof 转换成 .jic<br> <img src="/img/fpga_demo/tube/3.png"><br> <img src="/img/fpga_demo/tube/4.png"><br> 点击 add file ,将生成的jic文件添加进来。<br><img src="/img/fpga_demo/tube/5.png"><br> 如果不删除.sof文件下载会出现如下问题<br> <img src="/img/fpga_demo/tube/6.png"><br> 解决办法就是删除.sof文件后再下载。</p><h1 id="iic-驱动eeprom"><a href="#iic-驱动eeprom" class="headerlink" title="iic 驱动eeprom"></a>iic 驱动eeprom</h1><p>AT24C02的内存内部架构是 32页的8byte组成的  32*8byte &#x3D; 256 byte<br><img src="/img/fpga_demo/eeprom/0.png"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>上网小技巧</title>
    <link href="/2023/01/19/%E4%B8%8A%E7%BD%91%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <url>/2023/01/19/%E4%B8%8A%E7%BD%91%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="学习瓶颈"><a href="#学习瓶颈" class="headerlink" title="学习瓶颈"></a>学习瓶颈</h1><p>平时上github要么就连不上要么就超级慢<br>下载速度简直慢的不行<br>为了加速学习进度<br>这里使用一个开源软件来上网  </p><h1 id="clash"><a href="#clash" class="headerlink" title="clash"></a>clash</h1><p><a href="https://github.com/Fndroid/clash_for_windows_pkg/releases/">clash</a><br>下载 <font color ="dd0000">Clash.for.Windows-0.20.12-x64-linux.tar.gz</font><br><img src="/img/getnet/0.png"><br>下载完成后解压<br><img src="/img/getnet/1.png"><br>这样就行</p><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./cfw<br></code></pre></td></tr></table></figure><p>将绿色按钮位置的两个都打开<br><img src="/img/getnet/2.png"><br>Mixin 开启服务<br>Start with Linux 是开机自启</p><h1 id="服务商"><a href="#服务商" class="headerlink" title="服务商"></a>服务商</h1><p><a href="https://suyunti.com/auth/register?code=aQSB">net</a><br>注册登录<br><img src="/img/getnet/3.png"><br>16块一个月也挺便宜不看电影100G完全够用了  </p><h1 id="导入配置文件"><a href="#导入配置文件" class="headerlink" title="导入配置文件"></a>导入配置文件</h1><p>可以是一键导入也可以是复制链接<br><img src="/img/getnet/4.png">  </p><h1 id="手动配置本地"><a href="#手动配置本地" class="headerlink" title="手动配置本地"></a>手动配置本地</h1><p><img src="/img/getnet/5.png">  </p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo+gitee</title>
    <link href="/2023/01/07/hexo-gitee/"/>
    <url>/2023/01/07/hexo-gitee/</url>
    
    <content type="html"><![CDATA[<h1 id="ubuntu安装"><a href="#ubuntu安装" class="headerlink" title="ubuntu安装"></a>ubuntu安装</h1><p>安装git  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install git-core<br></code></pre></td></tr></table></figure><p>安装依赖  </p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo snap <span class="hljs-keyword">install</span> curl<br></code></pre></td></tr></table></figure><p>添加nodejs源  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//</span>deb.nodesource.c om/setup_19.x | sudo -E bash -<br></code></pre></td></tr></table></figure><p><a href="https://github.com/nodesource/distributions/blob/459b42923bb637b4b9b4728376e2e04d6f5a370f/README.md">官方 readme</a><br>安装nodejs  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install -y nodejs<br></code></pre></td></tr></table></figure><p>安装hexo  </p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">npm install -g hexo-<span class="hljs-keyword">cli</span><br></code></pre></td></tr></table></figure><p>检查nodejs安装版本  </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">node</span> <span class="hljs-title">-v</span> <br></code></pre></td></tr></table></figure><p><img src="/img/hexo+gitee/0.png"><br>检查npm安装版本  </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> -v<br></code></pre></td></tr></table></figure><p><img src="/img/hexo+gitee/1.png"><br>检查hexo版本  </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo -v</span><br></code></pre></td></tr></table></figure><p><img src="/img/hexo+gitee/2.png"></p><h1 id="设置-git"><a href="#设置-git" class="headerlink" title="设置 git"></a>设置 git</h1><p>配置账户邮箱  </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span> <span class="hljs-number">2556892336</span>@qq<span class="hljs-selector-class">.com</span> <br>git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&#x27;huerli&#x27;</span><br></code></pre></td></tr></table></figure><p>查看账户邮箱  </p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">git <span class="hljs-built_in">config</span> <span class="hljs-comment">--global user.name</span><br>git <span class="hljs-built_in">config</span> <span class="hljs-comment">--global user.email</span><br></code></pre></td></tr></table></figure><p><img src="/img/hexo+gitee/3.png"><br>本地生成ssh公钥  </p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">ssh-keygen -<span class="hljs-built_in">t</span> rsa -C <span class="hljs-string">&quot;2556892336@qq.com&quot;</span><br></code></pre></td></tr></table></figure><p>回车三次结果如图<br><img src="/img/hexo+gitee/4.png"><br>查看设置的密钥将隐藏文件打开<br><img src="/img/hexo+gitee/5.png"><br>查看公钥(id_rsa.pub)用文本编辑器打开<br><img src="/img/hexo+gitee/6.png"><br>打开gitee设置<br>点击SSH公钥<br><img src="/img/hexo+gitee/7.png"><br>添加后确认<br>验证密码<br><img src="/img/hexo+gitee/8.png"><br>正确后显示成功<br><img src="/img/hexo+gitee/9.png"></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> -T git<span class="hljs-variable">@gitee</span>.com<br></code></pre></td></tr></table></figure><p>输入 yes<br><img src="/img/hexo+gitee/10.png"><br>成功显示<br><img src="/img/hexo+gitee/11.png"></p><h1 id="Blog部分"><a href="#Blog部分" class="headerlink" title="Blog部分"></a>Blog部分</h1><p>创建blog文件夹  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> blog &amp;&amp; <span class="hljs-built_in">cd</span> blog <br></code></pre></td></tr></table></figure><p>初始化blog文件夹<br>建议使用手机热点，不然有点慢  </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">hexo <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p>启动 hexo(在博客目录下)</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">hexo</span> g<span class="hljs-comment"># 生成静态网页</span><br>hexo s<span class="hljs-comment"># 启动服务</span><br></code></pre></td></tr></table></figure><p>浏览器访问 <a href="http://localhost:4000/">http://localhost:4000</a></p><h1 id="创建gitee仓库"><a href="#创建gitee仓库" class="headerlink" title="创建gitee仓库"></a>创建gitee仓库</h1><p>如图所示即可<br><img src="/img/hexo+gitee/12.png"></p><h1 id="上传gitee"><a href="#上传gitee" class="headerlink" title="上传gitee"></a>上传gitee</h1><p>编辑 _config.yml  </p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repository:</span> https:<span class="hljs-comment">//gitee.com/huerli/huerli.git</span><br><span class="hljs-symbol">  branch:</span> master<br></code></pre></td></tr></table></figure><p>上传  </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo g</span><br><span class="hljs-attribute">hexo d</span><br></code></pre></td></tr></table></figure><p>需要输入gitee帐号密码<br><img src="/img/hexo+gitee/13.png"><br>出现<font color ="dd0000">deploy done git</font>就是成功<br><img src="/img/hexo+gitee/14.png"></p><h1 id="开始-page-服务"><a href="#开始-page-服务" class="headerlink" title="开始 page 服务"></a>开始 page 服务</h1><p>点击page服务第一次需要实名，完成后就可以开启了<br><img src="/img/hexo+gitee/15.png"><br>每次上传都需要更新<br><img src="/img/hexo+gitee/16.png"></p><h1 id="善后工作（删除）"><a href="#善后工作（删除）" class="headerlink" title="善后工作（删除）"></a>善后工作（删除）</h1><p>什么！你不要了？装错了？删除重来？<br>ok<br><del>sudo rm -rf</del>(bushi  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> <span class="hljs-built_in">remove</span> nodejs<br></code></pre></td></tr></table></figure><p>將源删除</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo rm <span class="hljs-regexp">/etc/</span>apt<span class="hljs-regexp">/sources.list.d/</span>nodesource.list<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu操作集合</title>
    <link href="/2023/01/07/ubuntu%E6%93%8D%E4%BD%9C%E9%9B%86%E5%90%88/"/>
    <url>/2023/01/07/ubuntu%E6%93%8D%E4%BD%9C%E9%9B%86%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h1 id="安装拼音输入法"><a href="#安装拼音输入法" class="headerlink" title="安装拼音输入法"></a>安装拼音输入法</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install ibus-pinyin<br></code></pre></td></tr></table></figure><p>点击加号<br><img src="/img/ubuntu-operation/0.png"><br>点击other<br><img src="/img/ubuntu-operation/1.png"><br>输入 chinese<br><img src="/img/ubuntu-operation/2.png"><br>使用 win+space 切换<br>可以在键盘快捷键处改变快捷键  </p><h1 id="安装ADB"><a href="#安装ADB" class="headerlink" title="安装ADB"></a>安装ADB</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install android-tools-adb<br></code></pre></td></tr></table></figure><p>编写规则</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo gedit <span class="hljs-regexp">/etc/u</span>dev<span class="hljs-regexp">/rules.d/</span><span class="hljs-number">80</span>-android.rules<br></code></pre></td></tr></table></figure><p>写入(其中红色字体部分需要 lsusb 查看)<br>SUBSYSTEM&#x3D;&#x3D;”usb”, ATTRS{idVendor}&#x3D;&#x3D;”<font color ="dd0000"> 18d1 </font>“, ATTRS{idProduct}&#x3D;&#x3D;”<font color ="dd0000"> d002 </font>“,MODE&#x3D;”0666”</p><h1 id="nfs服务-ubuntu"><a href="#nfs服务-ubuntu" class="headerlink" title="nfs服务 ubuntu"></a>nfs服务 ubuntu</h1><p>安装  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">sudo apt-<span class="hljs-keyword">get</span> install nfs-kernel-<span class="hljs-keyword">server</span> rpcbind -y<br></code></pre></td></tr></table></figure><p>打开 nfs 配置文件&#x2F;etc&#x2F;exports  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo gedit <span class="hljs-regexp">/etc/</span>exports<br></code></pre></td></tr></table></figure><p>写入配置（对应nfs路径）  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/home/</span>huerli<span class="hljs-regexp">/linux/</span>nfs *(rw,sync,no_root_squash)<br></code></pre></td></tr></table></figure><p>写入如图所示<br><img src="/img/ubuntu-operation/3.png"><br>重启 NFS 服务，使用命令如下：  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/etc/i</span>nit.d/nfs-kernel-server restart<br></code></pre></td></tr></table></figure><p>网络挂载rootfs出现错误<br><img src="/img/ubuntu-operation/nfs_0.png"><br>打开 &#x2F;etc&#x2F;default&#x2F;nfs-kernel-server  </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">sudo gedit <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/nfs-kernel-server<br></code></pre></td></tr></table></figure><p>输入如下</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">RPCNFSDOPTS</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;--nfs-version 2,3,4 --debug --syslog&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/img/ubuntu-operation/nfs_1.png"><br>重启服务  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/etc/i</span>nit.d/nfs-kernel-server restart<br></code></pre></td></tr></table></figure><h1 id="ssh服务"><a href="#ssh服务" class="headerlink" title="ssh服务"></a>ssh服务</h1><h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><p>安装即可  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">sudo apt-<span class="hljs-keyword">get</span> install openssh-<span class="hljs-keyword">server</span> -y<br></code></pre></td></tr></table></figure><h2 id="buildroot构建的根文件系统"><a href="#buildroot构建的根文件系统" class="headerlink" title="buildroot构建的根文件系统"></a>buildroot构建的根文件系统</h2><p>buildroot勾选编译openssh</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">-&gt; Target packages <br>-&gt; Networking applications<br>-&gt; [*] openssh <span class="hljs-comment">//使能 openssh</span><br></code></pre></td></tr></table></figure><p><img src="/img/ubuntu-operation/ssh_0.png"></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>创建用户<br>adduser huerli<br>输入两次密码<br>给权限  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">chown root:root <span class="hljs-regexp">/var/</span>empty<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">PermitRootLogin <span class="hljs-built_in">yes</span><br>AuthorizedKeysFile.ssh/authorized_keys<br></code></pre></td></tr></table></figure><h1 id="固定设备IP"><a href="#固定设备IP" class="headerlink" title="固定设备IP"></a>固定设备IP</h1><p><img src="/img/ubuntu-operation/4.png"></p><h1 id="ftp服务器"><a href="#ftp服务器" class="headerlink" title="ftp服务器"></a>ftp服务器</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo apt-get install vsftpd &amp;&amp; sudo gedit <span class="hljs-regexp">/etc/</span>vsftpd.conf <br></code></pre></td></tr></table></figure><p>把以下两个值前方的 # 取消</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">local_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">write_enable</span>=<span class="hljs-literal">YES</span><br></code></pre></td></tr></table></figure><p>重启服务  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/etc/i</span>nit.d/vsftpd restart<br></code></pre></td></tr></table></figure><h1 id="tftp服务ubuntu"><a href="#tftp服务ubuntu" class="headerlink" title="tftp服务ubuntu"></a>tftp服务ubuntu</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install tftp-hpa tftpd-hpa xinetd<br></code></pre></td></tr></table></figure><p>创建文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo mkdir <span class="hljs-regexp">/etc/</span>xinetd.d &amp;&amp; sudo gedit <span class="hljs-regexp">/etc/</span>xinetd.d/tftp<br></code></pre></td></tr></table></figure><p>输入</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">server tftp<br>&#123;<br>socket_type <span class="hljs-operator">=</span> dgram<br>protocol <span class="hljs-operator">=</span> udp<br>wait <span class="hljs-operator">=</span> yes<br>user <span class="hljs-operator">=</span> root<br>server <span class="hljs-operator">=</span> /usr/sbin/in.tftpd<br>server_args <span class="hljs-operator">=</span> -s /home/huerli/linux/tftpboot/<br>disable <span class="hljs-operator">=</span> no<br>per_source <span class="hljs-operator">=</span> <span class="hljs-number">11</span><br>cps <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-number">2</span><br>flags <span class="hljs-operator">=</span> IPv4<br>&#125;<br></code></pre></td></tr></table></figure><p>启动 tftp 服务</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo service tftpd-hpa <span class="hljs-literal">start</span><br></code></pre></td></tr></table></figure><p>打开&#x2F;etc&#x2F;default&#x2F;tftpd-hpa 文件</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">sudo gedit <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/tftpd-hpa<br></code></pre></td></tr></table></figure><p>修改为如下</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># /etc/default/tftpd-hpa</span><br><br><span class="hljs-attr">TFTP_USERNAME</span>=<span class="hljs-string">&quot;tftp&quot;</span><br><span class="hljs-attr">TFTP_DIRECTORY</span>=<span class="hljs-string">&quot;/home/huerli/linux/tftpboot&quot;</span><br><span class="hljs-attr">TFTP_ADDRESS</span>=<span class="hljs-string">&quot;:69&quot;</span><br><span class="hljs-attr">TFTP_OPTIONS</span>=<span class="hljs-string">&quot;-l -c -s&quot;</span><br></code></pre></td></tr></table></figure><p>重启服务器</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo service tftpd-hpa restart</span><br></code></pre></td></tr></table></figure><p>启动开发板<br><img src="/img/ubuntu-operation/5.png"></p><h1 id="vscode-开发"><a href="#vscode-开发" class="headerlink" title="vscode 开发"></a>vscode 开发</h1><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">C</span><span class="hljs-operator">/</span><span class="hljs-built_in">C</span><span class="hljs-operator">++</span>  <br><span class="hljs-built_in">C</span><span class="hljs-operator">/</span><span class="hljs-built_in">C</span><span class="hljs-operator">++</span> <span class="hljs-variable">Snippets</span>  <br><span class="hljs-built_in">C</span><span class="hljs-operator">/</span><span class="hljs-built_in">C</span><span class="hljs-operator">++</span> <span class="hljs-variable">Advanced</span> <span class="hljs-variable">Lint</span>  <br><span class="hljs-variable">Code</span> <span class="hljs-variable">Runner</span>  <br><span class="hljs-variable">Include</span> <span class="hljs-variable">AutoComplete</span>  <br><span class="hljs-variable">Rainbow</span> <span class="hljs-variable">Brackets</span>  <br><span class="hljs-variable">One</span> <span class="hljs-variable">Dark</span> <span class="hljs-variable">Pro</span>  <br><span class="hljs-variable">GBKtoUTF8</span>  <br><span class="hljs-variable">ARM</span>  <br><span class="hljs-variable">vscode</span><span class="hljs-operator">-</span><span class="hljs-variable">icons</span>  <br><span class="hljs-variable">compareit</span>  <br><span class="hljs-variable">DeviceTree</span>  <br><span class="hljs-variable">TabNine</span>  <br><span class="hljs-variable">Chinese</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Simplified</span><span class="hljs-punctuation">)</span>  <br></code></pre></td></tr></table></figure><p>设置中文 ctrl+shift+p<br>输入 选择中文</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">configure language</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tina-lcd</title>
    <link href="/2023/01/05/tina-lcd/"/>
    <url>/2023/01/05/tina-lcd/</url>
    
    <content type="html"><![CDATA[<h1 id="打开LCD显示"><a href="#打开LCD显示" class="headerlink" title="打开LCD显示"></a>打开LCD显示</h1><p>在tina-linux 的sdk中lcd显示是默认打开的，所以不需要作过多的操作，但是设备树中屏幕的分辨率参数等等可能和你使用的屏幕不一样，所以需要修改一下。  </p><h2 id="修改设备树"><a href="#修改设备树" class="headerlink" title="修改设备树"></a>修改设备树</h2><p>设备树位置  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">device<span class="hljs-regexp">/config/</span>chips<span class="hljs-regexp">/(你的芯片)/</span>configs<span class="hljs-regexp">/mq_r/</span>board.dts<br></code></pre></td></tr></table></figure><p>打开后ctrl+f 搜索 ‘lcd0’，找未被注释的lcd0  </p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">&amp;lcd0 &#123;<br>lcd_used            = <span class="hljs-variable">&lt;1&gt;</span>;<br><br>lcd_driver_name     = <span class="hljs-string">&quot;default_lcd&quot;</span>;<br>lcd_if              = <span class="hljs-variable">&lt;0&gt;</span>;<br>lcd_x               = <span class="hljs-variable">&lt;800&gt;</span>;<br>lcd_y               = <span class="hljs-variable">&lt;480&gt;</span>;<br>lcd_width           = <span class="hljs-variable">&lt;150&gt;</span>;<br>lcd_height          = <span class="hljs-variable">&lt;94&gt;</span>;<br>lcd_dclk_freq       = <span class="hljs-variable">&lt;48&gt;</span>;<br>......<br></code></pre></td></tr></table></figure><p>大概就是这些内容，需要修改的就是lcd_x,lcd_y修改为对应的。<br>将修改为的设备树重新编译并烧录<br>进行雪花屏测试  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/dev/u</span>random &gt; <span class="hljs-regexp">/dev/</span>fb0<br></code></pre></td></tr></table></figure><p>清屏</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/dev/</span>zero &gt; <span class="hljs-regexp">/dev/</span>fb0<br></code></pre></td></tr></table></figure><p>彩屏测试</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-number">8</span> &gt; <span class="hljs-regexp">/sys/</span><span class="hljs-keyword">class</span><span class="hljs-regexp">/disp/</span>disp<span class="hljs-regexp">/attr/</span>colorbar<br></code></pre></td></tr></table></figure><h1 id="gt911触摸"><a href="#gt911触摸" class="headerlink" title="gt911触摸"></a>gt911触摸</h1><p>设备树存在也可以正常驱动触摸屏<br>将gt911驱动编译进内核  </p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">source</span> build/envsetup.<span class="hljs-keyword">sh</span>&amp;&amp;lunch&amp;&amp;<span class="hljs-keyword">make</span> kernel_menuconfig<br></code></pre></td></tr></table></figure><p>选择对应芯片<br><img src="/img/tina-linux-lcd/0.png"><br>驱动路径</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xl">D<span class="hljs-function"><span class="hljs-title">evice</span> Drivers  ---&gt;</span> <br>I<span class="hljs-function"><span class="hljs-title">nput</span> device support  ---&gt;</span><br>[*]   T<span class="hljs-function"><span class="hljs-title">ouchscreens</span>  ---&gt;</span><br>&lt;*&gt;   Goodix I2C touchscreen<br>&lt;*&gt;   gt9xxnew touchscreen driver<br><br></code></pre></td></tr></table></figure><p>勾选tslib库测试屏幕</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make menuconfig</span><br></code></pre></td></tr></table></figure><p>库路径</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xl">L<span class="hljs-function"><span class="hljs-title">ibraries</span>  ---&gt;</span> <br>&lt;*&gt;tslib<br>A<span class="hljs-function"><span class="hljs-title">llwinner</span>  ---&gt;</span><br>&lt;*&gt;mtop<br></code></pre></td></tr></table></figure><p>编译烧录  </p><p>查看设备节点  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ls <span class="hljs-regexp">/dev/i</span>nput/<br></code></pre></td></tr></table></figure><p>可以看到对应的设备节点</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">eve<span class="hljs-symbol">nt0</span>  eve<span class="hljs-symbol">nt1</span><br></code></pre></td></tr></table></figure><h1 id="little-lvgl-示例"><a href="#little-lvgl-示例" class="headerlink" title="little lvgl 示例"></a>little lvgl 示例</h1><h2 id="使能例程"><a href="#使能例程" class="headerlink" title="使能例程"></a>使能例程</h2><p>官方默认也使能了lvgl的例程</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make menuconfig</span><br></code></pre></td></tr></table></figure><p>自行勾选需要的例程</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">Gui <span class="hljs-comment">---&gt;</span><br>Liitevgl <span class="hljs-comment">---&gt;</span><br>&lt;*&gt; lv_examples<br>&lt;*&gt; lvgl-<span class="hljs-number">8.1</span>.<span class="hljs-number">0</span> <span class="hljs-keyword">use</span> sunxifb double <span class="hljs-keyword">buffer</span><br>&lt;*&gt; lvgl-<span class="hljs-number">8.1</span>.<span class="hljs-number">0</span> <span class="hljs-keyword">use</span> sunxifb cache<br>-*- lvgl-<span class="hljs-number">8.1</span>.<span class="hljs-number">0</span> <span class="hljs-keyword">use</span> sunxifb g2d<br>&lt;*&gt; lvgl-<span class="hljs-number">8.1</span>.<span class="hljs-number">0</span> <span class="hljs-keyword">use</span> sunxifb g2d rotate<br>&lt;*&gt; lv_g2d_test<br>&lt;*&gt; lv_monitor<br></code></pre></td></tr></table></figure><p>编译烧录<br>在终端中输入  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">lv_examples</span> <span class="hljs-number">0</span> or <span class="hljs-number">1</span> or <span class="hljs-number">2</span> or <span class="hljs-number">3</span> or <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>可以看到对应的例程现象，同时也看到了报错<br><img src="/img/tina-linux-lcd/1.png"><br>这个报错是应为触摸对应的节点没有和源码对上(lv_drv_conf.h)<br><img src="/img/tina-linux-lcd/2.png"><br>源码中节点是 <font color ="dd0000" size = 13> event3 </font><br>在终端做一个文件映射（比如你的触摸设备是event1） </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -s <span class="hljs-regexp">/dev/i</span>nput<span class="hljs-regexp">/event1 /</span>dev<span class="hljs-regexp">/input/</span>event3 <br></code></pre></td></tr></table></figure><p>或者是将源码修改为触摸设备对应的节点  </p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tina</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tina-linux-wifi</title>
    <link href="/2023/01/03/tina-linux-wifi/"/>
    <url>/2023/01/03/tina-linux-wifi/</url>
    
    <content type="html"><![CDATA[<h1 id="tina-linux初体验"><a href="#tina-linux初体验" class="headerlink" title="tina-linux初体验"></a>tina-linux初体验</h1><p>编译tina就是一个巨坑这一步是最难的，建议就是同百度网盘来下载文件。官方网站真的真的真的太慢了…<br>成功搭建编译环境之后，直接进行编译，编译出的结果镜像却无法连接wifi！<br>输入官方提供的wifi指令却显示报错<br><img src="/img/tina-linux-wifi/0.png"><br>出现这个错误我们从<font color ="00ff00" size = 10>三个方面</font>来看这个问题<br>1.驱动<br>查看驱动命令检查驱动是否在运行并且是不是对应网卡的驱动</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>lsmod <br></code></pre></td></tr></table></figure><p><img src="/img/tina-linux-wifi/1.png"><br>我的板子是T113,对应的网卡驱动是8723DS并不是8189fs，所以需要将这个驱动卸载。</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>rmmod <span class="hljs-number">8189</span>fs<br></code></pre></td></tr></table></figure><p>出现图上内容则卸载驱动成功<br><img src="/img/tina-linux-wifi/2.png"><br>加载正确的wifi驱动</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>modprobe <span class="hljs-number">8723</span>ds.ko<br></code></pre></td></tr></table></figure><p><img src="/img/tina-linux-wifi/3.png"><br>出现图上内容则加载驱动成功<br>2.网卡<br>检查网卡是否在工作</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>ifconfig<br></code></pre></td></tr></table></figure><p><img src="/img/tina-linux-wifi/4.png"><br>出现图上内容则网卡在工作<br>3.wap服务<br>在进程中查看wpa_supplicant是否存在  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">ps</span> | grep wpa_supplicant<br></code></pre></td></tr></table></figure><p>出现的是下方内容则说明该进程不存在<br><img src="/img/tina-linux-wifi/5.png"></p><p>输入该命令启动服务  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ <span class="hljs-regexp">/etc/i</span>nit.d/wpa_supplicant start<br></code></pre></td></tr></table></figure><p>出现的是下方内容则说明该进程存在<br><img src="/img/tina-linux-wifi/6.png"><br>尝试连接wifi  </p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>wifi_connect_ap_test DAP <span class="hljs-number">12345678</span><br></code></pre></td></tr></table></figure><p><img src="/img/tina-linux-wifi/7.png"><br>wifi连接成功<br>尝试ping外网<br><img src="/img/tina-linux-wifi/8.png"><br>能ping通百度</p><h1 id="开机自启动驱动和服务"><a href="#开机自启动驱动和服务" class="headerlink" title="开机自启动驱动和服务"></a>开机自启动驱动和服务</h1><p>开机自启动的程序一般是存放在 <font color ="dddd00" size = 10>&#x2F;etc&#x2F;init.d </font> 下<br>使用下方指令查看自启动文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ vi <span class="hljs-regexp">/etc/i</span>nit.d/rsC <br></code></pre></td></tr></table></figure><p>可以看到自启动模块驱动文件是 &#x2F;etc&#x2F;init.d&#x2F;rc.moudles<br><img src="/img/tina-linux-wifi/9.png"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ vi <span class="hljs-regexp">/etc/i</span>nit.d/rc.moudles <br></code></pre></td></tr></table></figure><p>驱动8723ds被注释了，将#删除 并将用不到的驱动注释<br><img src="/img/tina-linux-wifi/10.png"><br>注释后如下：<br><img src="/img/tina-linux-wifi/11.png"></p><hr><p>查看 &#x2F;etc&#x2F;profile 可以看到如下的语句 它会执行&#x2F;etc&#x2F;profile.d 所有以 .sh结尾的文件<br><img src="/img/tina-linux-wifi/12.png"><br>看看 &#x2F;etc&#x2F;profile.d 是否存在 若不存在则创建</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> /etc/profile.d</span><br></code></pre></td></tr></table></figure><p>传建启动文件</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">$ <span class="hljs-keyword">vi</span> wifi_connect.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p>写入</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wifi_connect_ap_test</span> DAP <span class="hljs-number">12345678</span><br></code></pre></td></tr></table></figure><p>重新启动后可以看到有连接信息打印<br><img src="/img/tina-linux-wifi/13.png"></p><h1 id="一劳永逸-修改源码中的内容"><a href="#一劳永逸-修改源码中的内容" class="headerlink" title="一劳永逸:修改源码中的内容"></a>一劳永逸:修改源码中的内容</h1><p>位置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">target<span class="hljs-regexp">/allwinner/</span>(芯片平台)<span class="hljs-regexp">/busybox-init-base-files/</span>etc<br></code></pre></td></tr></table></figure><p><img src="/img/tina-linux-wifi/14.png"><br>修改ssid和psk 分别是WIFI名称和密码<br><img src="/img/tina-linux-wifi/15.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tina</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>stm32+esp8266接入云</title>
    <link href="/2022/12/31/stm32-esp8266%E6%8E%A5%E5%85%A5%E4%BA%91/"/>
    <url>/2022/12/31/stm32-esp8266%E6%8E%A5%E5%85%A5%E4%BA%91/</url>
    
    <content type="html"><![CDATA[<h1 id="云部分"><a href="#云部分" class="headerlink" title="云部分"></a>云部分</h1><h2 id="新建阿里云产品和设备"><a href="#新建阿里云产品和设备" class="headerlink" title="新建阿里云产品和设备"></a>新建阿里云产品和设备</h2><p><img src="/img/stm32+esp8266/0.png"><br>点击创建产品<br><img src="/img/stm32+esp8266/1.png"><br>点击添加设备<br><img src="/img/stm32+esp8266/2.png"><br><img src="/img/stm32+esp8266/3.png"><br>devicename 可以随便写。<br><img src="/img/stm32+esp8266/4.png"></p><h2 id="ESP8266"><a href="#ESP8266" class="headerlink" title="ESP8266"></a>ESP8266</h2><h3 id="ESP8266-MQTT固件烧录"><a href="#ESP8266-MQTT固件烧录" class="headerlink" title="ESP8266 MQTT固件烧录"></a>ESP8266 MQTT固件烧录</h3><p>MQTT AT 固件链接<a href="https://pan.baidu.com/s/10xE-DGubCJ7KQlC-Vop08g">baiduyun</a> 提取码 1ztn<br>准备一个ESP8266 01S 和一个烧写器（会方便很多，不然总是烧写失败）<br><img src="/img/stm32+esp8266/5.png"><br><img src="/img/stm32+esp8266/6.png"><br>打开烧写工具<br><img src="/img/stm32+esp8266/7.png"><br>选择箭头所指<br><img src="/img/stm32+esp8266/8.png"><br>跟着箭头设置<br><img src="/img/stm32+esp8266/9.png"><br>烧录完成后<br>将ESP8266拔下重新上电。通过串口助手打开，就会有信息发送。 波特率默认是115200.<br><img src="/img/stm32+esp8266/10.png"><br><font color ="ff00ff">发送一个AT需要勾选发送新行。</font>  可以和我一样将命令保存在串口助手的多条发送上<br><img src="/img/stm32+esp8266/11.png"></p><h2 id="获取mqtt设备连接阿里云的参数"><a href="#获取mqtt设备连接阿里云的参数" class="headerlink" title="获取mqtt设备连接阿里云的参数"></a>获取mqtt设备连接阿里云的参数</h2><h3 id="获取三要素"><a href="#获取三要素" class="headerlink" title="获取三要素"></a>获取三要素</h3><p>在产品界面选择你的产品，进入后选择设备，进入设备界面后通过箭头 2 查看链接三要数。<br><img src="/img/stm32+esp8266/12.png"><br>一键复制出来，可以先粘贴到记事本，方便一会查看<br><img src="/img/stm32+esp8266/13.png"></p><h3 id="重新配置加密参数"><a href="#重新配置加密参数" class="headerlink" title="重新配置加密参数"></a>重新配置加密参数</h3><p>首先将三元组粘贴在右边的框框里，然后在箭头②处随便输入五个字符。点击右下角的生成就会生成链接参数。<br><img src="/img/stm32+esp8266/14.png"></p><h3 id="MQTT-AT-链接阿里云指令"><a href="#MQTT-AT-链接阿里云指令" class="headerlink" title="MQTT AT 链接阿里云指令"></a>MQTT AT 链接阿里云指令</h3><p>官方文档：<a href="https://docs.espressif.com/projects/esp-at/zh_CN/latest/esp32/AT_Command_Set/MQTT_AT_Commands.html">docs</a><br>通过AT 指令链接上阿里云的指令如下。  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AT</span>+CIPSNTPCFG=<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-string">&quot;ntp1.aliyun.com&quot;</span><br><span class="hljs-attribute">AT</span>+MQTTUSERCFG=<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&quot;NULL&quot;</span>,<span class="hljs-string">&quot;USERNAME&quot;</span>,<span class="hljs-string">&quot;PASSWARD&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attribute">AT</span>+MQTTCLIENTID=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;Clientid&quot;</span><br><span class="hljs-attribute">AT</span>+MQTTCONN=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;链接域名&quot;</span>,链接端口,<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>需要注意的是CLIENTID里的参数需要添加转义字符，例如：  </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">AT</span>+MQTTCLIENTID=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;12345|securemode=3\,signmethod=hmacsha1|&quot;</span><br></code></pre></td></tr></table></figure><p>链接域名复制到  .com为止，链接端口填 1883<br><img src="/img/stm32+esp8266/15.png"></p><h3 id="MQTT订阅和上报参数的-AT-指令"><a href="#MQTT订阅和上报参数的-AT-指令" class="headerlink" title="MQTT订阅和上报参数的 AT 指令"></a>MQTT订阅和上报参数的 AT 指令</h3><p>我们可以在产品界面的Topic列表的物模通信Topic看到具有<font color = "ff0000">发布</font> 和<font color = "ff0000">订阅</font>的Topic。<br><img src="/img/stm32+esp8266/16.png"><br>我们可以在自定义的Topic中选择一个具有订阅权限的Topic<br><img src="/img/stm32+esp8266/17.png"><br>通过串口助手订阅主题，将decicename替换成自己的设备名称。  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Topic <span class="hljs-regexp">/hq42unqMiBQ/</span><span class="hljs-variable">$&#123;deviceName&#125;</span><span class="hljs-regexp">/user/g</span>et<br>AT+MQTTSUB=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;/hq42unqMiBQ/test/user/get&quot;</span>,<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>订阅成功后在设备的Topic列表会出现一个已订阅的Topic。<br><img src="/img/stm32+esp8266/18.png"><br>我们可以点击发布消息，测试一下esp8266是否能够成功的收到云端发布的消息。<br><img src="/img/stm32+esp8266/19.png"><br>在串口助手可以看到我们接收到的消息。说明订阅成功。<br><img src="/img/stm32+esp8266/20.png"><br>订阅一个Topic也是同样的道理。<br>第一个引号里面是Topic，第二个引号里面是想要发送的消息  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">AT</span>+MQTTPUB=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;/hq42unqMiBQ/test/user/get&quot;</span>,<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>通过串口助手发送消息，发送成功会返回一个OK。<br><img src="/img/stm32+esp8266/21.png"><br>同时我们可以在监控运维的日志服务中选择我们的产品进行查看消息。<br><img src="/img/stm32+esp8266/22.png"><br>点击查看。就可以看到我们向云端发送的消息。<br><img src="/img/stm32+esp8266/23.png"></p><h1 id="STM32部分"><a href="#STM32部分" class="headerlink" title="STM32部分"></a>STM32部分</h1><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><p><img src="/img/stm32+esp8266/24.png"><br><img src="/img/stm32+esp8266/25.png"><br>打开串口1的异步通讯，作为打印的数据串口。<br><img src="/img/stm32+esp8266/26.png"><br>打开串口2的异步通讯，作为ESP8266通讯的串口。<br><img src="/img/stm32+esp8266/27.png"><br>将频率修改为72M<br><img src="/img/stm32+esp8266/28.png"><br>LCD配置：<a href="https://blog.csdn.net/huuuerli/article/details/125576184?spm=1001.2014.3001.5501">csdn</a><br>创建工程<br><img src="/img/stm32+esp8266/29.png"><br><img src="/img/stm32+esp8266/30.png"></p><h2 id="添加源文件"><a href="#添加源文件" class="headerlink" title="添加源文件"></a>添加源文件</h2><p>源文件链接<a href="https://pan.baidu.com/s/1iMf45oi4QBp2OQcmAYmzoQ">baiduyun</a> 提取码：6a3i<br>加入工程<br><img src="/img/stm32+esp8266/31.png"><br>添加文件路径。<br><img src="/img/stm32+esp8266/32.png"><br><img src="/img/stm32+esp8266/33.png"><br><img src="/img/stm32+esp8266/34.png"><br><img src="/img/stm32+esp8266/35.png"></p><h2 id="修改esp8266-h"><a href="#修改esp8266-h" class="headerlink" title="修改esp8266.h"></a>修改esp8266.h</h2><p>需要修改的部分已经通过箭头指出，在这些宏定义中<font color = "ff0000">转意符 “\”</font> 不可以随意删除，会导致指令发送失败。<br><img src="/img/stm32+esp8266/36.png"></p><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>在初始化位置添加初始化函数。初始化函数在esp8266.c中可自行查看。  </p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">HAL_UART_Receive_IT</span>(&amp;huart2, (uint8_t *)&amp;a_esp8266_buf, <span class="hljs-number">1</span>);<br><span class="hljs-built_in">LCD_Init</span>(); #使用则加不使用则不加<br><span class="hljs-built_in">ESP8266_Init_ALIYUN</span>();<br></code></pre></td></tr></table></figure><p>需要勾选MicroLIB的库，否则printf不可使用，会导致LCD_Init 函数卡死。 <br><img src="/img/stm32+esp8266/37.png"><br>同时在USART.C的如下位置添加如下代码，进行串口重定向。 <br><img src="/img/stm32+esp8266/38.png"></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br> <br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __GNUC__</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PUTCHAR_PROTOTYPE int __io_putchar(int ch)</span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-title class_">PUTCHAR_PROTOTYPE</span><br><span class="hljs-punctuation">&#123;</span><br>HAL_UART_Transmit(<span class="hljs-variable">&amp;huart1</span>, (uint8_t *)<span class="hljs-variable">&amp;ch</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0xFFFF</span>)<span class="hljs-punctuation">;</span><br>return <span class="hljs-attr">ch</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>需要使用串口2的中断接收数据。通过中断回调函数进行。<br><img src="/img/stm32+esp8266/39.png"></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">void <span class="hljs-constructor">HAL_UART_RxCpltCallback(UART_HandleTypeDef <span class="hljs-operator">*</span><span class="hljs-params">huart</span>)</span><br>&#123;<br>    <span class="hljs-keyword">if</span>(huart-&gt;Instance<span class="hljs-operator"> == </span>USART2)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(esp8266_cnt &gt;= <span class="hljs-number">512</span>)  <br>        &#123;<br>            esp8266_cnt = <span class="hljs-number">0</span>;<br>            memset(ESP8266_Buf,<span class="hljs-number">0x00</span>,sizeof(ESP8266_Buf));<br>            <span class="hljs-constructor">HAL_UART_Transmit(&amp;<span class="hljs-params">huart2</span>, (<span class="hljs-params">uint8_t</span> <span class="hljs-operator">*</span>)</span><span class="hljs-string">&quot;data overflow&quot;</span>, <span class="hljs-number">10</span>,<span class="hljs-number">0xFFFF</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            ESP8266_Buf<span class="hljs-literal">[<span class="hljs-identifier">esp8266_cnt</span><span class="hljs-operator">++</span>]</span> = a_esp8266_buf;<br>        &#125;<br>        <span class="hljs-constructor">HAL_UART_Receive_IT(&amp;<span class="hljs-params">huart2</span>, (<span class="hljs-params">uint8_t</span> <span class="hljs-operator">*</span>)</span>&amp;a_esp8266_buf, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>至此，stm32通过esp8266就成功的接入了阿里云。  </p><h2 id="功能定义"><a href="#功能定义" class="headerlink" title="功能定义"></a>功能定义</h2><p>在产品的详情界面中点击功能定义 ，再点击编辑草稿。<br><img src="/img/stm32+esp8266/40.png"><br>点击添加自定义功能添加自己设置的功能模块。<br><img src="/img/stm32+esp8266/41.png"><br>如图。<br><img src="/img/stm32+esp8266/42.png"><br> 添加完成过后记得发布上线，否则不会更新。<br><img src="/img/stm32+esp8266/43.png"></p><h2 id="订阅和发布的Topic"><a href="#订阅和发布的Topic" class="headerlink" title="订阅和发布的Topic"></a>订阅和发布的Topic</h2><p>选择属性上报的第一个作为设备属性上报的Topic。<br><img src="/img/stm32+esp8266/44.png"><br>在C语言中有一个函数可以将字符串按照格式写进数组中。<a href="https://www.runoob.com/cprogramming/c-function-sprintf.html">runoob</a><br>因为 AT+MQTTPUB  这个AT指令只支持256字节以内的消息发送，所以我我们只需要定义一个256个大小的数组去作为我们指令的存储的数组。<br>代码如下：  </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">char data[<span class="hljs-number">256</span>];<br>memset(data, <span class="hljs-number">0</span>, sizeof(data));   <br>sprintf(data,<span class="hljs-string">&quot;AT+MQTTPUB=0,<span class="hljs-subst">\&quot;</span>/sys/hq42unqMiBQ/test/thing/event/property/post<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\&quot;</span>&#123;<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>params<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>LED1<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:%d<span class="hljs-subst">\\</span>\,<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>LED2<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:%d&#125;<span class="hljs-subst">\\</span>\,<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>method<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>thing.event.property.post<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>&#125;<span class="hljs-subst">\&quot;</span>,0,0<span class="hljs-subst">\r</span><span class="hljs-subst">\n</span>&quot;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br><span class="hljs-keyword">while</span>(<span class="hljs-type">ESP8266_SendCmd</span>(data,<span class="hljs-string">&quot;OK&quot;</span>));<br></code></pre></td></tr></table></figure><p>需要将发送的间隔拉大一些，如下，通过延时函数和计数数将时间拉大到10s发送一次。<br><img src="/img/stm32+esp8266/45.png"><br>将代码烧录之后，运行完成可以在物模型数据看到发送到平台的数据。<br><img src="/img/stm32+esp8266/46.png"></p><h1 id="解析数据"><a href="#解析数据" class="headerlink" title="解析数据"></a>解析数据</h1><h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><p>进入阿里云的IOT Stdio，点击新建项目。<br><img src="/img/stm32+esp8266/47.png"><br>新建项目后点击新建Web应用。<br><img src="/img/stm32+esp8266/48.png"><br>应用名称随便填写<br><img src="/img/stm32+esp8266/49.png"><br>创建完成后我们进入应用。  </p><h2 id="添加应用"><a href="#添加应用" class="headerlink" title="添加应用"></a>添加应用</h2><p>在左侧组件处拖入一个指示灯和一个开关。<br><img src="/img/stm32+esp8266/50.png"></p><h2 id="设置应用"><a href="#设置应用" class="headerlink" title="设置应用"></a>设置应用</h2><p>点击指示灯组件，点击配置数据源<br><img src="/img/stm32+esp8266/51.png"><br>选择我们的产品、数据、和属性。<br><img src="/img/stm32+esp8266/52.png"><br>我们还可以配置开和关的显示颜色。<br><img src="/img/stm32+esp8266/53.png"><br>点击按钮，配置交互动作。<br><img src="/img/stm32+esp8266/54.png"><br>选择设备和属性，设置值位置点击数据来源，选择组件值<br><img src="/img/stm32+esp8266/55.png"><br>配置完成后进入预览，点击按钮，在esp8266就会收到来自平台的json格式的数据，MCU端需要做的就是解析来自平台的数据，进而达到控制下位机的目的。  </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">+MQTTSUBRECV:<span class="hljs-number">0</span>,<span class="hljs-string">&quot;/sys/hq42unqMiBQ/test/thing/service/property/set&quot;</span>,<span class="hljs-number">101</span>,<br>&#123;&quot;method&quot;:<span class="hljs-string">&quot;thing.service.property.set&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;2067652254&quot;</span>,<span class="hljs-string">&quot;params&quot;</span>:<br>&#123;&quot;LEDSwitch1&quot;:<span class="hljs-number">1</span>&#125;,&quot;version&quot;:<span class="hljs-string">&quot;1.0.0&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>我们需要解析的是 “params” 后面的数据，但是这个数据的长短不一，是根据自己设置的模型来的。所以我我们在解析的时候就利用这一特性，直接解析。<br>打开一个定时器，定时1ms。<br><img src="/img/stm32+esp8266/56.png"><br>打开中断。<br><img src="/img/stm32+esp8266/57.png"><br>在之前工程的基础上，生成新的工程。<br>打开定时器中断。  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">HAL_TIM_Base_Start_IT(&amp;<span class="hljs-params">htim7</span>)</span>;<br></code></pre></td></tr></table></figure><p>重写回调函数。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) <span class="hljs-regexp">//</span>中断回调函数<br>&#123;<br>    static uint16_t dis_cnt,flash_cnt;<br>    <span class="hljs-keyword">if</span>( htim -&gt; Instance == TIM7)<span class="hljs-regexp">//</span>定时器<span class="hljs-number">7</span><br>    &#123;<br>        dis_cnt++;<br>        <span class="hljs-keyword">if</span>(dis_cnt==<span class="hljs-number">5</span>)<span class="hljs-regexp">//</span>延时<span class="hljs-number">5</span>ms<br>        &#123;<br>            dis_cnt=<span class="hljs-number">0</span>;<br>            wait_flag=<span class="hljs-number">1</span>;<span class="hljs-regexp">//</span>解析延时标志位<br>        &#125;<br>        flash_cnt++;<br>        <span class="hljs-keyword">if</span>(flash_cnt==<span class="hljs-number">2000</span>)<span class="hljs-regexp">//</span>显示延时<br>        &#123;<br>            flash_flag=<span class="hljs-number">1</span>;<span class="hljs-regexp">//</span>显示延时标志位<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里使用的是非阻塞的延时，如果是直接使用HAL_Delay的话，会影响其它的函数进行，所以在定时器7中的延时标志位就是用于这个地方。  </p><h2 id="解析函数"><a href="#解析函数" class="headerlink" title="解析函数"></a>解析函数</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> <span class="hljs-title">ESP8266_rx</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> timeOut)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//char buf[20];</span><br>    <span class="hljs-type">char</span> *ptrIPD = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">char</span> *ptrIPD_2 = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">char</span> *ptrIPD_3 = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">char</span> *ptrIPD_4 = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">int</span> i = timeOut;<br>    <span class="hljs-keyword">if</span>( i &amp;&amp; wait_flag)<br>    &#123;<br>        wait_flag=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">ESP8266_WaitRecive</span>() == OK)<span class="hljs-comment">//如果接收完成</span><br>        &#123;<br>            ptrIPD = <span class="hljs-built_in">strstr</span>((<span class="hljs-type">char</span> *)ESP8266_Buf,<span class="hljs-string">&quot;params&quot;</span>);<span class="hljs-comment">//搜索标识符头</span><br>            <span class="hljs-keyword">if</span>(ptrIPD == <span class="hljs-literal">NULL</span>)<span class="hljs-comment">//如果没找到，可能是标识符头的延迟，还是需要等待一会，但不会超过设定的时间</span><br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//没有找到则返回0</span><br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                ptrIPD = <span class="hljs-built_in">strchr</span>(ptrIPD, <span class="hljs-string">&#x27;:&#x27;</span>);<span class="hljs-comment">//找到params后面的&#x27;  : &#x27;</span><br>                <span class="hljs-keyword">if</span>(ptrIPD != <span class="hljs-literal">NULL</span>)<br>                &#123;<br>                    ptrIPD+=<span class="hljs-number">3</span>;<span class="hljs-comment">//找到: 后地址向后移动三位，就是标识符，</span><br>                    ptrIPD_2 = <span class="hljs-built_in">strchr</span>(ptrIPD, <span class="hljs-string">&#x27;:&#x27;</span>); <span class="hljs-comment">//在标识符的后方第一个:就是标识符的值</span><br>                    <span class="hljs-keyword">if</span> (ptrIPD!=<span class="hljs-literal">NULL</span>)<br>                    &#123;<br>                        <span class="hljs-built_in">memset</span>(buf,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(buf));<br>                        ptrIPD_2++;<br>                        buf[<span class="hljs-number">0</span>]=*ptrIPD_2;<br>                        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">atoi</span>(buf)==<span class="hljs-number">1</span>)<br>                        &#123;<br>                            flag_buf=<span class="hljs-number">1</span>;<br>                        &#125;<br>                        <span class="hljs-keyword">else</span><br>                        &#123;<br>                            flag_buf=<span class="hljs-number">0</span>;<br>                        &#125;<br>                    &#125;<br>                    ptrIPD_3 = <span class="hljs-built_in">strchr</span>(ptrIPD, <span class="hljs-string">&#x27;:&#x27;</span>);<span class="hljs-comment">//解析标识符</span><br>                    <span class="hljs-keyword">if</span> (ptrIPD!=<span class="hljs-literal">NULL</span>)<br>                    &#123;<br>                        <span class="hljs-built_in">memset</span>(buf,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(buf));<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">20</span>; i&gt;=<span class="hljs-number">0</span>;i--)<br>                        &#123;<br>                            buf[<span class="hljs-number">20</span>-i]=*(ptrIPD_3-i);<br>                            <span class="hljs-keyword">if</span>(buf[<span class="hljs-number">20</span>-i]==<span class="hljs-string">&#x27;&#123;&#x27;</span>)<br>                            &#123;<br>                                ptrIPD_4=(ptrIPD_3-i+<span class="hljs-number">2</span>);<br>                                <span class="hljs-built_in">memset</span>(buf,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(buf));<br>                                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">20</span>;j++)<br>                                &#123;<br>                                    buf[j]=*(ptrIPD_4+j);<br>                                    <span class="hljs-keyword">if</span>(buf[j]==<span class="hljs-string">&#x27;&quot;&#x27;</span>)<br>                                    &#123;<br>                                        buf[j]=<span class="hljs-number">0</span>;<br>                                        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> ;<br>                                    &#125;<br>                                &#125;<br>                                <span class="hljs-keyword">break</span>;<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        i--;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//超时还未找到，返回0</span><br></code></pre></td></tr></table></figure><p>在判断的时候只需要使用下方函数进行判断，这样子就不会影响在多个标识符时，出现大概率的失误。<br><a href="https://www.runoob.com/cprogramming/c-strings.html">strcmp runoob</a><br>只需要进行下方的判断  </p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lisp">if(!(<span class="hljs-name">strcmp</span>(<span class="hljs-name">buf</span>,<span class="hljs-string">&quot;LED1&quot;</span>)))<br></code></pre></td></tr></table></figure><p>将按钮的值和灯的值绑定。点击按钮配置数据源。<br><img src="/img/stm32+esp8266/58.png"><br>在预览中点击按钮，esp8266接收到如下的数据。所以如果是绑定了数据源，所以改变按钮1的值就下发关于LED的数据。  </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">+MQTTSUBRECV:<span class="hljs-number">0</span>,<span class="hljs-string">&quot;/sys/hq42unqMiBQ/test/thing/service/property/set&quot;</span>,<span class="hljs-number">95</span>,<br>&#123;&quot;method&quot;:<span class="hljs-string">&quot;thing.service.property.set&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;1433329632&quot;</span>,<span class="hljs-string">&quot;params&quot;</span>:<br>&#123;&quot;LED1&quot;:<span class="hljs-number">0</span>&#125;,&quot;version&quot;:<span class="hljs-string">&quot;1.0.0&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>解析后将LED1的数据上报到云。  </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">if</span>(<span class="hljs-operator">!</span>(strcmp(buf,<span class="hljs-string">&quot;LED1&quot;</span>)))<br>      &#123;<br>          memset(buf, <span class="hljs-number">0</span>, sizeof(buf));<br>          <span class="hljs-keyword">if</span>(flag_buf <span class="hljs-operator">==</span> <span class="hljs-number">1</span> )<br>          &#123;<br>              led_info.led1<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br>              memset(data, <span class="hljs-number">0</span>, sizeof(data));<br>              sprintf(data,<span class="hljs-string">&quot;AT+MQTTPUB=0,<span class="hljs-subst">\&quot;</span>/sys/hq42unqMiBQ/test/thing/event/property/post<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\&quot;</span>&#123;\</span><br><span class="hljs-string"><span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>params<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>LED1<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:%d&#125;<span class="hljs-subst">\\</span>\,\</span><br><span class="hljs-string"><span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>method<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>thing.event.property.post<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>&#125;<span class="hljs-subst">\&quot;</span>,0,0<span class="hljs-subst">\r</span><span class="hljs-subst">\n</span>&quot;</span>,led_info.led1);<br>              <span class="hljs-keyword">while</span>(<span class="hljs-type">ESP8266_SendCmd</span>(data,<span class="hljs-string">&quot;OK&quot;</span>));<br>              <span class="hljs-type">ESP8266_Clear</span>();<br>          &#125;<br>          <span class="hljs-keyword">else</span><br>          &#123;<br>              led_info.led1<span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br>              memset(data, <span class="hljs-number">0</span>, sizeof(data));<br>              sprintf(data,<span class="hljs-string">&quot;AT+MQTTPUB=0,<span class="hljs-subst">\&quot;</span>/sys/hq42unqMiBQ/test/thing/event/property/post<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\&quot;</span>&#123;\</span><br><span class="hljs-string"><span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>params<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>LED1<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:%d&#125;<span class="hljs-subst">\\</span>\,\</span><br><span class="hljs-string"><span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>method<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>thing.event.property.post<span class="hljs-subst">\\</span><span class="hljs-subst">\&quot;</span>&#125;<span class="hljs-subst">\&quot;</span>,0,0<span class="hljs-subst">\r</span><span class="hljs-subst">\n</span>&quot;</span>,led_info.led1);<br>              <span class="hljs-keyword">while</span>(<span class="hljs-type">ESP8266_SendCmd</span>(data,<span class="hljs-string">&quot;OK&quot;</span>));<br>              <span class="hljs-type">ESP8266_Clear</span>();<br>          &#125;<br>      &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>STM32</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STM32</tag>
      
      <tag>ESP</tag>
      
      <tag>云</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STM32无线烧录器</title>
    <link href="/2022/12/30/STM32%E6%97%A0%E7%BA%BF%E7%83%A7%E5%BD%95%E5%99%A8/"/>
    <url>/2022/12/30/STM32%E6%97%A0%E7%BA%BF%E7%83%A7%E5%BD%95%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="STM32无线烧录器Part1"><a href="#STM32无线烧录器Part1" class="headerlink" title="STM32无线烧录器Part1"></a>STM32无线烧录器Part1</h1><h2 id="下载固件"><a href="#下载固件" class="headerlink" title="下载固件"></a>下载固件</h2><p><em>使用合宙的ESP32c3烧录固件wireless-DAPLINK-LuatOS-ESP32C3_USB.soc ，在这个固件中默认链接 Wi-Fi配置会自动连接名为DAP，密码为12345678的Wi-Fi。</em><br><strong>Luatostools下载：<a href="https://wiki.luatos.com/boardGuide/flash.html">luatostools</a></strong><br><em>因为打开exe文件后会下载一些包，所以最好新建一个文件夹再打开。</em>  </p><p><img src="/img/STM32_photo/0.png"><br>固件下载  </p><p><img src="/img/STM32_photo/1.png"><br><img src="/img/STM32_photo/2.png"><br><em>固件烧录完成后，电脑打开热点，将热点名称设置为<br><font color ="dd0000">DAP</font>,密码设置为<br><font color ="dd0000">12345678</font><br>并且 频段只能是2.4G</em>  </p><h2 id="使用-elaphureLink"><a href="#使用-elaphureLink" class="headerlink" title="使用 elaphureLink"></a>使用 elaphureLink</h2><p>打开热点管理，将esp通电后会链接热点，连接后会显示ip<br><img src="/img/STM32_photo/3.png"><br>打开elaphureLink，将ip添入Device Address<br><img src="/img/STM32_photo/4.png"><br>点击下方install，将驱动安装到Keil下，这个路径一定要对，不然识别不了。<br>点击Start Proxy 右边的小按钮打开<br><font color ="dd0000">在使用期间elaphureLink不可关闭。</font>  </p><h2 id="keil"><a href="#keil" class="headerlink" title="keil"></a>keil</h2><p>打开keil 选择魔法棒，再点击debug，选择 <font color ="dd0000">elaphureLink Debugger</font><br><img src="/img/STM32_photo/5.png"><br>点击setting 如下图设置。（如果点不开，那就把elaphureLink关闭，打开setting后再打开）<br><img src="/img/STM32_photo/6.png">  </p><h2 id="接线"><a href="#接线" class="headerlink" title="接线"></a>接线</h2><p><img src="/img/STM32_photo/7.png"><br>分别接在STM32对应的位置<br><img src="/img/STM32_photo/8.png"><br><img src="/img/STM32_photo/9.png">  </p><h1 id="STM32无线烧录器Part2"><a href="#STM32无线烧录器Part2" class="headerlink" title="STM32无线烧录器Part2"></a>STM32无线烧录器Part2</h1><p>继上次完成了ESP32无线烧录器。那么有一个问题就是，一堆人都在一起想用这个来无线烧录呢，那么固件中定死的热点名称岂不是会互相的扰乱。所以需要自己编译属于自己的热点名称。<br>首先需要准备以下几样东西。<br>Ubuntu （需要安装idf），这里默认你拥有。<br>ESP32C3，同样默认拥有。合宙简约版esp32c3即可。<br>无限烧录的源码。传送门：<a href="https://github.com/windowsair/wireless-esp8266-dap">wireles-dap</a>  </p><h2 id="安装IDF"><a href="#安装IDF" class="headerlink" title="安装IDF"></a>安装IDF</h2><p>由于网速原因，这里不通过克隆的方式进行下载。<br><a href="https://github.com/espressif/esp-idf/releases/tag/v4.4.2">esp-idf</a><br><img src="/img/STM32_photo/10.png"><br>点击这个连接进行下载。在下载的间隙，先做一下准备工作，新建文件夹。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">~ <span class="hljs-variable">$</span> mkdir esp  <br>~ <span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span>  esp/  <br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">~ $ sudo apt-<span class="hljs-built_in">get</span> update<br>~ $ sudo apt-<span class="hljs-built_in">get</span><span class="hljs-built_in"> upgrade</span><br><span class="hljs-built_in"></span>~ $ sudo apt-<span class="hljs-built_in">get</span> install git wget flex bison gperf python3 python3-venv python3-setuptools cmake ninja-build ccache libffi-dev libssl-dev dfu-util libusb-1.0-0<br></code></pre></td></tr></table></figure><p>下载完成后通过复制到Ubuntu下的esp文件夹中。  </p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">~/esp <span class="hljs-symbol">$mv</span> esp-idf-v4<span class="hljs-number">.4</span><span class="hljs-number">.2</span>  esp-idf<br>~<span class="hljs-regexp">/esp $cd esp-idf/</span><br>~<span class="hljs-regexp">/esp/</span>esp-idf <span class="hljs-symbol">$e</span>xport IDF_GITHUB_ASSETS=<span class="hljs-string">&quot;dl.espressif.com/github_assets&quot;</span><br>~<span class="hljs-regexp">/esp/</span>esp-idf $./install.sh<br></code></pre></td></tr></table></figure><p><img src="/img/STM32_photo/11.png">  </p><p>出现这一行就说明成功了。  </p><p><img src="/img/STM32_photo/12.png">  </p><p>将源码解压放到esp文件夹下。  </p><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><h3 id="完善源码文件"><a href="#完善源码文件" class="headerlink" title="完善源码文件"></a>完善源码文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">~ <span class="hljs-variable">$cd</span> ~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap/components<br>git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/windowsair/</span>corsacOTA.git<br>~ <span class="hljs-variable">$cd</span> ~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap/<br>git clone  https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/windowsair/</span>ESP8266_RTOS_SDK.git<br></code></pre></td></tr></table></figure><h3 id="Udev-规则"><a href="#Udev-规则" class="headerlink" title="Udev 规则"></a>Udev 规则</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~ <span class="hljs-variable">$sudo</span> gedit <span class="hljs-regexp">/etc/u</span>dev<span class="hljs-regexp">/rules.d/</span><span class="hljs-number">40</span>-dfuse.rules<br></code></pre></td></tr></table></figure><p>写入</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">SUBSYSTEMS</span>==&quot;usb&quot;, ATTRS&#123;idVendor&#125;==<span class="hljs-string">&quot;303a&quot;</span>, ATTRS&#123;idProduct&#125;==<span class="hljs-string">&quot;00??&quot;</span>, <span class="hljs-attribute">GROUP</span>=<span class="hljs-string">&quot;plugdev&quot;</span>, <span class="hljs-attribute">MODE</span>=<span class="hljs-string">&quot;0666&quot;</span> <br></code></pre></td></tr></table></figure><p>手动重启</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo udevadm trigger</span><br></code></pre></td></tr></table></figure><h3 id="准备编译"><a href="#准备编译" class="headerlink" title="准备编译"></a>准备编译</h3><p>进入源码文件夹</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">~ <span class="hljs-symbol">$cd</span> ~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap<br></code></pre></td></tr></table></figure><p>设置环境变量</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap $ . <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/esp/</span>esp-idf/export.sh<br></code></pre></td></tr></table></figure><p>出现下方红色线极为正常。<br><img src="/img/STM32_photo/13.png">  </p><h3 id="设置目标芯片"><a href="#设置目标芯片" class="headerlink" title="设置目标芯片"></a>设置目标芯片</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">~/<span class="hljs-string">esp</span>/<span class="hljs-string">wireless-esp8266-dap</span> $ <span class="hljs-string">idf</span>.<span class="hljs-string">py</span> <span class="hljs-built_in">set-target</span> <span class="hljs-string">esp32c3</span><br></code></pre></td></tr></table></figure><p>如下方所示即为正常。<br><img src="/img/STM32_photo/14.png">  </p><h3 id="配置为USB烧录"><a href="#配置为USB烧录" class="headerlink" title="配置为USB烧录"></a>配置为USB烧录</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap $ idf.py menuconfig<br></code></pre></td></tr></table></figure><p>进入如下路径选择USB烧录。  </p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl">C<span class="hljs-function"><span class="hljs-title">omponent</span>-&gt;</span>ESP S<span class="hljs-function"><span class="hljs-title">ystem</span> Settings -&gt;</span>C<span class="hljs-function"><span class="hljs-title">hannel</span> <span class="hljs-keyword">for</span> console output-&gt;</span>USB Serial/JTAG Controller<br></code></pre></td></tr></table></figure><p>一直ESC直到出现如下界面，按Y保存。<br><img src="/img/STM32_photo/15.png">  </p><h3 id="开始编译"><a href="#开始编译" class="headerlink" title="开始编译"></a>开始编译</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap $ idf.py build<br></code></pre></td></tr></table></figure><p>如下现象即为成功。<br><img src="/img/STM32_photo/16.png">  </p><h2 id="烧录"><a href="#烧录" class="headerlink" title="烧录"></a>烧录</h2><p>将开发板插上电。虚拟机会弹出这个界面。选择连接到虚拟机。<br><img src="/img/STM32_photo/17.png"><br>查看USB设备在不在。  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ls <span class="hljs-regexp">/dev/</span>ttyACM<br></code></pre></td></tr></table></figure><p>命令行出现ttyACM设备就是正常的。<br>给权限。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo chmod <span class="hljs-number">777</span> <span class="hljs-regexp">/dev/</span>ttyACM0<br></code></pre></td></tr></table></figure><p>烧录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/esp/</span>wireless-esp8266-dap $ idf.py -p <span class="hljs-regexp">/dev/</span>ttyACM0 flash<br></code></pre></td></tr></table></figure><p>出现进度条就说明正在烧录<br><img src="/img/STM32_photo/18.png"><br>出现以下现象则说明烧录成功。<br><img src="/img/STM32_photo/19.png"><br>电脑打开热点即可查看是否成功。<br><img src="/img/STM32_photo/20.png">  </p><h2 id="修改连接热点名称"><a href="#修改连接热点名称" class="headerlink" title="修改连接热点名称"></a>修改连接热点名称</h2><p>打开源码目录下的 main&#x2F; wifi_configuration.h<br><img src="/img/STM32_photo/21.png"><br>修改划线处即可。  </p><h2 id="重新编译烧录。"><a href="#重新编译烧录。" class="headerlink" title="重新编译烧录。"></a>重新编译烧录。</h2><p><img src="/img/STM32_photo/22.png">  </p>]]></content>
    
    
    <categories>
      
      <category>STM32</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STM32</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
